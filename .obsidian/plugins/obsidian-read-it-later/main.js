/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var Rn=Object.create;var nt=Object.defineProperty;var xn=Object.getOwnPropertyDescriptor;var Ln=Object.getOwnPropertyNames;var Pn=Object.getPrototypeOf,Cn=Object.prototype.hasOwnProperty;var In=(i,t,e)=>t in i?nt(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var De=(i,t)=>()=>(t||i((t={exports:{}}).exports,t),t.exports),Mn=(i,t)=>{for(var e in t)nt(i,e,{get:t[e],enumerable:!0})},nr=(i,t,e,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of Ln(t))!Cn.call(i,n)&&n!==e&&nt(i,n,{get:()=>t[n],enumerable:!(r=xn(t,n))||r.enumerable});return i};var $e=(i,t,e)=>(e=i!=null?Rn(Pn(i)):{},nr(t||!i||!i.__esModule?nt(e,"default",{value:i,enumerable:!0}):e,i)),On=i=>nr(nt({},"__esModule",{value:!0}),i);var C=(i,t,e)=>In(i,typeof t!="symbol"?t+"":t,e);var ur=De((lr,cr)=>{(function(i){if(typeof lr=="object")cr.exports=i();else if(typeof define=="function"&&define.amd)define(i);else{var t;try{t=window}catch(e){t=self}t.SparkMD5=i()}})(function(i){"use strict";var t=function(p,g){return p+g&4294967295},e=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function r(p,g,l,o,m,u){return g=t(t(g,p),t(o,u)),t(g<<m|g>>>32-m,l)}function n(p,g){var l=p[0],o=p[1],m=p[2],u=p[3];l+=(o&m|~o&u)+g[0]-680876936|0,l=(l<<7|l>>>25)+o|0,u+=(l&o|~l&m)+g[1]-389564586|0,u=(u<<12|u>>>20)+l|0,m+=(u&l|~u&o)+g[2]+606105819|0,m=(m<<17|m>>>15)+u|0,o+=(m&u|~m&l)+g[3]-1044525330|0,o=(o<<22|o>>>10)+m|0,l+=(o&m|~o&u)+g[4]-176418897|0,l=(l<<7|l>>>25)+o|0,u+=(l&o|~l&m)+g[5]+1200080426|0,u=(u<<12|u>>>20)+l|0,m+=(u&l|~u&o)+g[6]-1473231341|0,m=(m<<17|m>>>15)+u|0,o+=(m&u|~m&l)+g[7]-45705983|0,o=(o<<22|o>>>10)+m|0,l+=(o&m|~o&u)+g[8]+1770035416|0,l=(l<<7|l>>>25)+o|0,u+=(l&o|~l&m)+g[9]-1958414417|0,u=(u<<12|u>>>20)+l|0,m+=(u&l|~u&o)+g[10]-42063|0,m=(m<<17|m>>>15)+u|0,o+=(m&u|~m&l)+g[11]-1990404162|0,o=(o<<22|o>>>10)+m|0,l+=(o&m|~o&u)+g[12]+1804603682|0,l=(l<<7|l>>>25)+o|0,u+=(l&o|~l&m)+g[13]-40341101|0,u=(u<<12|u>>>20)+l|0,m+=(u&l|~u&o)+g[14]-1502002290|0,m=(m<<17|m>>>15)+u|0,o+=(m&u|~m&l)+g[15]+1236535329|0,o=(o<<22|o>>>10)+m|0,l+=(o&u|m&~u)+g[1]-165796510|0,l=(l<<5|l>>>27)+o|0,u+=(l&m|o&~m)+g[6]-1069501632|0,u=(u<<9|u>>>23)+l|0,m+=(u&o|l&~o)+g[11]+643717713|0,m=(m<<14|m>>>18)+u|0,o+=(m&l|u&~l)+g[0]-373897302|0,o=(o<<20|o>>>12)+m|0,l+=(o&u|m&~u)+g[5]-701558691|0,l=(l<<5|l>>>27)+o|0,u+=(l&m|o&~m)+g[10]+38016083|0,u=(u<<9|u>>>23)+l|0,m+=(u&o|l&~o)+g[15]-660478335|0,m=(m<<14|m>>>18)+u|0,o+=(m&l|u&~l)+g[4]-405537848|0,o=(o<<20|o>>>12)+m|0,l+=(o&u|m&~u)+g[9]+568446438|0,l=(l<<5|l>>>27)+o|0,u+=(l&m|o&~m)+g[14]-1019803690|0,u=(u<<9|u>>>23)+l|0,m+=(u&o|l&~o)+g[3]-187363961|0,m=(m<<14|m>>>18)+u|0,o+=(m&l|u&~l)+g[8]+1163531501|0,o=(o<<20|o>>>12)+m|0,l+=(o&u|m&~u)+g[13]-1444681467|0,l=(l<<5|l>>>27)+o|0,u+=(l&m|o&~m)+g[2]-51403784|0,u=(u<<9|u>>>23)+l|0,m+=(u&o|l&~o)+g[7]+1735328473|0,m=(m<<14|m>>>18)+u|0,o+=(m&l|u&~l)+g[12]-1926607734|0,o=(o<<20|o>>>12)+m|0,l+=(o^m^u)+g[5]-378558|0,l=(l<<4|l>>>28)+o|0,u+=(l^o^m)+g[8]-2022574463|0,u=(u<<11|u>>>21)+l|0,m+=(u^l^o)+g[11]+1839030562|0,m=(m<<16|m>>>16)+u|0,o+=(m^u^l)+g[14]-35309556|0,o=(o<<23|o>>>9)+m|0,l+=(o^m^u)+g[1]-1530992060|0,l=(l<<4|l>>>28)+o|0,u+=(l^o^m)+g[4]+1272893353|0,u=(u<<11|u>>>21)+l|0,m+=(u^l^o)+g[7]-155497632|0,m=(m<<16|m>>>16)+u|0,o+=(m^u^l)+g[10]-1094730640|0,o=(o<<23|o>>>9)+m|0,l+=(o^m^u)+g[13]+681279174|0,l=(l<<4|l>>>28)+o|0,u+=(l^o^m)+g[0]-358537222|0,u=(u<<11|u>>>21)+l|0,m+=(u^l^o)+g[3]-722521979|0,m=(m<<16|m>>>16)+u|0,o+=(m^u^l)+g[6]+76029189|0,o=(o<<23|o>>>9)+m|0,l+=(o^m^u)+g[9]-640364487|0,l=(l<<4|l>>>28)+o|0,u+=(l^o^m)+g[12]-421815835|0,u=(u<<11|u>>>21)+l|0,m+=(u^l^o)+g[15]+530742520|0,m=(m<<16|m>>>16)+u|0,o+=(m^u^l)+g[2]-995338651|0,o=(o<<23|o>>>9)+m|0,l+=(m^(o|~u))+g[0]-198630844|0,l=(l<<6|l>>>26)+o|0,u+=(o^(l|~m))+g[7]+1126891415|0,u=(u<<10|u>>>22)+l|0,m+=(l^(u|~o))+g[14]-1416354905|0,m=(m<<15|m>>>17)+u|0,o+=(u^(m|~l))+g[5]-57434055|0,o=(o<<21|o>>>11)+m|0,l+=(m^(o|~u))+g[12]+1700485571|0,l=(l<<6|l>>>26)+o|0,u+=(o^(l|~m))+g[3]-1894986606|0,u=(u<<10|u>>>22)+l|0,m+=(l^(u|~o))+g[10]-1051523|0,m=(m<<15|m>>>17)+u|0,o+=(u^(m|~l))+g[1]-2054922799|0,o=(o<<21|o>>>11)+m|0,l+=(m^(o|~u))+g[8]+1873313359|0,l=(l<<6|l>>>26)+o|0,u+=(o^(l|~m))+g[15]-30611744|0,u=(u<<10|u>>>22)+l|0,m+=(l^(u|~o))+g[6]-1560198380|0,m=(m<<15|m>>>17)+u|0,o+=(u^(m|~l))+g[13]+1309151649|0,o=(o<<21|o>>>11)+m|0,l+=(m^(o|~u))+g[4]-145523070|0,l=(l<<6|l>>>26)+o|0,u+=(o^(l|~m))+g[11]-1120210379|0,u=(u<<10|u>>>22)+l|0,m+=(l^(u|~o))+g[2]+718787259|0,m=(m<<15|m>>>17)+u|0,o+=(u^(m|~l))+g[9]-343485551|0,o=(o<<21|o>>>11)+m|0,p[0]=l+p[0]|0,p[1]=o+p[1]|0,p[2]=m+p[2]|0,p[3]=u+p[3]|0}function s(p){var g=[],l;for(l=0;l<64;l+=4)g[l>>2]=p.charCodeAt(l)+(p.charCodeAt(l+1)<<8)+(p.charCodeAt(l+2)<<16)+(p.charCodeAt(l+3)<<24);return g}function a(p){var g=[],l;for(l=0;l<64;l+=4)g[l>>2]=p[l]+(p[l+1]<<8)+(p[l+2]<<16)+(p[l+3]<<24);return g}function c(p){var g=p.length,l=[1732584193,-271733879,-1732584194,271733878],o,m,u,O,G,J;for(o=64;o<=g;o+=64)n(l,s(p.substring(o-64,o)));for(p=p.substring(o-64),m=p.length,u=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],o=0;o<m;o+=1)u[o>>2]|=p.charCodeAt(o)<<(o%4<<3);if(u[o>>2]|=128<<(o%4<<3),o>55)for(n(l,u),o=0;o<16;o+=1)u[o]=0;return O=g*8,O=O.toString(16).match(/(.*?)(.{0,8})$/),G=parseInt(O[2],16),J=parseInt(O[1],16)||0,u[14]=G,u[15]=J,n(l,u),l}function f(p){var g=p.length,l=[1732584193,-271733879,-1732584194,271733878],o,m,u,O,G,J;for(o=64;o<=g;o+=64)n(l,a(p.subarray(o-64,o)));for(p=o-64<g?p.subarray(o-64):new Uint8Array(0),m=p.length,u=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],o=0;o<m;o+=1)u[o>>2]|=p[o]<<(o%4<<3);if(u[o>>2]|=128<<(o%4<<3),o>55)for(n(l,u),o=0;o<16;o+=1)u[o]=0;return O=g*8,O=O.toString(16).match(/(.*?)(.{0,8})$/),G=parseInt(O[2],16),J=parseInt(O[1],16)||0,u[14]=G,u[15]=J,n(l,u),l}function d(p){var g="",l;for(l=0;l<4;l+=1)g+=e[p>>l*8+4&15]+e[p>>l*8&15];return g}function v(p){var g;for(g=0;g<p.length;g+=1)p[g]=d(p[g]);return p.join("")}v(c("hello"))!=="5d41402abc4b2a76b9719d911017c592"&&(t=function(p,g){var l=(p&65535)+(g&65535),o=(p>>16)+(g>>16)+(l>>16);return o<<16|l&65535}),typeof ArrayBuffer!="undefined"&&!ArrayBuffer.prototype.slice&&function(){function p(g,l){return g=g|0||0,g<0?Math.max(g+l,0):Math.min(g,l)}ArrayBuffer.prototype.slice=function(g,l){var o=this.byteLength,m=p(g,o),u=o,O,G,J,fe;return l!==i&&(u=p(l,o)),m>u?new ArrayBuffer(0):(O=u-m,G=new ArrayBuffer(O),J=new Uint8Array(G),fe=new Uint8Array(this,m,O),J.set(fe),G)}}();function w(p){return/[\u0080-\uFFFF]/.test(p)&&(p=unescape(encodeURIComponent(p))),p}function I(p,g){var l=p.length,o=new ArrayBuffer(l),m=new Uint8Array(o),u;for(u=0;u<l;u+=1)m[u]=p.charCodeAt(u);return g?m:o}function D(p){return String.fromCharCode.apply(null,new Uint8Array(p))}function M(p,g,l){var o=new Uint8Array(p.byteLength+g.byteLength);return o.set(new Uint8Array(p)),o.set(new Uint8Array(g),p.byteLength),l?o:o.buffer}function x(p){var g=[],l=p.length,o;for(o=0;o<l-1;o+=2)g.push(parseInt(p.substr(o,2),16));return String.fromCharCode.apply(String,g)}function y(){this.reset()}return y.prototype.append=function(p){return this.appendBinary(w(p)),this},y.prototype.appendBinary=function(p){this._buff+=p,this._length+=p.length;var g=this._buff.length,l;for(l=64;l<=g;l+=64)n(this._hash,s(this._buff.substring(l-64,l)));return this._buff=this._buff.substring(l-64),this},y.prototype.end=function(p){var g=this._buff,l=g.length,o,m=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],u;for(o=0;o<l;o+=1)m[o>>2]|=g.charCodeAt(o)<<(o%4<<3);return this._finish(m,l),u=v(this._hash),p&&(u=x(u)),this.reset(),u},y.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},y.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},y.prototype.setState=function(p){return this._buff=p.buff,this._length=p.length,this._hash=p.hash,this},y.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},y.prototype._finish=function(p,g){var l=g,o,m,u;if(p[l>>2]|=128<<(l%4<<3),l>55)for(n(this._hash,p),l=0;l<16;l+=1)p[l]=0;o=this._length*8,o=o.toString(16).match(/(.*?)(.{0,8})$/),m=parseInt(o[2],16),u=parseInt(o[1],16)||0,p[14]=m,p[15]=u,n(this._hash,p)},y.hash=function(p,g){return y.hashBinary(w(p),g)},y.hashBinary=function(p,g){var l=c(p),o=v(l);return g?x(o):o},y.ArrayBuffer=function(){this.reset()},y.ArrayBuffer.prototype.append=function(p){var g=M(this._buff.buffer,p,!0),l=g.length,o;for(this._length+=p.byteLength,o=64;o<=l;o+=64)n(this._hash,a(g.subarray(o-64,o)));return this._buff=o-64<l?new Uint8Array(g.buffer.slice(o-64)):new Uint8Array(0),this},y.ArrayBuffer.prototype.end=function(p){var g=this._buff,l=g.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],m,u;for(m=0;m<l;m+=1)o[m>>2]|=g[m]<<(m%4<<3);return this._finish(o,l),u=v(this._hash),p&&(u=x(u)),this.reset(),u},y.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},y.ArrayBuffer.prototype.getState=function(){var p=y.prototype.getState.call(this);return p.buff=D(p.buff),p},y.ArrayBuffer.prototype.setState=function(p){return p.buff=I(p.buff,!0),y.prototype.setState.call(this,p)},y.ArrayBuffer.prototype.destroy=y.prototype.destroy,y.ArrayBuffer.prototype._finish=y.prototype._finish,y.ArrayBuffer.hash=function(p,g){var l=f(new Uint8Array(p)),o=v(l);return g?x(o):o},y})});var br=De(K=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0});K.toSeconds=K.end=K.parse=K.pattern=void 0;var Ge="\\d+",li="".concat(Ge,"(?:[\\.,]").concat(Ge,")?"),$n="(".concat(Ge,"Y)?(").concat(Ge,"M)?(").concat(Ge,"W)?(").concat(Ge,"D)?"),Gn="T(".concat(li,"H)?(").concat(li,"M)?(").concat(li,"S)?"),zn="P(?:".concat($n,"(?:").concat(Gn,")?)"),jn=["years","months","weeks","days","hours","minutes","seconds"],dr=Object.freeze({years:0,months:0,weeks:0,days:0,hours:0,minutes:0,seconds:0});K.pattern=new RegExp(zn);var qn=function(i){var t=i.replace(/,/g,".").match(K.pattern);if(!t)throw new RangeError("invalid duration: ".concat(i));var e=t.slice(1);if(e.filter(function(r){return r!=null}).length===0)throw new RangeError("invalid duration: ".concat(i));if(e.filter(function(r){return/\./.test(r||"")}).length>1)throw new RangeError("only the smallest unit can be fractional");return e.reduce(function(r,n,s){return r[jn[s]]=parseFloat(n||"0")||0,r},{})};K.parse=qn;var Yn=function(i,t){t===void 0&&(t=new Date);var e=Object.assign({},dr,i),r=t.getTime(),n=new Date(r);n.setFullYear(n.getFullYear()+e.years),n.setMonth(n.getMonth()+e.months),n.setDate(n.getDate()+e.days);var s=e.hours*3600*1e3,a=e.minutes*60*1e3;return n.setMilliseconds(n.getMilliseconds()+e.seconds*1e3+s+a),n.setDate(n.getDate()+e.weeks*7),n};K.end=Yn;var Xn=function(i,t){t===void 0&&(t=new Date);var e=Object.assign({},dr,i),r=t.getTime(),n=new Date(r),s=(0,K.end)(e,n),a=t.getTimezoneOffset(),c=s.getTimezoneOffset(),f=(a-c)*60,d=(s.getTime()-n.getTime())/1e3;return d+f};K.toSeconds=Xn;K.default={end:K.end,toSeconds:K.toSeconds,pattern:K.pattern,parse:K.parse}});var Ei=De((Ti,Ni)=>{(function(i,t){typeof Ti=="object"&&typeof Ni!="undefined"?Ni.exports=t():typeof define=="function"&&define.amd?define(t):(i=typeof globalThis!="undefined"?globalThis:i||self,i.DOMPurify=t())})(Ti,function(){"use strict";function i(N){"@babel/helpers - typeof";return i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E},i(N)}function t(N,E){return t=Object.setPrototypeOf||function(P,W){return P.__proto__=W,P},t(N,E)}function e(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(N){return!1}}function r(N,E,R){return e()?r=Reflect.construct:r=function(W,ae,ne){var he=[null];he.push.apply(he,ae);var Ae=Function.bind.apply(W,he),et=new Ae;return ne&&t(et,ne.prototype),et},r.apply(null,arguments)}function n(N){return s(N)||a(N)||c(N)||d()}function s(N){if(Array.isArray(N))return f(N)}function a(N){if(typeof Symbol!="undefined"&&N[Symbol.iterator]!=null||N["@@iterator"]!=null)return Array.from(N)}function c(N,E){if(N){if(typeof N=="string")return f(N,E);var R=Object.prototype.toString.call(N).slice(8,-1);if(R==="Object"&&N.constructor&&(R=N.constructor.name),R==="Map"||R==="Set")return Array.from(N);if(R==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(R))return f(N,E)}}function f(N,E){(E==null||E>N.length)&&(E=N.length);for(var R=0,P=new Array(E);R<E;R++)P[R]=N[R];return P}function d(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var v=Object.hasOwnProperty,w=Object.setPrototypeOf,I=Object.isFrozen,D=Object.getPrototypeOf,M=Object.getOwnPropertyDescriptor,x=Object.freeze,y=Object.seal,p=Object.create,g=typeof Reflect!="undefined"&&Reflect,l=g.apply,o=g.construct;l||(l=function(E,R,P){return E.apply(R,P)}),x||(x=function(E){return E}),y||(y=function(E){return E}),o||(o=function(E,R){return r(E,n(R))});var m=te(Array.prototype.forEach),u=te(Array.prototype.pop),O=te(Array.prototype.push),G=te(String.prototype.toLowerCase),J=te(String.prototype.toString),fe=te(String.prototype.match),ee=te(String.prototype.replace),Ye=te(String.prototype.indexOf),Ft=te(String.prototype.trim),H=te(RegExp.prototype.test),V=Xe(TypeError);function te(N){return function(E){for(var R=arguments.length,P=new Array(R>1?R-1:0),W=1;W<R;W++)P[W-1]=arguments[W];return l(N,E,P)}}function Xe(N){return function(){for(var E=arguments.length,R=new Array(E),P=0;P<E;P++)R[P]=arguments[P];return o(N,R)}}function L(N,E,R){var P;R=(P=R)!==null&&P!==void 0?P:G,w&&w(N,null);for(var W=E.length;W--;){var ae=E[W];if(typeof ae=="string"){var ne=R(ae);ne!==ae&&(I(E)||(E[W]=ne),ae=ne)}N[ae]=!0}return N}function ce(N){var E=p(null),R;for(R in N)l(v,N,[R])===!0&&(E[R]=N[R]);return E}function F(N,E){for(;N!==null;){var R=M(N,E);if(R){if(R.get)return te(R.get);if(typeof R.value=="function")return te(R.value)}N=D(N)}function P(W){return console.warn("fallback value for",W),null}return P}var Te=x(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Ce=x(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Ie=x(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),ut=x(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Ee=x(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),Me=x(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Oe=x(["#text"]),Ne=x(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Ke=x(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Je=x(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ie=x(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),ue=y(/\{\{[\w\W]*|[\w\W]*\}\}/gm),ht=y(/<%[\w\W]*|[\w\W]*%>/gm),ke=y(/\${[\w\W]*}/gm),de=y(/^data-[\-\w.\u00B7-\uFFFF]/),Ze=y(/^aria-[\-\w]+$/),Qe=y(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Zr=y(/^(?:\w+script|data):/i),Qr=y(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),en=y(/^html$/i),tn=y(/^[a-z][.\w]*(-[.\w]+)+$/i),rn=function(){return typeof window=="undefined"?null:window},nn=function(E,R){if(i(E)!=="object"||typeof E.createPolicy!="function")return null;var P=null,W="data-tt-policy-suffix";R.currentScript&&R.currentScript.hasAttribute(W)&&(P=R.currentScript.getAttribute(W));var ae="dompurify"+(P?"#"+P:"");try{return E.createPolicy(ae,{createHTML:function(he){return he},createScriptURL:function(he){return he}})}catch(ne){return console.warn("TrustedTypes policy "+ae+" could not be created."),null}};function Ii(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:rn(),E=function(h){return Ii(h)};if(E.version="2.5.6",E.removed=[],!N||!N.document||N.document.nodeType!==9)return E.isSupported=!1,E;var R=N.document,P=N.document,W=N.DocumentFragment,ae=N.HTMLTemplateElement,ne=N.Node,he=N.Element,Ae=N.NodeFilter,et=N.NamedNodeMap,sn=et===void 0?N.NamedNodeMap||N.MozNamedAttrMap:et,on=N.HTMLFormElement,ln=N.DOMParser,mt=N.trustedTypes,gt=he.prototype,cn=F(gt,"cloneNode"),un=F(gt,"nextSibling"),hn=F(gt,"childNodes"),Ut=F(gt,"parentNode");if(typeof ae=="function"){var Bt=P.createElement("template");Bt.content&&Bt.content.ownerDocument&&(P=Bt.content.ownerDocument)}var oe=nn(mt,R),Ht=oe?oe.createHTML(""):"",pt=P,Vt=pt.implementation,mn=pt.createNodeIterator,gn=pt.createDocumentFragment,pn=pt.getElementsByTagName,fn=R.importNode,Mi={};try{Mi=ce(P).documentMode?P.documentMode:{}}catch(_){}var me={};E.isSupported=typeof Ut=="function"&&Vt&&Vt.createHTMLDocument!==void 0&&Mi!==9;var Wt=ue,$t=ht,Gt=ke,dn=de,bn=Ze,vn=Zr,Oi=Qr,yn=tn,zt=Qe,j=null,ki=L({},[].concat(n(Te),n(Ce),n(Ie),n(Ee),n(Oe))),q=null,Fi=L({},[].concat(n(Ne),n(Ke),n(Je),n(ie))),U=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),tt=null,jt=null,Ui=!0,qt=!0,Bi=!1,Hi=!0,Fe=!1,Yt=!0,we=!1,Xt=!1,Kt=!1,Ue=!1,ft=!1,dt=!1,Vi=!0,Wi=!1,Tn="user-content-",Jt=!0,it=!1,Be={},He=null,$i=L({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Gi=null,zi=L({},["audio","video","img","source","image","track"]),Zt=null,ji=L({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),bt="http://www.w3.org/1998/Math/MathML",vt="http://www.w3.org/2000/svg",be="http://www.w3.org/1999/xhtml",Ve=be,Qt=!1,ei=null,Nn=L({},[bt,vt,be],J),_e,En=["application/xhtml+xml","text/html"],An="text/html",Y,We=null,wn=P.createElement("form"),qi=function(h){return h instanceof RegExp||h instanceof Function},ti=function(h){We&&We===h||((!h||i(h)!=="object")&&(h={}),h=ce(h),_e=En.indexOf(h.PARSER_MEDIA_TYPE)===-1?_e=An:_e=h.PARSER_MEDIA_TYPE,Y=_e==="application/xhtml+xml"?J:G,j="ALLOWED_TAGS"in h?L({},h.ALLOWED_TAGS,Y):ki,q="ALLOWED_ATTR"in h?L({},h.ALLOWED_ATTR,Y):Fi,ei="ALLOWED_NAMESPACES"in h?L({},h.ALLOWED_NAMESPACES,J):Nn,Zt="ADD_URI_SAFE_ATTR"in h?L(ce(ji),h.ADD_URI_SAFE_ATTR,Y):ji,Gi="ADD_DATA_URI_TAGS"in h?L(ce(zi),h.ADD_DATA_URI_TAGS,Y):zi,He="FORBID_CONTENTS"in h?L({},h.FORBID_CONTENTS,Y):$i,tt="FORBID_TAGS"in h?L({},h.FORBID_TAGS,Y):{},jt="FORBID_ATTR"in h?L({},h.FORBID_ATTR,Y):{},Be="USE_PROFILES"in h?h.USE_PROFILES:!1,Ui=h.ALLOW_ARIA_ATTR!==!1,qt=h.ALLOW_DATA_ATTR!==!1,Bi=h.ALLOW_UNKNOWN_PROTOCOLS||!1,Hi=h.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Fe=h.SAFE_FOR_TEMPLATES||!1,Yt=h.SAFE_FOR_XML!==!1,we=h.WHOLE_DOCUMENT||!1,Ue=h.RETURN_DOM||!1,ft=h.RETURN_DOM_FRAGMENT||!1,dt=h.RETURN_TRUSTED_TYPE||!1,Kt=h.FORCE_BODY||!1,Vi=h.SANITIZE_DOM!==!1,Wi=h.SANITIZE_NAMED_PROPS||!1,Jt=h.KEEP_CONTENT!==!1,it=h.IN_PLACE||!1,zt=h.ALLOWED_URI_REGEXP||zt,Ve=h.NAMESPACE||be,U=h.CUSTOM_ELEMENT_HANDLING||{},h.CUSTOM_ELEMENT_HANDLING&&qi(h.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(U.tagNameCheck=h.CUSTOM_ELEMENT_HANDLING.tagNameCheck),h.CUSTOM_ELEMENT_HANDLING&&qi(h.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(U.attributeNameCheck=h.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),h.CUSTOM_ELEMENT_HANDLING&&typeof h.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(U.allowCustomizedBuiltInElements=h.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Fe&&(qt=!1),ft&&(Ue=!0),Be&&(j=L({},n(Oe)),q=[],Be.html===!0&&(L(j,Te),L(q,Ne)),Be.svg===!0&&(L(j,Ce),L(q,Ke),L(q,ie)),Be.svgFilters===!0&&(L(j,Ie),L(q,Ke),L(q,ie)),Be.mathMl===!0&&(L(j,Ee),L(q,Je),L(q,ie))),h.ADD_TAGS&&(j===ki&&(j=ce(j)),L(j,h.ADD_TAGS,Y)),h.ADD_ATTR&&(q===Fi&&(q=ce(q)),L(q,h.ADD_ATTR,Y)),h.ADD_URI_SAFE_ATTR&&L(Zt,h.ADD_URI_SAFE_ATTR,Y),h.FORBID_CONTENTS&&(He===$i&&(He=ce(He)),L(He,h.FORBID_CONTENTS,Y)),Jt&&(j["#text"]=!0),we&&L(j,["html","head","body"]),j.table&&(L(j,["tbody"]),delete tt.tbody),x&&x(h),We=h)},Yi=L({},["mi","mo","mn","ms","mtext"]),Xi=L({},["foreignobject","annotation-xml"]),_n=L({},["title","style","font","a","script"]),yt=L({},Ce);L(yt,Ie),L(yt,ut);var ii=L({},Ee);L(ii,Me);var Sn=function(h){var b=Ut(h);(!b||!b.tagName)&&(b={namespaceURI:Ve,tagName:"template"});var T=G(h.tagName),k=G(b.tagName);return ei[h.namespaceURI]?h.namespaceURI===vt?b.namespaceURI===be?T==="svg":b.namespaceURI===bt?T==="svg"&&(k==="annotation-xml"||Yi[k]):!!yt[T]:h.namespaceURI===bt?b.namespaceURI===be?T==="math":b.namespaceURI===vt?T==="math"&&Xi[k]:!!ii[T]:h.namespaceURI===be?b.namespaceURI===vt&&!Xi[k]||b.namespaceURI===bt&&!Yi[k]?!1:!ii[T]&&(_n[T]||!yt[T]):!!(_e==="application/xhtml+xml"&&ei[h.namespaceURI]):!1},se=function(h){O(E.removed,{element:h});try{h.parentNode.removeChild(h)}catch(b){try{h.outerHTML=Ht}catch(T){h.remove()}}},Tt=function(h,b){try{O(E.removed,{attribute:b.getAttributeNode(h),from:b})}catch(T){O(E.removed,{attribute:null,from:b})}if(b.removeAttribute(h),h==="is"&&!q[h])if(Ue||ft)try{se(b)}catch(T){}else try{b.setAttribute(h,"")}catch(T){}},Ki=function(h){var b,T;if(Kt)h="<remove></remove>"+h;else{var k=fe(h,/^[\r\n\t ]+/);T=k&&k[0]}_e==="application/xhtml+xml"&&Ve===be&&(h='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+h+"</body></html>");var re=oe?oe.createHTML(h):h;if(Ve===be)try{b=new ln().parseFromString(re,_e)}catch(X){}if(!b||!b.documentElement){b=Vt.createDocument(Ve,"template",null);try{b.documentElement.innerHTML=Qt?Ht:re}catch(X){}}var Z=b.body||b.documentElement;return h&&T&&Z.insertBefore(P.createTextNode(T),Z.childNodes[0]||null),Ve===be?pn.call(b,we?"html":"body")[0]:we?b.documentElement:Z},Ji=function(h){return mn.call(h.ownerDocument||h,h,Ae.SHOW_ELEMENT|Ae.SHOW_COMMENT|Ae.SHOW_TEXT|Ae.SHOW_PROCESSING_INSTRUCTION|Ae.SHOW_CDATA_SECTION,null,!1)},Zi=function(h){return h instanceof on&&(typeof h.nodeName!="string"||typeof h.textContent!="string"||typeof h.removeChild!="function"||!(h.attributes instanceof sn)||typeof h.removeAttribute!="function"||typeof h.setAttribute!="function"||typeof h.namespaceURI!="string"||typeof h.insertBefore!="function"||typeof h.hasChildNodes!="function")},rt=function(h){return i(ne)==="object"?h instanceof ne:h&&i(h)==="object"&&typeof h.nodeType=="number"&&typeof h.nodeName=="string"},ve=function(h,b,T){me[h]&&m(me[h],function(k){k.call(E,b,T,We)})},Qi=function(h){var b;if(ve("beforeSanitizeElements",h,null),Zi(h)||H(/[\u0080-\uFFFF]/,h.nodeName))return se(h),!0;var T=Y(h.nodeName);if(ve("uponSanitizeElement",h,{tagName:T,allowedTags:j}),h.hasChildNodes()&&!rt(h.firstElementChild)&&(!rt(h.content)||!rt(h.content.firstElementChild))&&H(/<[/\w]/g,h.innerHTML)&&H(/<[/\w]/g,h.textContent)||T==="select"&&H(/<template/i,h.innerHTML)||h.nodeType===7||Yt&&h.nodeType===8&&H(/<[/\w]/g,h.data))return se(h),!0;if(!j[T]||tt[T]){if(!tt[T]&&tr(T)&&(U.tagNameCheck instanceof RegExp&&H(U.tagNameCheck,T)||U.tagNameCheck instanceof Function&&U.tagNameCheck(T)))return!1;if(Jt&&!He[T]){var k=Ut(h)||h.parentNode,re=hn(h)||h.childNodes;if(re&&k)for(var Z=re.length,X=Z-1;X>=0;--X){var Se=cn(re[X],!0);Se.__removalCount=(h.__removalCount||0)+1,k.insertBefore(Se,un(h))}}return se(h),!0}return h instanceof he&&!Sn(h)||(T==="noscript"||T==="noembed"||T==="noframes")&&H(/<\/no(script|embed|frames)/i,h.innerHTML)?(se(h),!0):(Fe&&h.nodeType===3&&(b=h.textContent,b=ee(b,Wt," "),b=ee(b,$t," "),b=ee(b,Gt," "),h.textContent!==b&&(O(E.removed,{element:h.cloneNode()}),h.textContent=b)),ve("afterSanitizeElements",h,null),!1)},er=function(h,b,T){if(Vi&&(b==="id"||b==="name")&&(T in P||T in wn))return!1;if(!(qt&&!jt[b]&&H(dn,b))){if(!(Ui&&H(bn,b))){if(!q[b]||jt[b]){if(!(tr(h)&&(U.tagNameCheck instanceof RegExp&&H(U.tagNameCheck,h)||U.tagNameCheck instanceof Function&&U.tagNameCheck(h))&&(U.attributeNameCheck instanceof RegExp&&H(U.attributeNameCheck,b)||U.attributeNameCheck instanceof Function&&U.attributeNameCheck(b))||b==="is"&&U.allowCustomizedBuiltInElements&&(U.tagNameCheck instanceof RegExp&&H(U.tagNameCheck,T)||U.tagNameCheck instanceof Function&&U.tagNameCheck(T))))return!1}else if(!Zt[b]){if(!H(zt,ee(T,Oi,""))){if(!((b==="src"||b==="xlink:href"||b==="href")&&h!=="script"&&Ye(T,"data:")===0&&Gi[h])){if(!(Bi&&!H(vn,ee(T,Oi,"")))){if(T)return!1}}}}}}return!0},tr=function(h){return h!=="annotation-xml"&&fe(h,yn)},ir=function(h){var b,T,k,re;ve("beforeSanitizeAttributes",h,null);var Z=h.attributes;if(Z){var X={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:q};for(re=Z.length;re--;){b=Z[re];var Se=b,z=Se.name,ri=Se.namespaceURI;if(T=z==="value"?b.value:Ft(b.value),k=Y(z),X.attrName=k,X.attrValue=T,X.keepAttr=!0,X.forceKeepAttr=void 0,ve("uponSanitizeAttribute",h,X),T=X.attrValue,Yt&&H(/((--!?|])>)|<\/(style|title)/i,T)){Tt(z,h);continue}if(!X.forceKeepAttr&&(Tt(z,h),!!X.keepAttr)){if(!Hi&&H(/\/>/i,T)){Tt(z,h);continue}Fe&&(T=ee(T,Wt," "),T=ee(T,$t," "),T=ee(T,Gt," "));var rr=Y(h.nodeName);if(er(rr,k,T)){if(Wi&&(k==="id"||k==="name")&&(Tt(z,h),T=Tn+T),oe&&i(mt)==="object"&&typeof mt.getAttributeType=="function"&&!ri)switch(mt.getAttributeType(rr,k)){case"TrustedHTML":{T=oe.createHTML(T);break}case"TrustedScriptURL":{T=oe.createScriptURL(T);break}}try{ri?h.setAttributeNS(ri,z,T):h.setAttribute(z,T),Zi(h)?se(h):u(E.removed)}catch(Ma){}}}}ve("afterSanitizeAttributes",h,null)}},Dn=function _(h){var b,T=Ji(h);for(ve("beforeSanitizeShadowDOM",h,null);b=T.nextNode();)ve("uponSanitizeShadowNode",b,null),!Qi(b)&&(b.content instanceof W&&_(b.content),ir(b));ve("afterSanitizeShadowDOM",h,null)};return E.sanitize=function(_){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},b,T,k,re,Z;if(Qt=!_,Qt&&(_="<!-->"),typeof _!="string"&&!rt(_))if(typeof _.toString=="function"){if(_=_.toString(),typeof _!="string")throw V("dirty is not a string, aborting")}else throw V("toString is not a function");if(!E.isSupported){if(i(N.toStaticHTML)==="object"||typeof N.toStaticHTML=="function"){if(typeof _=="string")return N.toStaticHTML(_);if(rt(_))return N.toStaticHTML(_.outerHTML)}return _}if(Xt||ti(h),E.removed=[],typeof _=="string"&&(it=!1),it){if(_.nodeName){var X=Y(_.nodeName);if(!j[X]||tt[X])throw V("root node is forbidden and cannot be sanitized in-place")}}else if(_ instanceof ne)b=Ki("<!---->"),T=b.ownerDocument.importNode(_,!0),T.nodeType===1&&T.nodeName==="BODY"||T.nodeName==="HTML"?b=T:b.appendChild(T);else{if(!Ue&&!Fe&&!we&&_.indexOf("<")===-1)return oe&&dt?oe.createHTML(_):_;if(b=Ki(_),!b)return Ue?null:dt?Ht:""}b&&Kt&&se(b.firstChild);for(var Se=Ji(it?_:b);k=Se.nextNode();)k.nodeType===3&&k===re||Qi(k)||(k.content instanceof W&&Dn(k.content),ir(k),re=k);if(re=null,it)return _;if(Ue){if(ft)for(Z=gn.call(b.ownerDocument);b.firstChild;)Z.appendChild(b.firstChild);else Z=b;return(q.shadowroot||q.shadowrootmod)&&(Z=fn.call(R,Z,!0)),Z}var z=we?b.outerHTML:b.innerHTML;return we&&j["!doctype"]&&b.ownerDocument&&b.ownerDocument.doctype&&b.ownerDocument.doctype.name&&H(en,b.ownerDocument.doctype.name)&&(z="<!DOCTYPE "+b.ownerDocument.doctype.name+`>
`+z),Fe&&(z=ee(z,Wt," "),z=ee(z,$t," "),z=ee(z,Gt," ")),oe&&dt?oe.createHTML(z):z},E.setConfig=function(_){ti(_),Xt=!0},E.clearConfig=function(){We=null,Xt=!1},E.isValidAttribute=function(_,h,b){We||ti({});var T=Y(_),k=Y(h);return er(T,k,b)},E.addHook=function(_,h){typeof h=="function"&&(me[_]=me[_]||[],O(me[_],h))},E.removeHook=function(_){if(me[_])return u(me[_])},E.removeHooks=function(_){me[_]&&(me[_]=[])},E.removeAllHooks=function(){me={}},E}var an=Ii();return an})});var Ai=De((js,Br)=>{Br.exports=window.DOMPurify||(window.DOMPurify=Ei().default||Ei())});var Wr=De((eo,Si)=>{function Vr(i,t){if(t&&t.documentElement)i=t,t=arguments[2];else if(!i||!i.documentElement)throw new Error("First argument to Readability constructor should be a document object.");if(t=t||{},this._doc=i,this._docJSDOMParser=this._doc.firstChild.__JSDOMParser__,this._articleTitle=null,this._articleByline=null,this._articleDir=null,this._articleSiteName=null,this._attempts=[],this._debug=!!t.debug,this._maxElemsToParse=t.maxElemsToParse||this.DEFAULT_MAX_ELEMS_TO_PARSE,this._nbTopCandidates=t.nbTopCandidates||this.DEFAULT_N_TOP_CANDIDATES,this._charThreshold=t.charThreshold||this.DEFAULT_CHAR_THRESHOLD,this._classesToPreserve=this.CLASSES_TO_PRESERVE.concat(t.classesToPreserve||[]),this._keepClasses=!!t.keepClasses,this._serializer=t.serializer||function(e){return e.innerHTML},this._disableJSONLD=!!t.disableJSONLD,this._allowedVideoRegex=t.allowedVideoRegex||this.REGEXPS.videos,this._flags=this.FLAG_STRIP_UNLIKELYS|this.FLAG_WEIGHT_CLASSES|this.FLAG_CLEAN_CONDITIONALLY,this._debug){let e=function(r){if(r.nodeType==r.TEXT_NODE)return`${r.nodeName} ("${r.textContent}")`;let n=Array.from(r.attributes||[],function(s){return`${s.name}="${s.value}"`}).join(" ");return`<${r.localName} ${n}>`};this.log=function(){if(typeof console!="undefined"){let n=Array.from(arguments,s=>s&&s.nodeType==this.ELEMENT_NODE?e(s):s);n.unshift("Reader: (Readability)"),console.log.apply(console,n)}else if(typeof dump!="undefined"){var r=Array.prototype.map.call(arguments,function(n){return n&&n.nodeName?e(n):n}).join(" ");dump("Reader: (Readability) "+r+`
`)}}}else this.log=function(){}}Vr.prototype={FLAG_STRIP_UNLIKELYS:1,FLAG_WEIGHT_CLASSES:2,FLAG_CLEAN_CONDITIONALLY:4,ELEMENT_NODE:1,TEXT_NODE:3,DEFAULT_MAX_ELEMS_TO_PARSE:0,DEFAULT_N_TOP_CANDIDATES:5,DEFAULT_TAGS_TO_SCORE:"section,h2,h3,h4,h5,h6,p,td,pre".toUpperCase().split(","),DEFAULT_CHAR_THRESHOLD:500,REGEXPS:{unlikelyCandidates:/-ad-|ai2html|banner|breadcrumbs|combx|comment|community|cover-wrap|disqus|extra|footer|gdpr|header|legends|menu|related|remark|replies|rss|shoutbox|sidebar|skyscraper|social|sponsor|supplemental|ad-break|agegate|pagination|pager|popup|yom-remote/i,okMaybeItsACandidate:/and|article|body|column|content|main|shadow/i,positive:/article|body|content|entry|hentry|h-entry|main|page|pagination|post|text|blog|story/i,negative:/-ad-|hidden|^hid$| hid$| hid |^hid |banner|combx|comment|com-|contact|foot|footer|footnote|gdpr|masthead|media|meta|outbrain|promo|related|scroll|share|shoutbox|sidebar|skyscraper|sponsor|shopping|tags|tool|widget/i,extraneous:/print|archive|comment|discuss|e[\-]?mail|share|reply|all|login|sign|single|utility/i,byline:/byline|author|dateline|writtenby|p-author/i,replaceFonts:/<(\/?)font[^>]*>/gi,normalize:/\s{2,}/g,videos:/\/\/(www\.)?((dailymotion|youtube|youtube-nocookie|player\.vimeo|v\.qq)\.com|(archive|upload\.wikimedia)\.org|player\.twitch\.tv)/i,shareElements:/(\b|_)(share|sharedaddy)(\b|_)/i,nextLink:/(next|weiter|continue|>([^\|]|$)|»([^\|]|$))/i,prevLink:/(prev|earl|old|new|<|«)/i,tokenize:/\W+/g,whitespace:/^\s*$/,hasContent:/\S$/,hashUrl:/^#.+/,srcsetUrl:/(\S+)(\s+[\d.]+[xw])?(\s*(?:,|$))/g,b64DataUrl:/^data:\s*([^\s;,]+)\s*;\s*base64\s*,/i,commas:/\u002C|\u060C|\uFE50|\uFE10|\uFE11|\u2E41|\u2E34|\u2E32|\uFF0C/g,jsonLdArticleTypes:/^Article|AdvertiserContentArticle|NewsArticle|AnalysisNewsArticle|AskPublicNewsArticle|BackgroundNewsArticle|OpinionNewsArticle|ReportageNewsArticle|ReviewNewsArticle|Report|SatiricalArticle|ScholarlyArticle|MedicalScholarlyArticle|SocialMediaPosting|BlogPosting|LiveBlogPosting|DiscussionForumPosting|TechArticle|APIReference$/},UNLIKELY_ROLES:["menu","menubar","complementary","navigation","alert","alertdialog","dialog"],DIV_TO_P_ELEMS:new Set(["BLOCKQUOTE","DL","DIV","IMG","OL","P","PRE","TABLE","UL"]),ALTER_TO_DIV_EXCEPTIONS:["DIV","ARTICLE","SECTION","P"],PRESENTATIONAL_ATTRIBUTES:["align","background","bgcolor","border","cellpadding","cellspacing","frame","hspace","rules","style","valign","vspace"],DEPRECATED_SIZE_ATTRIBUTE_ELEMS:["TABLE","TH","TD","HR","PRE"],PHRASING_ELEMS:["ABBR","AUDIO","B","BDO","BR","BUTTON","CITE","CODE","DATA","DATALIST","DFN","EM","EMBED","I","IMG","INPUT","KBD","LABEL","MARK","MATH","METER","NOSCRIPT","OBJECT","OUTPUT","PROGRESS","Q","RUBY","SAMP","SCRIPT","SELECT","SMALL","SPAN","STRONG","SUB","SUP","TEXTAREA","TIME","VAR","WBR"],CLASSES_TO_PRESERVE:["page"],HTML_ESCAPE_MAP:{lt:"<",gt:">",amp:"&",quot:'"',apos:"'"},_postProcessContent:function(i){this._fixRelativeUris(i),this._simplifyNestedElements(i),this._keepClasses||this._cleanClasses(i)},_removeNodes:function(i,t){if(this._docJSDOMParser&&i._isLiveNodeList)throw new Error("Do not pass live node lists to _removeNodes");for(var e=i.length-1;e>=0;e--){var r=i[e],n=r.parentNode;n&&(!t||t.call(this,r,e,i))&&n.removeChild(r)}},_replaceNodeTags:function(i,t){if(this._docJSDOMParser&&i._isLiveNodeList)throw new Error("Do not pass live node lists to _replaceNodeTags");for(let e of i)this._setNodeTag(e,t)},_forEachNode:function(i,t){Array.prototype.forEach.call(i,t,this)},_findNode:function(i,t){return Array.prototype.find.call(i,t,this)},_someNode:function(i,t){return Array.prototype.some.call(i,t,this)},_everyNode:function(i,t){return Array.prototype.every.call(i,t,this)},_concatNodeLists:function(){var i=Array.prototype.slice,t=i.call(arguments),e=t.map(function(r){return i.call(r)});return Array.prototype.concat.apply([],e)},_getAllNodesWithTag:function(i,t){return i.querySelectorAll?i.querySelectorAll(t.join(",")):[].concat.apply([],t.map(function(e){var r=i.getElementsByTagName(e);return Array.isArray(r)?r:Array.from(r)}))},_cleanClasses:function(i){var t=this._classesToPreserve,e=(i.getAttribute("class")||"").split(/\s+/).filter(function(r){return t.indexOf(r)!=-1}).join(" ");for(e?i.setAttribute("class",e):i.removeAttribute("class"),i=i.firstElementChild;i;i=i.nextElementSibling)this._cleanClasses(i)},_fixRelativeUris:function(i){var t=this._doc.baseURI,e=this._doc.documentURI;function r(a){if(t==e&&a.charAt(0)=="#")return a;try{return new URL(a,t).href}catch(c){}return a}var n=this._getAllNodesWithTag(i,["a"]);this._forEachNode(n,function(a){var c=a.getAttribute("href");if(c)if(c.indexOf("javascript:")===0)if(a.childNodes.length===1&&a.childNodes[0].nodeType===this.TEXT_NODE){var f=this._doc.createTextNode(a.textContent);a.parentNode.replaceChild(f,a)}else{for(var d=this._doc.createElement("span");a.firstChild;)d.appendChild(a.firstChild);a.parentNode.replaceChild(d,a)}else a.setAttribute("href",r(c))});var s=this._getAllNodesWithTag(i,["img","picture","figure","video","audio","source"]);this._forEachNode(s,function(a){var c=a.getAttribute("src"),f=a.getAttribute("poster"),d=a.getAttribute("srcset");if(c&&a.setAttribute("src",r(c)),f&&a.setAttribute("poster",r(f)),d){var v=d.replace(this.REGEXPS.srcsetUrl,function(w,I,D,M){return r(I)+(D||"")+M});a.setAttribute("srcset",v)}})},_simplifyNestedElements:function(i){for(var t=i;t;){if(t.parentNode&&["DIV","SECTION"].includes(t.tagName)&&!(t.id&&t.id.startsWith("readability"))){if(this._isElementWithoutContent(t)){t=this._removeAndGetNext(t);continue}else if(this._hasSingleTagInsideElement(t,"DIV")||this._hasSingleTagInsideElement(t,"SECTION")){for(var e=t.children[0],r=0;r<t.attributes.length;r++)e.setAttribute(t.attributes[r].name,t.attributes[r].value);t.parentNode.replaceChild(e,t),t=e;continue}}t=this._getNextNode(t)}},_getArticleTitle:function(){var i=this._doc,t="",e="";try{t=e=i.title.trim(),typeof t!="string"&&(t=e=this._getInnerText(i.getElementsByTagName("title")[0]))}catch(v){}var r=!1;function n(v){return v.split(/\s+/).length}if(/ [\|\-\\\/>»] /.test(t))r=/ [\\\/>»] /.test(t),t=e.replace(/(.*)[\|\-\\\/>»] .*/gi,"$1"),n(t)<3&&(t=e.replace(/[^\|\-\\\/>»]*[\|\-\\\/>»](.*)/gi,"$1"));else if(t.indexOf(": ")!==-1){var s=this._concatNodeLists(i.getElementsByTagName("h1"),i.getElementsByTagName("h2")),a=t.trim(),c=this._someNode(s,function(v){return v.textContent.trim()===a});c||(t=e.substring(e.lastIndexOf(":")+1),n(t)<3?t=e.substring(e.indexOf(":")+1):n(e.substr(0,e.indexOf(":")))>5&&(t=e))}else if(t.length>150||t.length<15){var f=i.getElementsByTagName("h1");f.length===1&&(t=this._getInnerText(f[0]))}t=t.trim().replace(this.REGEXPS.normalize," ");var d=n(t);return d<=4&&(!r||d!=n(e.replace(/[\|\-\\\/>»]+/g,""))-1)&&(t=e),t},_prepDocument:function(){var i=this._doc;this._removeNodes(this._getAllNodesWithTag(i,["style"])),i.body&&this._replaceBrs(i.body),this._replaceNodeTags(this._getAllNodesWithTag(i,["font"]),"SPAN")},_nextNode:function(i){for(var t=i;t&&t.nodeType!=this.ELEMENT_NODE&&this.REGEXPS.whitespace.test(t.textContent);)t=t.nextSibling;return t},_replaceBrs:function(i){this._forEachNode(this._getAllNodesWithTag(i,["br"]),function(t){for(var e=t.nextSibling,r=!1;(e=this._nextNode(e))&&e.tagName=="BR";){r=!0;var n=e.nextSibling;e.parentNode.removeChild(e),e=n}if(r){var s=this._doc.createElement("p");for(t.parentNode.replaceChild(s,t),e=s.nextSibling;e;){if(e.tagName=="BR"){var a=this._nextNode(e.nextSibling);if(a&&a.tagName=="BR")break}if(!this._isPhrasingContent(e))break;var c=e.nextSibling;s.appendChild(e),e=c}for(;s.lastChild&&this._isWhitespace(s.lastChild);)s.removeChild(s.lastChild);s.parentNode.tagName==="P"&&this._setNodeTag(s.parentNode,"DIV")}})},_setNodeTag:function(i,t){if(this.log("_setNodeTag",i,t),this._docJSDOMParser)return i.localName=t.toLowerCase(),i.tagName=t.toUpperCase(),i;for(var e=i.ownerDocument.createElement(t);i.firstChild;)e.appendChild(i.firstChild);i.parentNode.replaceChild(e,i),i.readability&&(e.readability=i.readability);for(var r=0;r<i.attributes.length;r++)try{e.setAttribute(i.attributes[r].name,i.attributes[r].value)}catch(n){}return e},_prepArticle:function(i){this._cleanStyles(i),this._markDataTables(i),this._fixLazyImages(i),this._cleanConditionally(i,"form"),this._cleanConditionally(i,"fieldset"),this._clean(i,"object"),this._clean(i,"embed"),this._clean(i,"footer"),this._clean(i,"link"),this._clean(i,"aside");var t=this.DEFAULT_CHAR_THRESHOLD;this._forEachNode(i.children,function(e){this._cleanMatchedNodes(e,function(r,n){return this.REGEXPS.shareElements.test(n)&&r.textContent.length<t})}),this._clean(i,"iframe"),this._clean(i,"input"),this._clean(i,"textarea"),this._clean(i,"select"),this._clean(i,"button"),this._cleanHeaders(i),this._cleanConditionally(i,"table"),this._cleanConditionally(i,"ul"),this._cleanConditionally(i,"div"),this._replaceNodeTags(this._getAllNodesWithTag(i,["h1"]),"h2"),this._removeNodes(this._getAllNodesWithTag(i,["p"]),function(e){var r=e.getElementsByTagName("img").length,n=e.getElementsByTagName("embed").length,s=e.getElementsByTagName("object").length,a=e.getElementsByTagName("iframe").length,c=r+n+s+a;return c===0&&!this._getInnerText(e,!1)}),this._forEachNode(this._getAllNodesWithTag(i,["br"]),function(e){var r=this._nextNode(e.nextSibling);r&&r.tagName=="P"&&e.parentNode.removeChild(e)}),this._forEachNode(this._getAllNodesWithTag(i,["table"]),function(e){var r=this._hasSingleTagInsideElement(e,"TBODY")?e.firstElementChild:e;if(this._hasSingleTagInsideElement(r,"TR")){var n=r.firstElementChild;if(this._hasSingleTagInsideElement(n,"TD")){var s=n.firstElementChild;s=this._setNodeTag(s,this._everyNode(s.childNodes,this._isPhrasingContent)?"P":"DIV"),e.parentNode.replaceChild(s,e)}}})},_initializeNode:function(i){switch(i.readability={contentScore:0},i.tagName){case"DIV":i.readability.contentScore+=5;break;case"PRE":case"TD":case"BLOCKQUOTE":i.readability.contentScore+=3;break;case"ADDRESS":case"OL":case"UL":case"DL":case"DD":case"DT":case"LI":case"FORM":i.readability.contentScore-=3;break;case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":case"TH":i.readability.contentScore-=5;break}i.readability.contentScore+=this._getClassWeight(i)},_removeAndGetNext:function(i){var t=this._getNextNode(i,!0);return i.parentNode.removeChild(i),t},_getNextNode:function(i,t){if(!t&&i.firstElementChild)return i.firstElementChild;if(i.nextElementSibling)return i.nextElementSibling;do i=i.parentNode;while(i&&!i.nextElementSibling);return i&&i.nextElementSibling},_textSimilarity:function(i,t){var e=i.toLowerCase().split(this.REGEXPS.tokenize).filter(Boolean),r=t.toLowerCase().split(this.REGEXPS.tokenize).filter(Boolean);if(!e.length||!r.length)return 0;var n=r.filter(a=>!e.includes(a)),s=n.join(" ").length/r.join(" ").length;return 1-s},_checkByline:function(i,t){if(this._articleByline)return!1;if(i.getAttribute!==void 0)var e=i.getAttribute("rel"),r=i.getAttribute("itemprop");return(e==="author"||r&&r.indexOf("author")!==-1||this.REGEXPS.byline.test(t))&&this._isValidByline(i.textContent)?(this._articleByline=i.textContent.trim(),!0):!1},_getNodeAncestors:function(i,t){t=t||0;for(var e=0,r=[];i.parentNode&&(r.push(i.parentNode),!(t&&++e===t));)i=i.parentNode;return r},_grabArticle:function(i){this.log("**** grabArticle ****");var t=this._doc,e=i!==null;if(i=i||this._doc.body,!i)return this.log("No body found in document. Abort."),null;for(var r=i.innerHTML;;){this.log("Starting grabArticle loop");var n=this._flagIsActive(this.FLAG_STRIP_UNLIKELYS),s=[],a=this._doc.documentElement;let Je=!0;for(;a;){a.tagName==="HTML"&&(this._articleLang=a.getAttribute("lang"));var c=a.className+" "+a.id;if(!this._isProbablyVisible(a)){this.log("Removing hidden node - "+c),a=this._removeAndGetNext(a);continue}if(a.getAttribute("aria-modal")=="true"&&a.getAttribute("role")=="dialog"){a=this._removeAndGetNext(a);continue}if(this._checkByline(a,c)){a=this._removeAndGetNext(a);continue}if(Je&&this._headerDuplicatesTitle(a)){this.log("Removing header: ",a.textContent.trim(),this._articleTitle.trim()),Je=!1,a=this._removeAndGetNext(a);continue}if(n){if(this.REGEXPS.unlikelyCandidates.test(c)&&!this.REGEXPS.okMaybeItsACandidate.test(c)&&!this._hasAncestorTag(a,"table")&&!this._hasAncestorTag(a,"code")&&a.tagName!=="BODY"&&a.tagName!=="A"){this.log("Removing unlikely candidate - "+c),a=this._removeAndGetNext(a);continue}if(this.UNLIKELY_ROLES.includes(a.getAttribute("role"))){this.log("Removing content with role "+a.getAttribute("role")+" - "+c),a=this._removeAndGetNext(a);continue}}if((a.tagName==="DIV"||a.tagName==="SECTION"||a.tagName==="HEADER"||a.tagName==="H1"||a.tagName==="H2"||a.tagName==="H3"||a.tagName==="H4"||a.tagName==="H5"||a.tagName==="H6")&&this._isElementWithoutContent(a)){a=this._removeAndGetNext(a);continue}if(this.DEFAULT_TAGS_TO_SCORE.indexOf(a.tagName)!==-1&&s.push(a),a.tagName==="DIV"){for(var f=null,d=a.firstChild;d;){var v=d.nextSibling;if(this._isPhrasingContent(d))f!==null?f.appendChild(d):this._isWhitespace(d)||(f=t.createElement("p"),a.replaceChild(f,d),f.appendChild(d));else if(f!==null){for(;f.lastChild&&this._isWhitespace(f.lastChild);)f.removeChild(f.lastChild);f=null}d=v}if(this._hasSingleTagInsideElement(a,"P")&&this._getLinkDensity(a)<.25){var w=a.children[0];a.parentNode.replaceChild(w,a),a=w,s.push(a)}else this._hasChildBlockElement(a)||(a=this._setNodeTag(a,"P"),s.push(a))}a=this._getNextNode(a)}var I=[];this._forEachNode(s,function(ie){if(!(!ie.parentNode||typeof ie.parentNode.tagName=="undefined")){var ue=this._getInnerText(ie);if(!(ue.length<25)){var ht=this._getNodeAncestors(ie,5);if(ht.length!==0){var ke=0;ke+=1,ke+=ue.split(this.REGEXPS.commas).length,ke+=Math.min(Math.floor(ue.length/100),3),this._forEachNode(ht,function(de,Ze){if(!(!de.tagName||!de.parentNode||typeof de.parentNode.tagName=="undefined")){if(typeof de.readability=="undefined"&&(this._initializeNode(de),I.push(de)),Ze===0)var Qe=1;else Ze===1?Qe=2:Qe=Ze*3;de.readability.contentScore+=ke/Qe}})}}}});for(var D=[],M=0,x=I.length;M<x;M+=1){var y=I[M],p=y.readability.contentScore*(1-this._getLinkDensity(y));y.readability.contentScore=p,this.log("Candidate:",y,"with score "+p);for(var g=0;g<this._nbTopCandidates;g++){var l=D[g];if(!l||p>l.readability.contentScore){D.splice(g,0,y),D.length>this._nbTopCandidates&&D.pop();break}}}var o=D[0]||null,m=!1,u;if(o===null||o.tagName==="BODY"){for(o=t.createElement("DIV"),m=!0;i.firstChild;)this.log("Moving child out:",i.firstChild),o.appendChild(i.firstChild);i.appendChild(o),this._initializeNode(o)}else if(o){for(var O=[],G=1;G<D.length;G++)D[G].readability.contentScore/o.readability.contentScore>=.75&&O.push(this._getNodeAncestors(D[G]));var J=3;if(O.length>=J)for(u=o.parentNode;u.tagName!=="BODY";){for(var fe=0,ee=0;ee<O.length&&fe<J;ee++)fe+=Number(O[ee].includes(u));if(fe>=J){o=u;break}u=u.parentNode}o.readability||this._initializeNode(o),u=o.parentNode;for(var Ye=o.readability.contentScore,Ft=Ye/3;u.tagName!=="BODY";){if(!u.readability){u=u.parentNode;continue}var H=u.readability.contentScore;if(H<Ft)break;if(H>Ye){o=u;break}Ye=u.readability.contentScore,u=u.parentNode}for(u=o.parentNode;u.tagName!="BODY"&&u.children.length==1;)o=u,u=o.parentNode;o.readability||this._initializeNode(o)}var V=t.createElement("DIV");e&&(V.id="readability-content");var te=Math.max(10,o.readability.contentScore*.2);u=o.parentNode;for(var Xe=u.children,L=0,ce=Xe.length;L<ce;L++){var F=Xe[L],Te=!1;if(this.log("Looking at sibling node:",F,F.readability?"with score "+F.readability.contentScore:""),this.log("Sibling has score",F.readability?F.readability.contentScore:"Unknown"),F===o)Te=!0;else{var Ce=0;if(F.className===o.className&&o.className!==""&&(Ce+=o.readability.contentScore*.2),F.readability&&F.readability.contentScore+Ce>=te)Te=!0;else if(F.nodeName==="P"){var Ie=this._getLinkDensity(F),ut=this._getInnerText(F),Ee=ut.length;(Ee>80&&Ie<.25||Ee<80&&Ee>0&&Ie===0&&ut.search(/\.( |$)/)!==-1)&&(Te=!0)}}Te&&(this.log("Appending node:",F),this.ALTER_TO_DIV_EXCEPTIONS.indexOf(F.nodeName)===-1&&(this.log("Altering sibling:",F,"to div."),F=this._setNodeTag(F,"DIV")),V.appendChild(F),Xe=u.children,L-=1,ce-=1)}if(this._debug&&this.log("Article content pre-prep: "+V.innerHTML),this._prepArticle(V),this._debug&&this.log("Article content post-prep: "+V.innerHTML),m)o.id="readability-page-1",o.className="page";else{var Me=t.createElement("DIV");for(Me.id="readability-page-1",Me.className="page";V.firstChild;)Me.appendChild(V.firstChild);V.appendChild(Me)}this._debug&&this.log("Article content after paging: "+V.innerHTML);var Oe=!0,Ne=this._getInnerText(V,!0).length;if(Ne<this._charThreshold)if(Oe=!1,i.innerHTML=r,this._flagIsActive(this.FLAG_STRIP_UNLIKELYS))this._removeFlag(this.FLAG_STRIP_UNLIKELYS),this._attempts.push({articleContent:V,textLength:Ne});else if(this._flagIsActive(this.FLAG_WEIGHT_CLASSES))this._removeFlag(this.FLAG_WEIGHT_CLASSES),this._attempts.push({articleContent:V,textLength:Ne});else if(this._flagIsActive(this.FLAG_CLEAN_CONDITIONALLY))this._removeFlag(this.FLAG_CLEAN_CONDITIONALLY),this._attempts.push({articleContent:V,textLength:Ne});else{if(this._attempts.push({articleContent:V,textLength:Ne}),this._attempts.sort(function(ie,ue){return ue.textLength-ie.textLength}),!this._attempts[0].textLength)return null;V=this._attempts[0].articleContent,Oe=!0}if(Oe){var Ke=[u,o].concat(this._getNodeAncestors(u));return this._someNode(Ke,function(ie){if(!ie.tagName)return!1;var ue=ie.getAttribute("dir");return ue?(this._articleDir=ue,!0):!1}),V}}},_isValidByline:function(i){return typeof i=="string"||i instanceof String?(i=i.trim(),i.length>0&&i.length<100):!1},_unescapeHtmlEntities:function(i){if(!i)return i;var t=this.HTML_ESCAPE_MAP;return i.replace(/&(quot|amp|apos|lt|gt);/g,function(e,r){return t[r]}).replace(/&#(?:x([0-9a-z]{1,4})|([0-9]{1,4}));/gi,function(e,r,n){var s=parseInt(r||n,r?16:10);return String.fromCharCode(s)})},_getJSONLD:function(i){var t=this._getAllNodesWithTag(i,["script"]),e;return this._forEachNode(t,function(r){if(!e&&r.getAttribute("type")==="application/ld+json")try{var n=r.textContent.replace(/^\s*<!\[CDATA\[|\]\]>\s*$/g,""),s=JSON.parse(n);if(!s["@context"]||!s["@context"].match(/^https?\:\/\/schema\.org$/)||(!s["@type"]&&Array.isArray(s["@graph"])&&(s=s["@graph"].find(function(d){return(d["@type"]||"").match(this.REGEXPS.jsonLdArticleTypes)})),!s||!s["@type"]||!s["@type"].match(this.REGEXPS.jsonLdArticleTypes)))return;if(e={},typeof s.name=="string"&&typeof s.headline=="string"&&s.name!==s.headline){var a=this._getArticleTitle(),c=this._textSimilarity(s.name,a)>.75,f=this._textSimilarity(s.headline,a)>.75;f&&!c?e.title=s.headline:e.title=s.name}else typeof s.name=="string"?e.title=s.name.trim():typeof s.headline=="string"&&(e.title=s.headline.trim());s.author&&(typeof s.author.name=="string"?e.byline=s.author.name.trim():Array.isArray(s.author)&&s.author[0]&&typeof s.author[0].name=="string"&&(e.byline=s.author.filter(function(d){return d&&typeof d.name=="string"}).map(function(d){return d.name.trim()}).join(", "))),typeof s.description=="string"&&(e.excerpt=s.description.trim()),s.publisher&&typeof s.publisher.name=="string"&&(e.siteName=s.publisher.name.trim()),typeof s.datePublished=="string"&&(e.datePublished=s.datePublished.trim());return}catch(d){this.log(d.message)}}),e||{}},_getArticleMetadata:function(i){var t={},e={},r=this._doc.getElementsByTagName("meta"),n=/\s*(article|dc|dcterm|og|twitter)\s*:\s*(author|creator|description|published_time|title|site_name)\s*/gi,s=/^\s*(?:(dc|dcterm|og|twitter|weibo:(article|webpage))\s*[\.:]\s*)?(author|creator|description|title|site_name)\s*$/i;return this._forEachNode(r,function(a){var c=a.getAttribute("name"),f=a.getAttribute("property"),d=a.getAttribute("content");if(d){var v=null,w=null;f&&(v=f.match(n),v&&(w=v[0].toLowerCase().replace(/\s/g,""),e[w]=d.trim())),!v&&c&&s.test(c)&&(w=c,d&&(w=w.toLowerCase().replace(/\s/g,"").replace(/\./g,":"),e[w]=d.trim()))}}),t.title=i.title||e["dc:title"]||e["dcterm:title"]||e["og:title"]||e["weibo:article:title"]||e["weibo:webpage:title"]||e.title||e["twitter:title"],t.title||(t.title=this._getArticleTitle()),t.byline=i.byline||e["dc:creator"]||e["dcterm:creator"]||e.author,t.excerpt=i.excerpt||e["dc:description"]||e["dcterm:description"]||e["og:description"]||e["weibo:article:description"]||e["weibo:webpage:description"]||e.description||e["twitter:description"],t.siteName=i.siteName||e["og:site_name"],t.publishedTime=i.datePublished||e["article:published_time"]||null,t.title=this._unescapeHtmlEntities(t.title),t.byline=this._unescapeHtmlEntities(t.byline),t.excerpt=this._unescapeHtmlEntities(t.excerpt),t.siteName=this._unescapeHtmlEntities(t.siteName),t.publishedTime=this._unescapeHtmlEntities(t.publishedTime),t},_isSingleImage:function(i){return i.tagName==="IMG"?!0:i.children.length!==1||i.textContent.trim()!==""?!1:this._isSingleImage(i.children[0])},_unwrapNoscriptImages:function(i){var t=Array.from(i.getElementsByTagName("img"));this._forEachNode(t,function(r){for(var n=0;n<r.attributes.length;n++){var s=r.attributes[n];switch(s.name){case"src":case"srcset":case"data-src":case"data-srcset":return}if(/\.(jpg|jpeg|png|webp)/i.test(s.value))return}r.parentNode.removeChild(r)});var e=Array.from(i.getElementsByTagName("noscript"));this._forEachNode(e,function(r){var n=i.createElement("div");if(n.innerHTML=r.innerHTML,!!this._isSingleImage(n)){var s=r.previousElementSibling;if(s&&this._isSingleImage(s)){var a=s;a.tagName!=="IMG"&&(a=s.getElementsByTagName("img")[0]);for(var c=n.getElementsByTagName("img")[0],f=0;f<a.attributes.length;f++){var d=a.attributes[f];if(d.value!==""&&(d.name==="src"||d.name==="srcset"||/\.(jpg|jpeg|png|webp)/i.test(d.value))){if(c.getAttribute(d.name)===d.value)continue;var v=d.name;c.hasAttribute(v)&&(v="data-old-"+v),c.setAttribute(v,d.value)}}r.parentNode.replaceChild(n.firstElementChild,s)}}})},_removeScripts:function(i){this._removeNodes(this._getAllNodesWithTag(i,["script","noscript"]))},_hasSingleTagInsideElement:function(i,t){return i.children.length!=1||i.children[0].tagName!==t?!1:!this._someNode(i.childNodes,function(e){return e.nodeType===this.TEXT_NODE&&this.REGEXPS.hasContent.test(e.textContent)})},_isElementWithoutContent:function(i){return i.nodeType===this.ELEMENT_NODE&&i.textContent.trim().length==0&&(i.children.length==0||i.children.length==i.getElementsByTagName("br").length+i.getElementsByTagName("hr").length)},_hasChildBlockElement:function(i){return this._someNode(i.childNodes,function(t){return this.DIV_TO_P_ELEMS.has(t.tagName)||this._hasChildBlockElement(t)})},_isPhrasingContent:function(i){return i.nodeType===this.TEXT_NODE||this.PHRASING_ELEMS.indexOf(i.tagName)!==-1||(i.tagName==="A"||i.tagName==="DEL"||i.tagName==="INS")&&this._everyNode(i.childNodes,this._isPhrasingContent)},_isWhitespace:function(i){return i.nodeType===this.TEXT_NODE&&i.textContent.trim().length===0||i.nodeType===this.ELEMENT_NODE&&i.tagName==="BR"},_getInnerText:function(i,t){t=typeof t=="undefined"?!0:t;var e=i.textContent.trim();return t?e.replace(this.REGEXPS.normalize," "):e},_getCharCount:function(i,t){return t=t||",",this._getInnerText(i).split(t).length-1},_cleanStyles:function(i){if(!(!i||i.tagName.toLowerCase()==="svg")){for(var t=0;t<this.PRESENTATIONAL_ATTRIBUTES.length;t++)i.removeAttribute(this.PRESENTATIONAL_ATTRIBUTES[t]);this.DEPRECATED_SIZE_ATTRIBUTE_ELEMS.indexOf(i.tagName)!==-1&&(i.removeAttribute("width"),i.removeAttribute("height"));for(var e=i.firstElementChild;e!==null;)this._cleanStyles(e),e=e.nextElementSibling}},_getLinkDensity:function(i){var t=this._getInnerText(i).length;if(t===0)return 0;var e=0;return this._forEachNode(i.getElementsByTagName("a"),function(r){var n=r.getAttribute("href"),s=n&&this.REGEXPS.hashUrl.test(n)?.3:1;e+=this._getInnerText(r).length*s}),e/t},_getClassWeight:function(i){if(!this._flagIsActive(this.FLAG_WEIGHT_CLASSES))return 0;var t=0;return typeof i.className=="string"&&i.className!==""&&(this.REGEXPS.negative.test(i.className)&&(t-=25),this.REGEXPS.positive.test(i.className)&&(t+=25)),typeof i.id=="string"&&i.id!==""&&(this.REGEXPS.negative.test(i.id)&&(t-=25),this.REGEXPS.positive.test(i.id)&&(t+=25)),t},_clean:function(i,t){var e=["object","embed","iframe"].indexOf(t)!==-1;this._removeNodes(this._getAllNodesWithTag(i,[t]),function(r){if(e){for(var n=0;n<r.attributes.length;n++)if(this._allowedVideoRegex.test(r.attributes[n].value))return!1;if(r.tagName==="object"&&this._allowedVideoRegex.test(r.innerHTML))return!1}return!0})},_hasAncestorTag:function(i,t,e,r){e=e||3,t=t.toUpperCase();for(var n=0;i.parentNode;){if(e>0&&n>e)return!1;if(i.parentNode.tagName===t&&(!r||r(i.parentNode)))return!0;i=i.parentNode,n++}return!1},_getRowAndColumnCount:function(i){for(var t=0,e=0,r=i.getElementsByTagName("tr"),n=0;n<r.length;n++){var s=r[n].getAttribute("rowspan")||0;s&&(s=parseInt(s,10)),t+=s||1;for(var a=0,c=r[n].getElementsByTagName("td"),f=0;f<c.length;f++){var d=c[f].getAttribute("colspan")||0;d&&(d=parseInt(d,10)),a+=d||1}e=Math.max(e,a)}return{rows:t,columns:e}},_markDataTables:function(i){for(var t=i.getElementsByTagName("table"),e=0;e<t.length;e++){var r=t[e],n=r.getAttribute("role");if(n=="presentation"){r._readabilityDataTable=!1;continue}var s=r.getAttribute("datatable");if(s=="0"){r._readabilityDataTable=!1;continue}var a=r.getAttribute("summary");if(a){r._readabilityDataTable=!0;continue}var c=r.getElementsByTagName("caption")[0];if(c&&c.childNodes.length>0){r._readabilityDataTable=!0;continue}var f=["col","colgroup","tfoot","thead","th"],d=function(w){return!!r.getElementsByTagName(w)[0]};if(f.some(d)){this.log("Data table because found data-y descendant"),r._readabilityDataTable=!0;continue}if(r.getElementsByTagName("table")[0]){r._readabilityDataTable=!1;continue}var v=this._getRowAndColumnCount(r);if(v.rows>=10||v.columns>4){r._readabilityDataTable=!0;continue}r._readabilityDataTable=v.rows*v.columns>10}},_fixLazyImages:function(i){this._forEachNode(this._getAllNodesWithTag(i,["img","picture","figure"]),function(t){if(t.src&&this.REGEXPS.b64DataUrl.test(t.src)){var e=this.REGEXPS.b64DataUrl.exec(t.src);if(e[1]==="image/svg+xml")return;for(var r=!1,n=0;n<t.attributes.length;n++){var s=t.attributes[n];if(s.name!=="src"&&/\.(jpg|jpeg|png|webp)/i.test(s.value)){r=!0;break}}if(r){var a=t.src.search(/base64\s*/i)+7,c=t.src.length-a;c<133&&t.removeAttribute("src")}}if(!((t.src||t.srcset&&t.srcset!="null")&&t.className.toLowerCase().indexOf("lazy")===-1)){for(var f=0;f<t.attributes.length;f++)if(s=t.attributes[f],!(s.name==="src"||s.name==="srcset"||s.name==="alt")){var d=null;if(/\.(jpg|jpeg|png|webp)\s+\d/.test(s.value)?d="srcset":/^\s*\S+\.(jpg|jpeg|png|webp)\S*\s*$/.test(s.value)&&(d="src"),d){if(t.tagName==="IMG"||t.tagName==="PICTURE")t.setAttribute(d,s.value);else if(t.tagName==="FIGURE"&&!this._getAllNodesWithTag(t,["img","picture"]).length){var v=this._doc.createElement("img");v.setAttribute(d,s.value),t.appendChild(v)}}}}})},_getTextDensity:function(i,t){var e=this._getInnerText(i,!0).length;if(e===0)return 0;var r=0,n=this._getAllNodesWithTag(i,t);return this._forEachNode(n,s=>r+=this._getInnerText(s,!0).length),r/e},_cleanConditionally:function(i,t){this._flagIsActive(this.FLAG_CLEAN_CONDITIONALLY)&&this._removeNodes(this._getAllNodesWithTag(i,[t]),function(e){var r=function(u){return u._readabilityDataTable},n=t==="ul"||t==="ol";if(!n){var s=0,a=this._getAllNodesWithTag(e,["ul","ol"]);this._forEachNode(a,u=>s+=this._getInnerText(u).length),n=s/this._getInnerText(e).length>.9}if(t==="table"&&r(e)||this._hasAncestorTag(e,"table",-1,r)||this._hasAncestorTag(e,"code"))return!1;var c=this._getClassWeight(e);this.log("Cleaning Conditionally",e);var f=0;if(c+f<0)return!0;if(this._getCharCount(e,",")<10){for(var d=e.getElementsByTagName("p").length,v=e.getElementsByTagName("img").length,w=e.getElementsByTagName("li").length-100,I=e.getElementsByTagName("input").length,D=this._getTextDensity(e,["h1","h2","h3","h4","h5","h6"]),M=0,x=this._getAllNodesWithTag(e,["object","embed","iframe"]),y=0;y<x.length;y++){for(var p=0;p<x[y].attributes.length;p++)if(this._allowedVideoRegex.test(x[y].attributes[p].value))return!1;if(x[y].tagName==="object"&&this._allowedVideoRegex.test(x[y].innerHTML))return!1;M++}var g=this._getLinkDensity(e),l=this._getInnerText(e).length,o=v>1&&d/v<.5&&!this._hasAncestorTag(e,"figure")||!n&&w>d||I>Math.floor(d/3)||!n&&D<.9&&l<25&&(v===0||v>2)&&!this._hasAncestorTag(e,"figure")||!n&&c<25&&g>.2||c>=25&&g>.5||M===1&&l<75||M>1;if(n&&o){for(var m=0;m<e.children.length;m++)if(e.children[m].children.length>1)return o;let u=e.getElementsByTagName("li").length;if(v==u)return!1}return o}return!1})},_cleanMatchedNodes:function(i,t){for(var e=this._getNextNode(i,!0),r=this._getNextNode(i);r&&r!=e;)t.call(this,r,r.className+" "+r.id)?r=this._removeAndGetNext(r):r=this._getNextNode(r)},_cleanHeaders:function(i){let t=this._getAllNodesWithTag(i,["h1","h2"]);this._removeNodes(t,function(e){let r=this._getClassWeight(e)<0;return r&&this.log("Removing header with low class weight:",e),r})},_headerDuplicatesTitle:function(i){if(i.tagName!="H1"&&i.tagName!="H2")return!1;var t=this._getInnerText(i,!1);return this.log("Evaluating similarity of header:",t,this._articleTitle),this._textSimilarity(this._articleTitle,t)>.75},_flagIsActive:function(i){return(this._flags&i)>0},_removeFlag:function(i){this._flags=this._flags&~i},_isProbablyVisible:function(i){return(!i.style||i.style.display!="none")&&(!i.style||i.style.visibility!="hidden")&&!i.hasAttribute("hidden")&&(!i.hasAttribute("aria-hidden")||i.getAttribute("aria-hidden")!="true"||i.className&&i.className.indexOf&&i.className.indexOf("fallback-image")!==-1)},parse:function(){if(this._maxElemsToParse>0){var i=this._doc.getElementsByTagName("*").length;if(i>this._maxElemsToParse)throw new Error("Aborting parsing document; "+i+" elements found")}this._unwrapNoscriptImages(this._doc);var t=this._disableJSONLD?{}:this._getJSONLD(this._doc);this._removeScripts(this._doc),this._prepDocument();var e=this._getArticleMetadata(t);this._articleTitle=e.title;var r=this._grabArticle();if(!r)return null;if(this.log("Grabbed: "+r.innerHTML),this._postProcessContent(r),!e.excerpt){var n=r.getElementsByTagName("p");n.length>0&&(e.excerpt=n[0].textContent.trim())}var s=r.textContent;return{title:this._articleTitle,byline:e.byline||this._articleByline,dir:this._articleDir,lang:this._articleLang,content:this._serializer(r),textContent:s,length:s.length,excerpt:e.excerpt,siteName:e.siteName||this._articleSiteName,publishedTime:e.publishedTime}}};typeof Si=="object"&&(Si.exports=Vr)});var Gr=De((to,Di)=>{var $r={unlikelyCandidates:/-ad-|ai2html|banner|breadcrumbs|combx|comment|community|cover-wrap|disqus|extra|footer|gdpr|header|legends|menu|related|remark|replies|rss|shoutbox|sidebar|skyscraper|social|sponsor|supplemental|ad-break|agegate|pagination|pager|popup|yom-remote/i,okMaybeItsACandidate:/and|article|body|column|content|main|shadow/i};function Ra(i){return(!i.style||i.style.display!="none")&&!i.hasAttribute("hidden")&&(!i.hasAttribute("aria-hidden")||i.getAttribute("aria-hidden")!="true"||i.className&&i.className.indexOf&&i.className.indexOf("fallback-image")!==-1)}function xa(i,t={}){typeof t=="function"&&(t={visibilityChecker:t});var e={minScore:20,minContentLength:140,visibilityChecker:Ra};t=Object.assign(e,t);var r=i.querySelectorAll("p, pre, article"),n=i.querySelectorAll("div > br");if(n.length){var s=new Set(r);[].forEach.call(n,function(c){s.add(c.parentNode)}),r=Array.from(s)}var a=0;return[].some.call(r,function(c){if(!t.visibilityChecker(c))return!1;var f=c.className+" "+c.id;if($r.unlikelyCandidates.test(f)&&!$r.okMaybeItsACandidate.test(f)||c.matches("li p"))return!1;var d=c.textContent.trim().length;return d<t.minContentLength?!1:(a+=Math.sqrt(d-t.minContentLength),a>t.minScore)})}typeof Di=="object"&&(Di.exports=xa)});var jr=De((io,zr)=>{var La=Wr(),Pa=Gr();zr.exports={Readability:La,isProbablyReaderable:Pa}});var Ia={};Mn(Ia,{default:()=>kt});module.exports=On(Ia);var pe=require("obsidian");var ar=require("obsidian");async function ni(i){return{fileContent:await(await(0,ar.requestUrl)({url:i.href,method:"get"})).arrayBuffer,fileExtension:i.pathname.slice(i.pathname.lastIndexOf(".")+1)}}var Nt=require("obsidian");async function at(i,t){t=(0,Nt.normalizePath)(t);let e=i.getAbstractFileByPath(t);e&&e instanceof Nt.TFolder||await i.createFolder(t)}var hr=require("path");var Et="http:",At="https:";var sr=$e(require("path")),or=require("obsidian");function ge(i,t=[]){let e;try{e=new URL(i)}catch(r){return!1}return t.length===0?!0:t.includes(e.protocol)}function ai(i,t){return new URL(i,t).href}function le(i){return i.replace(/[:#/\\|?*<>"]/g,"")}function wt(i,t){let e=sr.default.join(i,t);return(0,or.normalizePath)(e.replace(/\\/g,"/"))}var si=$e(ur());var oi=class{constructor(){C(this,"linksInfo",{})}ensureHashGenerated(t,e){this.linksInfo[t.href]||(this.linksInfo[t.href]=si.ArrayBuffer.hash(e))}isSame(t,e){let r=si.ArrayBuffer.hash(e);return this.linksInfo[t.href]==r}},_t=new oi;var kn=/!\[(?<anchor>.*?)\]\((?<link>.+?)\)/g;async function Re(i,t,e){return await Fn(t,kn,Bn(i,e))}function Fn(i,t,e){try{if(typeof e=="function"){let r=[];return String.prototype.replace.call(i,t,function(n,s,a){return r.push(e(n,s,a)),""}),Promise.all(r).then(function(n){return String.prototype.replace.call(i,t,function(){return n.shift()})})}else return Promise.resolve(String.prototype.replace.call(i,t,e))}catch(r){return console.error(),Promise.reject(r)}}var Un=5;function Bn(i,t){return async function(r,n,s){if(!ge(s,[Et,At]))return r;let a=new URL(s);await at(i.vault,t);try{let{fileContent:c,fileExtension:f}=await ni(a),d=0;for(;d<Un;)try{let{fileName:v,needWrite:w}=await Wn(i.vault.adapter,t,n,a,c,f);if(w&&v&&await i.vault.createBinary(v,c),v){let I=v.replace(/\s/g,"%20");return`![${n}](${I})`}else return r}catch(v){if(v.message==="File already exists.")d++;else throw v}return r}catch(c){return console.warn("Image processing failed: ",c),r}}}var Hn="media",Vn=1e3;async function Wn(i,t,e,r,n,s){if(!s)return{fileName:"",needWrite:!1};e||(e=(0,hr.basename)(r.pathname)),e||(e=Hn),e.endsWith(`.${s}`)&&(e=e.slice(0,-1*(s.length+1))),e=le(e);let a="",c=!0,f=0;for(;!a&&f<Vn;){let d=f?wt(t,`${e}-${f}.${s}`):wt(t,`${e}.${s}`);if(await i.exists(d,!1)){_t.ensureHashGenerated(r,n);let v=await i.readBinary(d);_t.isSame(r,v)&&(a=d,c=!1)}else a=d;f++}if(!a)throw new Error("Failed to generate file name for media file.");return _t.ensureHashGenerated(r,n),{fileName:a,needWrite:c}}var mr=require("obsidian");function St(i){throw new mr.Notice("Error occured. Please check console output for detailed information."),i}var gr=require("obsidian");function Dt(i){return Rt(new Date,i)}function Rt(i,t){return(0,gr.moment)(i).format(t)}function pr(){return[{label:"New Line",option:"newLine"},{label:"Comma",option:"comma"},{label:"Period",option:"period"},{label:"Semicolon",option:"semicolon"}]}function fr(i){switch(i){case"newLine":return`
`;case"comma":return",";case"period":return".";case"semicolon":return";"}}var A={inboxDir:"ReadItLater Inbox",assetsDir:"ReadItLater Inbox/assets",openNewNote:!1,batchProcess:!1,batchProcessDelimiter:"newLine",openNewNoteInNewTab:!1,youtubeNoteTitle:"Youtube - {{ title }}",youtubeNote:`[[ReadItLater]] [[Youtube]]

# [{{ videoTitle }}]({{ videoURL }})

{{ videoPlayer }}`,youtubeEmbedWidth:"560",youtubeEmbedHeight:"315",youtubeUsePrivacyEnhancedEmbed:!0,vimeoNoteTitle:"Vimeo - {{ title }}",vimeoNote:`[[ReadItLater]] [[Vimeo]]

# [{{ videoTitle }}]({{ videoURL }})

{{ videoPlayer }}`,vimeoEmbedWidth:"560",vimeoEmbedHeight:"315",bilibiliNoteTitle:"Bilibili - {{ title }}",bilibiliNote:`[[ReadItLater]] [[Bilibili]]

# [{{ videoTitle }}]({{ videoURL }})

{{ videoPlayer }}`,bilibiliEmbedWidth:"560",bilibiliEmbedHeight:"315",twitterNoteTitle:"Tweet from {{ tweetAuthorName }} ({{ date }})",twitterNote:`[[ReadItLater]] [[Tweet]]

# [{{ tweetAuthorName }}]({{ tweetURL }})

{{ tweetContent }}`,parseableArticleNoteTitle:"{{ title }}",parsableArticleNote:`[[ReadItLater]] [[Article]]

# [{{ articleTitle }}]({{ articleURL }})

{{ articleContent }}`,notParseableArticleNoteTitle:"Article {{ date }}",notParsableArticleNote:`[[ReadItLater]] [[Article]]

[{{ articleURL }}]({{ articleURL }})`,textSnippetNoteTitle:"Note {{ date }}",textSnippetNote:`[[ReadItLater]] [[Textsnippet]]

{{ content }}`,mastodonNoteTitle:"Toot from {{ tootAuthorName }} ({{ date }})",mastodonNote:`[[ReadItLater]] [[Toot]]

# [{{ tootAuthorName }}]({{ tootURL }})

> {{ tootContent }}`,downloadImages:!0,downloadImagesInArticleDir:!1,dateTitleFmt:"YYYY-MM-DD HH-mm-ss",dateContentFmt:"YYYY-MM-DD",downloadMastodonMediaAttachments:!0,downloadMastodonMediaAttachmentsInDir:!1,saveMastodonReplies:!1,mastodonReply:`[{{ tootAuthorName }}]({{ tootURL }})

> {{ tootContent }}`,stackExchangeNoteTitle:"{{ title }}",stackExchangeNote:`[[ReadItLater]] [[StackExchange]]

# [{{ questionTitle }}]({{ questionURL }})

Author: [{{ authorName }}]({{ authorProfileURL }})

{{ questionContent }}

***

{{ topAnswer }}

{{ answers }}`,stackExchangeAnswer:`Answered by: [{{ authorName }}]({{ authorProfileURL }})

{{ answerContent }}`,downloadStackExchangeAssets:!0,downloadStackExchangeAssetsInDir:!1,youtubeApiKey:"",tikTokNoteTitle:"TikTok from {{ authorName }} ({{ date }})",tikTokNote:`[[ReadItLater]] [[TikTok]]

{{ videoDescription }}

[{{ videoURL }}]({{ videoURL }})

{{ videoPlayer }}`,tikTokEmbedWidth:"325",tikTokEmbedHeight:"760",extendShareMenu:!0};var S=require("obsidian");var xt=class extends S.PluginSettingTab{constructor(e,r){super(e,r);C(this,"plugin");this.plugin=r}display(){let{containerEl:e}=this;e.empty(),e.createEl("h2",{text:"General"}),new S.Setting(e).setName("Inbox dir").setDesc("Enter valid folder name. For nested folders use this format: Folder A/Folder B. If no folder is entered, new note will be created in vault root.").addText(a=>a.setPlaceholder("Defaults to root").setValue(this.plugin.settings.inboxDir||A.inboxDir).onChange(async c=>{this.plugin.settings.inboxDir=c,await this.plugin.saveSettings()})),new S.Setting(e).setName("Assets dir").setDesc("Enter valid folder name. For nested folders use this format: Folder A/Folder B. If no folder is entered, new note will be created in vault root.").addText(a=>a.setPlaceholder("Defaults to root").setValue(this.plugin.settings.assetsDir||A.inboxDir+"/assets").onChange(async c=>{this.plugin.settings.assetsDir=c,await this.plugin.saveSettings()})),new S.Setting(e).setName("Open new note in current workspace").setDesc("If enabled, new note will open in current workspace").addToggle(a=>a.setValue(this.plugin.settings.openNewNote||A.openNewNote).onChange(async c=>{this.plugin.settings.openNewNote=c,c===!0&&(this.plugin.settings.openNewNoteInNewTab=!1),await this.plugin.saveSettings(),this.display()})),new S.Setting(e).setName("Open new note in new tab").setDesc("If enabled, new note will open in new tab").addToggle(a=>a.setValue(this.plugin.settings.openNewNoteInNewTab||A.openNewNoteInNewTab).onChange(async c=>{this.plugin.settings.openNewNoteInNewTab=c,c===!0&&(this.plugin.settings.openNewNote=!1),await this.plugin.saveSettings(),this.display()})),new S.Setting(e).setName("Batch process URLs").setDesc("If enabled, a list of URLs will processed in sequence. Delimiter can be set in setting bellow.").addToggle(a=>{var c;return a.setValue((c=this.plugin.settings.batchProcess)!=null?c:A.batchProcess).onChange(async f=>{this.plugin.settings.batchProcess=f,await this.plugin.saveSettings()})}),new S.Setting(e).setName("Batch note creation delimiter").setDesc("Delimiter for batch list of notes").addDropdown(a=>{pr().forEach(c=>a.addOption(c.option,c.label)),a.setValue(this.plugin.settings.batchProcessDelimiter||A.batchProcessDelimiter),a.onChange(async c=>{this.plugin.settings.batchProcessDelimiter=c,await this.plugin.saveSettings()})}),new S.Setting(e).setName("Date format string").setDesc("Format of the %date% variable. NOTE: do not use symbols forbidden in file names.").addText(a=>a.setPlaceholder("Defaults to YYYY-MM-DD HH-mm-ss").setValue(this.plugin.settings.dateTitleFmt||A.dateTitleFmt).onChange(async c=>{this.plugin.settings.dateTitleFmt=c,await this.plugin.saveSettings()})),new S.Setting(e).setName("Date format string in content").setDesc("Format of the %date% variable for content").addText(a=>a.setPlaceholder("Defaults to YYYY-MM-DD").setValue(this.plugin.settings.dateContentFmt||A.dateContentFmt).onChange(async c=>{this.plugin.settings.dateContentFmt=c,await this.plugin.saveSettings()})),new S.Setting(e).setName("Extend share menu").setDesc("If enabled, share menu will be extended with shortcut to create note directly from it. Requires plugin reload or Obsidian restart to apply change.").addToggle(a=>a.setValue(Object.prototype.hasOwnProperty.call(this.plugin.settings,"extendShareMenu")?this.plugin.settings.extendShareMenu:A.extendShareMenu).onChange(async c=>{this.plugin.settings.extendShareMenu=c,await this.plugin.saveSettings()})),e.createEl("h2",{text:"YouTube"}),new S.Setting(e).setName("Youtube note template title").addText(a=>a.setPlaceholder("Defaults to %title%").setValue(this.plugin.settings.youtubeNoteTitle||A.youtubeNoteTitle).onChange(async c=>{this.plugin.settings.youtubeNoteTitle=c,await this.plugin.saveSettings()})),new S.Setting(e).setName("Youtube note template").addTextArea(a=>{a.setValue(this.plugin.settings.youtubeNote||A.youtubeNote).onChange(async c=>{this.plugin.settings.youtubeNote=c,await this.plugin.saveSettings()}),a.inputEl.rows=10,a.inputEl.cols=25}),new S.Setting(e).setName("Youtube Data API v3 key").setDesc("If entered, additional template variables are available").addText(a=>a.setPlaceholder("").setValue(this.plugin.settings.youtubeApiKey||A.youtubeApiKey).onChange(async c=>{this.plugin.settings.youtubeApiKey=c,await this.plugin.saveSettings()})),new S.Setting(e).setName("Youtube embed player width").addText(a=>a.setPlaceholder(A.youtubeEmbedWidth).setValue(this.plugin.settings.youtubeEmbedWidth||A.youtubeEmbedWidth).onChange(async c=>{this.plugin.settings.youtubeEmbedWidth=c,await this.plugin.saveSettings()})),new S.Setting(e).setName("Youtube embed player height").addText(a=>a.setPlaceholder(A.youtubeEmbedHeight).setValue(this.plugin.settings.youtubeEmbedHeight||A.youtubeEmbedHeight).onChange(async c=>{this.plugin.settings.youtubeEmbedHeight=c,await this.plugin.saveSettings()})),new S.Setting(e).setName("Embed in privacy enhanced mode").setDesc("If enabled, content will be embeded in privacy enhanced mode, which prevents the use of views of it from influencing the viewer\u2019s browsing experience on YouTube.").addToggle(a=>a.setValue(Object.prototype.hasOwnProperty.call(this.plugin.settings,"youtubeUsePrivacyEnhancedEmbed")?this.plugin.settings.youtubeUsePrivacyEnhancedEmbed:A.youtubeUsePrivacyEnhancedEmbed).onChange(async c=>{this.plugin.settings.youtubeUsePrivacyEnhancedEmbed=c,await this.plugin.saveSettings()})),e.createEl("h2",{text:"Vimeo"}),new S.Setting(e).setName("Vimeo note title template").addText(a=>a.setPlaceholder("Defaults to %title%").setValue(this.plugin.settings.vimeoNoteTitle||A.vimeoNoteTitle).onChange(async c=>{this.plugin.settings.vimeoNoteTitle=c,await this.plugin.saveSettings()})),new S.Setting(e).setName("Vimeo note template").addTextArea(a=>{a.setValue(this.plugin.settings.vimeoNote||A.vimeoNote).onChange(async c=>{this.plugin.settings.vimeoNote=c,await this.plugin.saveSettings()}),a.inputEl.rows=10,a.inputEl.cols=25}),new S.Setting(e).setName("Vimeo embed player width").addText(a=>a.setPlaceholder(A.vimeoEmbedWidth).setValue(this.plugin.settings.vimeoEmbedWidth||A.vimeoEmbedWidth).onChange(async c=>{this.plugin.settings.vimeoEmbedWidth=c,await this.plugin.saveSettings()})),new S.Setting(e).setName("Vimeo embed player height").addText(a=>a.setPlaceholder(A.vimeoEmbedHeight).setValue(this.plugin.settings.vimeoEmbedHeight||A.vimeoEmbedHeight).onChange(async c=>{this.plugin.settings.vimeoEmbedHeight=c,await this.plugin.saveSettings()})),e.createEl("h2",{text:"Bilibili"}),new S.Setting(e).setName("Bilibili note template title").setDesc("Available variables: %title%").addText(a=>a.setPlaceholder("Defaults to %title%").setValue(this.plugin.settings.bilibiliNoteTitle||A.bilibiliNoteTitle).onChange(async c=>{this.plugin.settings.bilibiliNoteTitle=c,await this.plugin.saveSettings()})),new S.Setting(e).setName("Bilibili note template").addTextArea(a=>{a.setValue(this.plugin.settings.bilibiliNote||A.bilibiliNote).onChange(async c=>{this.plugin.settings.bilibiliNote=c,await this.plugin.saveSettings()}),a.inputEl.rows=10,a.inputEl.cols=25}),new S.Setting(e).setName("Bilibili embed player width").addText(a=>a.setPlaceholder(A.bilibiliEmbedWidth).setValue(this.plugin.settings.bilibiliEmbedWidth||A.bilibiliEmbedWidth).onChange(async c=>{this.plugin.settings.bilibiliEmbedWidth=c,await this.plugin.saveSettings()})),new S.Setting(e).setName("Bilibili embed player height").addText(a=>a.setPlaceholder(A.bilibiliEmbedHeight).setValue(this.plugin.settings.bilibiliEmbedHeight||A.bilibiliEmbedHeight).onChange(async c=>{this.plugin.settings.bilibiliEmbedHeight=c,await this.plugin.saveSettings()})),e.createEl("h2",{text:"Twitter"}),new S.Setting(e).setName("Twitter note template title").addText(a=>a.setPlaceholder("Defaults to %tweetAuthorName%").setValue(this.plugin.settings.twitterNoteTitle||A.twitterNoteTitle).onChange(async c=>{this.plugin.settings.twitterNoteTitle=c,await this.plugin.saveSettings()})),new S.Setting(e).setName("Twitter note template").addTextArea(a=>{a.setValue(this.plugin.settings.twitterNote||A.twitterNote).onChange(async c=>{this.plugin.settings.twitterNote=c,await this.plugin.saveSettings()}),a.inputEl.rows=10,a.inputEl.cols=25}),e.createEl("h2",{text:"Stack Exchange"}),new S.Setting(e).setName("Stack Exchange note title template").addText(a=>a.setPlaceholder("Defaults to %title%").setValue(this.plugin.settings.stackExchangeNoteTitle||A.stackExchangeNoteTitle).onChange(async c=>{this.plugin.settings.stackExchangeNoteTitle=c,await this.plugin.saveSettings()})),new S.Setting(e).setName("Stack Exchange question note template").addTextArea(a=>{a.setValue(this.plugin.settings.stackExchangeNote||A.stackExchangeNote).onChange(async c=>{this.plugin.settings.stackExchangeNote=c,await this.plugin.saveSettings()}),a.inputEl.rows=10,a.inputEl.cols=25}),new S.Setting(e).setName("Stack Exchange answer template").addTextArea(a=>{a.setValue(this.plugin.settings.stackExchangeAnswer||A.stackExchangeAnswer).onChange(async c=>{this.plugin.settings.stackExchangeAnswer=c,await this.plugin.saveSettings()}),a.inputEl.rows=10,a.inputEl.cols=25}),new S.Setting(e).setName("Download media attachments").setDesc("If enabled, media attachments are downloaded to the assets folder (only Desktop App feature)").addToggle(a=>a.setValue(Object.prototype.hasOwnProperty.call(this.plugin.settings,"downloadStackExchangeAssets")?this.plugin.settings.downloadStackExchangeAssets:A.downloadStackExchangeAssets).onChange(async c=>{this.plugin.settings.downloadStackExchangeAssets=c,r.setDisabled(!c),await this.plugin.saveSettings()}));let r=new S.Setting(e).setName("Download media attachments to folder").setDesc("If enabled, the media attachments are stored in their own folder.").addToggle(a=>a.setValue(Object.prototype.hasOwnProperty.call(this.plugin.settings,"downloadStackExchangeAssetsInDir")?this.plugin.settings.downloadStackExchangeAssetsInDir:A.downloadStackExchangeAssetsInDir).onChange(async c=>{this.plugin.settings.downloadStackExchangeAssetsInDir=c,await this.plugin.saveSettings()}));e.createEl("h2",{text:"Mastodon"}),new S.Setting(e).setName("Mastodon note template title").addText(a=>a.setPlaceholder("Defaults to %tootAuthorName%").setValue(this.plugin.settings.mastodonNoteTitle||A.mastodonNoteTitle).onChange(async c=>{this.plugin.settings.mastodonNoteTitle=c,await this.plugin.saveSettings()})),new S.Setting(e).setName("Mastodon note template").addTextArea(a=>{a.setValue(this.plugin.settings.mastodonNote||A.mastodonNote).onChange(async c=>{this.plugin.settings.mastodonNote=c,await this.plugin.saveSettings()}),a.inputEl.rows=10,a.inputEl.cols=25}),new S.Setting(e).setName("Download media attachments").setDesc("If enabled, media attachments of toot are downloaded to the assets folder (only Desktop App feature)").addToggle(a=>a.setValue(Object.prototype.hasOwnProperty.call(this.plugin.settings,"downloadMastodonMediaAttachments")?this.plugin.settings.downloadMastodonMediaAttachments:A.downloadMastodonMediaAttachments).onChange(async c=>{this.plugin.settings.downloadMastodonMediaAttachments=c,n.setDisabled(!c),await this.plugin.saveSettings()}));let n=new S.Setting(e).setName("Download media attachments to folder").setDesc("If enabled, the media attachments of toot are stored in their own folder.").addToggle(a=>a.setValue(Object.prototype.hasOwnProperty.call(this.plugin.settings,"downloadMastodonMediaAttachmentsInDir")?this.plugin.settings.downloadMastodonMediaAttachmentsInDir:A.downloadMastodonMediaAttachmentsInDir).onChange(async c=>{this.plugin.settings.downloadMastodonMediaAttachmentsInDir=c,await this.plugin.saveSettings()}));new S.Setting(e).setName("Save replies").setDesc("If enabled, replies of toot will be saved.").addToggle(a=>a.setValue(Object.prototype.hasOwnProperty.call(this.plugin.settings,"saveMastodonReplies")?this.plugin.settings.saveMastodonReplies:A.saveMastodonReplies).onChange(async c=>{this.plugin.settings.saveMastodonReplies=c,await this.plugin.saveSettings()})),new S.Setting(e).setName("Mastodon reply template").addTextArea(a=>{a.setValue(this.plugin.settings.mastodonReply||A.mastodonReply).onChange(async c=>{this.plugin.settings.mastodonReply=c,await this.plugin.saveSettings()}),a.inputEl.rows=10,a.inputEl.cols=25}),e.createEl("h2",{text:"TikTok"}),new S.Setting(e).setName("TikTok note title template").addText(a=>a.setPlaceholder("TikTok from %authorName% (%date%)").setValue(this.plugin.settings.tikTokNoteTitle||A.tikTokNoteTitle).onChange(async c=>{this.plugin.settings.tikTokNoteTitle=c,await this.plugin.saveSettings()})),new S.Setting(e).setName("TikTok note template").addTextArea(a=>{a.setValue(this.plugin.settings.tikTokNote||A.tikTokNote).onChange(async c=>{this.plugin.settings.tikTokNote=c,await this.plugin.saveSettings()}),a.inputEl.rows=10,a.inputEl.cols=25}),new S.Setting(e).setName("TikTok embed player width").addText(a=>a.setPlaceholder(A.tikTokEmbedWidth).setValue(this.plugin.settings.tikTokEmbedWidth||A.tikTokEmbedWidth).onChange(async c=>{this.plugin.settings.tikTokEmbedWidth=c,await this.plugin.saveSettings()})),new S.Setting(e).setName("TikTok embed player height").addText(a=>a.setPlaceholder(A.tikTokEmbedHeight).setValue(this.plugin.settings.tikTokEmbedHeight||A.tikTokEmbedHeight).onChange(async c=>{this.plugin.settings.tikTokEmbedHeight=c,await this.plugin.saveSettings()})),e.createEl("h2",{text:"Readable Article"}),new S.Setting(e).setName("Readable article note template title").addText(a=>a.setPlaceholder("Defaults to %title%").setValue(this.plugin.settings.parseableArticleNoteTitle||A.parseableArticleNoteTitle).onChange(async c=>{this.plugin.settings.parseableArticleNoteTitle=c,await this.plugin.saveSettings()})),new S.Setting(e).setName("Readable article note template").addTextArea(a=>{a.setValue(this.plugin.settings.parsableArticleNote||A.parsableArticleNote).onChange(async c=>{this.plugin.settings.parsableArticleNote=c,await this.plugin.saveSettings()}),a.inputEl.rows=10,a.inputEl.cols=25}),new S.Setting(e).setName("Download images").setDesc("If enabled, images in article are downloaded to the assets folder (only Desktop App feature)").addToggle(a=>a.setValue(Object.prototype.hasOwnProperty.call(this.plugin.settings,"downloadImages")?this.plugin.settings.downloadImages:A.downloadImages).onChange(async c=>{this.plugin.settings.downloadImages=c,s.setDisabled(!c),await this.plugin.saveSettings()}));let s=new S.Setting(e).setName("Download images to note folder").setDesc("If enabled, the images in article are stored in their own folder.").addToggle(a=>a.setValue(Object.prototype.hasOwnProperty.call(this.plugin.settings,"downloadImagesInArticleDir")?this.plugin.settings.downloadImagesInArticleDir:A.downloadImagesInArticleDir).onChange(async c=>{this.plugin.settings.downloadImagesInArticleDir=c,await this.plugin.saveSettings()}));e.createEl("h2",{text:"Nonreadable Article"}),new S.Setting(e).setName("Nonreadable article note template title").addText(a=>a.setPlaceholder("Defaults to 'Article %date%'").setValue(this.plugin.settings.notParseableArticleNoteTitle||A.notParseableArticleNoteTitle).onChange(async c=>{this.plugin.settings.notParseableArticleNoteTitle=c,await this.plugin.saveSettings()})),new S.Setting(e).setName("Nonreadable article note template").addTextArea(a=>{a.setValue(this.plugin.settings.notParsableArticleNote||A.notParsableArticleNote).onChange(async c=>{this.plugin.settings.notParsableArticleNote=c,await this.plugin.saveSettings()}),a.inputEl.rows=10,a.inputEl.cols=25}),e.createEl("h2",{text:"Text Snippet"}),new S.Setting(e).setName("Text snippet note template title").addText(a=>a.setPlaceholder("Defaults to 'Note %date%'").setValue(this.plugin.settings.textSnippetNoteTitle||A.textSnippetNoteTitle).onChange(async c=>{this.plugin.settings.textSnippetNoteTitle=c,await this.plugin.saveSettings()})),new S.Setting(e).setName("Text snippet note template").addTextArea(a=>{a.setValue(this.plugin.settings.textSnippetNote||A.textSnippetNote).onChange(async c=>{this.plugin.settings.textSnippetNote=c,await this.plugin.saveSettings()}),a.inputEl.rows=10,a.inputEl.cols=25})}};var xe=require("obsidian"),Lt=$e(br());var B=class{constructor(t,e){C(this,"fileName");C(this,"content");this.fileName=t,this.content=e}};var $=class{constructor(t,e,r){C(this,"app");C(this,"settings");C(this,"templateEngine");this.app=t,this.settings=e,this.templateEngine=r}isValidUrl(t){return ge(t)}getFormattedDateForFilename(){return Dt(this.settings.dateTitleFmt)}getFormattedDateForContent(){return Dt(this.settings.dateContentFmt)}};var ci=class extends ${constructor(e,r,n){super(e,r,n);C(this,"PATTERN",/(youtube.com|youtu.be)\/(watch|shorts)?(\?v=|\/)?([^&#?]*)/)}test(e){return this.isValidUrl(e)&&this.PATTERN.test(e)}async prepareNote(e){let r=this.settings.youtubeApiKey===""?await this.parseSchema(e):await this.parseApiResponse(e),n=this.templateEngine.render(this.settings.youtubeNote,r),s=this.templateEngine.render(this.settings.youtubeNoteTitle,{title:r.videoTitle,date:this.getFormattedDateForFilename()});return new B(`${s}.md`,n)}async parseApiResponse(e){var n,s,a,c,f,d,v,w,I,D;let r=this.PATTERN.exec(e)[4];try{let M=await(0,xe.request)({method:"GET",url:`https://www.googleapis.com/youtube/v3/videos?part=contentDetails,snippet,statistics,status,topicDetails&id=${r}&key=${this.settings.youtubeApiKey}`,headers:{Accept:"application/json"}}),x=JSON.parse(M);if(x.items.length===0)throw new Error(`Video (${e}) cannot be fetched from API`);let y=x.items[0],p=await(0,xe.request)({method:"GET",url:`https://www.googleapis.com/youtube/v3/channels?part=snippet,contentDetails,statistics&id=${y.snippet.channelId}&key=${this.settings.youtubeApiKey}`,headers:{Accept:"application/json"}}),g=JSON.parse(p);if(g.items.length===0)throw new Error(`Channel (${y.snippet.channelId}) cannot be fetched from API`);let l=g.items[0],o=(0,Lt.parse)(y.contentDetails.duration),m=Object.prototype.hasOwnProperty.call(y,"tags")?y.snippet.tags.map(u=>u.replace(/[\s:\-_.]/g,"").replace(/^/,"#")):[];return{date:this.getFormattedDateForContent(),videoId:y.id,videoURL:e,videoTitle:y.snippet.title,videoDescription:y.snippet.description,videoThumbnail:(I=(w=(f=(s=(n=y.snippet.thumbnails)==null?void 0:n.maxres)==null?void 0:s.url)!=null?f:(c=(a=y.snippet.thumbnails)==null?void 0:a.medium)==null?void 0:c.url)!=null?w:(v=(d=y.snippet.thumbnails)==null?void 0:d.default)==null?void 0:v.url)!=null?I:"",videoPlayer:this.getEmbedPlayer(y.id),videoDuration:(0,Lt.toSeconds)(o),videoDurationFormatted:this.formatDuration(o),videoPublishDate:(0,xe.moment)(y.snippet.publishedAt).format(this.settings.dateContentFmt),videoViewsCount:y.statistics.viewCount,videoTags:m.join(" "),channelId:l.id,channelURL:`https://www.youtube.com/channel/${l.id}`,channelName:(D=l.snippet.title)!=null?D:"",extra:{thumbnails:y.snippet.thumbnails,publishedAt:(0,xe.moment)(y.snippet.publishedAt).toDate(),tags:m,channel:{thumbnails:l.snippet.thumbnails}}}}catch(M){St(M)}}async parseSchema(e){var r,n,s,a,c,f,d,v,w,I,D,M,x,y;try{let p=await(0,xe.request)({method:"GET",url:e,headers:{"user-agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/114.0.0.0 Safari/537.36"}}),g=new DOMParser().parseFromString(p,"text/html"),l=g.querySelector('[itemtype*="http://schema.org/VideoObject"]');if(l===null)throw new Error("Unable to find Schema.org element in HTML.");let o=(n=(r=l==null?void 0:l.querySelector('[itemprop="identifier"]'))==null?void 0:r.getAttribute("content"))!=null?n:"",m=l.querySelector('[itemtype="http://schema.org/Person"]');return{date:this.getFormattedDateForContent(),videoId:o,videoURL:e,videoTitle:(a=(s=l==null?void 0:l.querySelector('[itemprop="name"]'))==null?void 0:s.getAttribute("content"))!=null?a:"",videoDescription:(f=(c=l==null?void 0:l.querySelector('[itemprop="description"]'))==null?void 0:c.getAttribute("content"))!=null?f:"",videoThumbnail:(v=(d=g.querySelector('meta[property="og:image"]'))==null?void 0:d.getAttribute("content"))!=null?v:"",videoPlayer:this.getEmbedPlayer(o),videoDuration:0,videoDurationFormatted:"",videoPublishDate:"",videoViewsCount:0,videoTags:"",channelId:(I=(w=l==null?void 0:l.querySelector('[itemprop="channelId"'))==null?void 0:w.getAttribute("content"))!=null?I:"",channelURL:(M=(D=m==null?void 0:m.querySelector('[itemprop="url"]'))==null?void 0:D.getAttribute("href"))!=null?M:"",channelName:(y=(x=m==null?void 0:m.querySelector('[itemprop="name"]'))==null?void 0:x.getAttribute("content"))!=null?y:"",extra:null}}catch(p){St(p)}}formatDuration(e){let r="";return e.years>0&&(r=r.concat(" ",`${e.years}y`)),e.months>0&&(r=r.concat(" ",`${e.months}m`)),e.weeks>0&&(r=r.concat(" ",`${e.weeks}w`)),e.days>0&&(r=r.concat(" ",`${e.days}d`)),e.hours>0&&(r=r.concat(" ",`${e.hours}h`)),e.minutes>0&&(r=r.concat(" ",`${e.minutes}m`)),e.seconds>0&&(r=r.concat(" ",`${e.seconds}s`)),r.trim()}getEmbedPlayer(e){let r=this.settings.youtubeUsePrivacyEnhancedEmbed?"youtube-nocookie.com":"youtube.com";return`<iframe width="${this.settings.youtubeEmbedWidth}" height="${this.settings.youtubeEmbedHeight}" src="https://www.${r}/embed/${e}" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>`}},vr=ci;var yr=require("obsidian");var ui=class extends ${constructor(e,r,n){super(e,r,n);C(this,"PATTERN",/(vimeo.com)\/(\d+)?/)}test(e){return this.isValidUrl(e)&&this.PATTERN.test(e)}async prepareNote(e){let r=await this.parseSchema(e),n=this.templateEngine.render(this.settings.vimeoNote,r),s=this.templateEngine.render(this.settings.vimeoNoteTitle,{title:r.videoTitle,date:this.getFormattedDateForFilename()});return new B(`${s}.md`,n)}async parseSchema(e){var d,v,w,I,D,M;let r=await(0,yr.request)({method:"GET",url:e,headers:{"user-agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/108.0.0.0 Safari/537.36"}}),s=new DOMParser().parseFromString(r,"text/html").querySelector('script[type="application/ld+json"]'),c=JSON.parse(s.textContent)[0],f=this.PATTERN.exec(e);return{date:this.getFormattedDateForContent(),videoId:f.length===3?f[2]:"",videoURL:(d=c==null?void 0:c.url)!=null?d:"",videoTitle:(v=c==null?void 0:c.name)!=null?v:"",videoPlayer:`<iframe width="${this.settings.vimeoEmbedWidth}" height="${this.settings.vimeoEmbedHeight}" src="${c==null?void 0:c.embedUrl}" title="Vimeo video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>`,channelName:(I=(w=c==null?void 0:c.author)==null?void 0:w.name)!=null?I:"",channelURL:(M=(D=c==null?void 0:c.author)==null?void 0:D.url)!=null?M:""}}},Tr=ui;var Nr=require("obsidian");var hi=class extends ${constructor(e,r,n){super(e,r,n);C(this,"PATTERN",/(bilibili.com)\/(video)?\/([a-z0-9]+)?/i)}test(e){return this.isValidUrl(e)&&this.PATTERN.test(e)}async prepareNote(e){let r=await this.getNoteData(e),n=this.templateEngine.render(this.settings.bilibiliNote,r),s=this.templateEngine.render(this.settings.bilibiliNoteTitle,{title:r.videoTitle,date:this.getFormattedDateForFilename()});return new B(`${s}.md`,n)}async getNoteData(e){var a,c;let r=await(0,Nr.request)({method:"GET",url:e,headers:{"user-agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/103.0.0.0 Safari/537.36"}}),n=new DOMParser().parseFromString(r,"text/html"),s=(a=this.PATTERN.exec(e)[3])!=null?a:"";return{date:this.getFormattedDateForContent(),videoId:s,videoTitle:(c=n.querySelector("[property~='og:title']").getAttribute("content"))!=null?c:"",videoURL:e,videoPlayer:`<iframe width="${this.settings.bilibiliEmbedWidth}" height="${this.settings.bilibiliEmbedHeight}" src="https://player.bilibili.com/player.html?autoplay=0&bvid=${s}" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"></iframe>`}}},Er=hi;var It=require("obsidian");function Kn(i){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var r in e)e.hasOwnProperty(r)&&(i[r]=e[r])}return i}function fi(i,t){return Array(t+1).join(i)}function Jn(i){return i.replace(/^\n*/,"")}function Zn(i){for(var t=i.length;t>0&&i[t-1]===`
`;)t--;return i.substring(0,t)}var Qn=["ADDRESS","ARTICLE","ASIDE","AUDIO","BLOCKQUOTE","BODY","CANVAS","CENTER","DD","DIR","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","FRAMESET","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","HTML","ISINDEX","LI","MAIN","MENU","NAV","NOFRAMES","NOSCRIPT","OL","OUTPUT","P","PRE","SECTION","TABLE","TBODY","TD","TFOOT","TH","THEAD","TR","UL"];function di(i){return bi(i,Qn)}var _r=["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"];function Sr(i){return bi(i,_r)}function ea(i){return Rr(i,_r)}var Dr=["A","TABLE","THEAD","TBODY","TFOOT","TH","TD","IFRAME","SCRIPT","AUDIO","VIDEO"];function ta(i){return bi(i,Dr)}function ia(i){return Rr(i,Dr)}function bi(i,t){return t.indexOf(i.nodeName)>=0}function Rr(i,t){return i.getElementsByTagName&&t.some(function(e){return i.getElementsByTagName(e).length})}var Q={};Q.paragraph={filter:"p",replacement:function(i){return`

`+i+`

`}};Q.lineBreak={filter:"br",replacement:function(i,t,e){return e.br+`
`}};Q.heading={filter:["h1","h2","h3","h4","h5","h6"],replacement:function(i,t,e){var r=Number(t.nodeName.charAt(1));if(e.headingStyle==="setext"&&r<3){var n=fi(r===1?"=":"-",i.length);return`

`+i+`
`+n+`

`}else return`

`+fi("#",r)+" "+i+`

`}};Q.blockquote={filter:"blockquote",replacement:function(i){return i=i.replace(/^\n+|\n+$/g,""),i=i.replace(/^/gm,"> "),`

`+i+`

`}};Q.list={filter:["ul","ol"],replacement:function(i,t){var e=t.parentNode;return e.nodeName==="LI"&&e.lastElementChild===t?`
`+i:`

`+i+`

`}};Q.listItem={filter:"li",replacement:function(i,t,e){i=i.replace(/^\n+/,"").replace(/\n+$/,`
`).replace(/\n/gm,`
    `);var r=e.bulletListMarker+"   ",n=t.parentNode;if(n.nodeName==="OL"){var s=n.getAttribute("start"),a=Array.prototype.indexOf.call(n.children,t);r=(s?Number(s)+a:a+1)+".  "}return r+i+(t.nextSibling&&!/\n$/.test(i)?`
`:"")}};Q.indentedCodeBlock={filter:function(i,t){return t.codeBlockStyle==="indented"&&i.nodeName==="PRE"&&i.firstChild&&i.firstChild.nodeName==="CODE"},replacement:function(i,t,e){return`

    `+t.firstChild.textContent.replace(/\n/g,`
    `)+`

`}};Q.fencedCodeBlock={filter:function(i,t){return t.codeBlockStyle==="fenced"&&i.nodeName==="PRE"&&i.firstChild&&i.firstChild.nodeName==="CODE"},replacement:function(i,t,e){for(var r=t.firstChild.getAttribute("class")||"",n=(r.match(/language-(\S+)/)||[null,""])[1],s=t.firstChild.textContent,a=e.fence.charAt(0),c=3,f=new RegExp("^"+a+"{3,}","gm"),d;d=f.exec(s);)d[0].length>=c&&(c=d[0].length+1);var v=fi(a,c);return`

`+v+n+`
`+s.replace(/\n$/,"")+`
`+v+`

`}};Q.horizontalRule={filter:"hr",replacement:function(i,t,e){return`

`+e.hr+`

`}};Q.inlineLink={filter:function(i,t){return t.linkStyle==="inlined"&&i.nodeName==="A"&&i.getAttribute("href")},replacement:function(i,t){var e=t.getAttribute("href");e&&(e=e.replace(/([()])/g,"\\$1"));var r=Pt(t.getAttribute("title"));return r&&(r=' "'+r.replace(/"/g,'\\"')+'"'),"["+i+"]("+e+r+")"}};Q.referenceLink={filter:function(i,t){return t.linkStyle==="referenced"&&i.nodeName==="A"&&i.getAttribute("href")},replacement:function(i,t,e){var r=t.getAttribute("href"),n=Pt(t.getAttribute("title"));n&&(n=' "'+n+'"');var s,a;switch(e.linkReferenceStyle){case"collapsed":s="["+i+"][]",a="["+i+"]: "+r+n;break;case"shortcut":s="["+i+"]",a="["+i+"]: "+r+n;break;default:var c=this.references.length+1;s="["+i+"]["+c+"]",a="["+c+"]: "+r+n}return this.references.push(a),s},references:[],append:function(i){var t="";return this.references.length&&(t=`

`+this.references.join(`
`)+`

`,this.references=[]),t}};Q.emphasis={filter:["em","i"],replacement:function(i,t,e){return i.trim()?e.emDelimiter+i+e.emDelimiter:""}};Q.strong={filter:["strong","b"],replacement:function(i,t,e){return i.trim()?e.strongDelimiter+i+e.strongDelimiter:""}};Q.code={filter:function(i){var t=i.previousSibling||i.nextSibling,e=i.parentNode.nodeName==="PRE"&&!t;return i.nodeName==="CODE"&&!e},replacement:function(i){if(!i)return"";i=i.replace(/\r?\n|\r/g," ");for(var t=/^`|^ .*?[^ ].* $|`$/.test(i)?" ":"",e="`",r=i.match(/`+/gm)||[];r.indexOf(e)!==-1;)e=e+"`";return e+t+i+t+e}};Q.image={filter:"img",replacement:function(i,t){var e=Pt(t.getAttribute("alt")),r=t.getAttribute("src")||"",n=Pt(t.getAttribute("title")),s=n?' "'+n+'"':"";return r?"!["+e+"]("+r+s+")":""}};function Pt(i){return i?i.replace(/(\n+\s*)+/g,`
`):""}function xr(i){this.options=i,this._keep=[],this._remove=[],this.blankRule={replacement:i.blankReplacement},this.keepReplacement=i.keepReplacement,this.defaultRule={replacement:i.defaultReplacement},this.array=[];for(var t in i.rules)this.array.push(i.rules[t])}xr.prototype={add:function(i,t){this.array.unshift(t)},keep:function(i){this._keep.unshift({filter:i,replacement:this.keepReplacement})},remove:function(i){this._remove.unshift({filter:i,replacement:function(){return""}})},forNode:function(i){if(i.isBlank)return this.blankRule;var t;return(t=mi(this.array,i,this.options))||(t=mi(this._keep,i,this.options))||(t=mi(this._remove,i,this.options))?t:this.defaultRule},forEach:function(i){for(var t=0;t<this.array.length;t++)i(this.array[t],t)}};function mi(i,t,e){for(var r=0;r<i.length;r++){var n=i[r];if(ra(n,t,e))return n}}function ra(i,t,e){var r=i.filter;if(typeof r=="string"){if(r===t.nodeName.toLowerCase())return!0}else if(Array.isArray(r)){if(r.indexOf(t.nodeName.toLowerCase())>-1)return!0}else if(typeof r=="function"){if(r.call(i,t,e))return!0}else throw new TypeError("`filter` needs to be a string, array, or function")}function na(i){var t=i.element,e=i.isBlock,r=i.isVoid,n=i.isPre||function(w){return w.nodeName==="PRE"};if(!(!t.firstChild||n(t))){for(var s=null,a=!1,c=null,f=Ar(c,t,n);f!==t;){if(f.nodeType===3||f.nodeType===4){var d=f.data.replace(/[ \r\n\t]+/g," ");if((!s||/ $/.test(s.data))&&!a&&d[0]===" "&&(d=d.substr(1)),!d){f=gi(f);continue}f.data=d,s=f}else if(f.nodeType===1)e(f)||f.nodeName==="BR"?(s&&(s.data=s.data.replace(/ $/,"")),s=null,a=!1):r(f)||n(f)?(s=null,a=!0):s&&(a=!1);else{f=gi(f);continue}var v=Ar(c,f,n);c=f,f=v}s&&(s.data=s.data.replace(/ $/,""),s.data||gi(s))}}function gi(i){var t=i.nextSibling||i.parentNode;return i.parentNode.removeChild(i),t}function Ar(i,t,e){return i&&i.parentNode===t||e(t)?t.nextSibling||t.parentNode:t.firstChild||t.nextSibling||t.parentNode}var vi=typeof window!="undefined"?window:{};function aa(){var i=vi.DOMParser,t=!1;try{new i().parseFromString("","text/html")&&(t=!0)}catch(e){}return t}function sa(){var i=function(){};return oa()?i.prototype.parseFromString=function(t){var e=new window.ActiveXObject("htmlfile");return e.designMode="on",e.open(),e.write(t),e.close(),e}:i.prototype.parseFromString=function(t){var e=document.implementation.createHTMLDocument("");return e.open(),e.write(t),e.close(),e},i}function oa(){var i=!1;try{document.implementation.createHTMLDocument("").open()}catch(t){vi.ActiveXObject&&(i=!0)}return i}var la=aa()?vi.DOMParser:sa();function ca(i,t){var e;if(typeof i=="string"){var r=ua().parseFromString('<x-turndown id="turndown-root">'+i+"</x-turndown>","text/html");e=r.getElementById("turndown-root")}else e=i.cloneNode(!0);return na({element:e,isBlock:di,isVoid:Sr,isPre:t.preformattedCode?ha:null}),e}var pi;function ua(){return pi=pi||new la,pi}function ha(i){return i.nodeName==="PRE"||i.nodeName==="CODE"}function ma(i,t){return i.isBlock=di(i),i.isCode=i.nodeName==="CODE"||i.parentNode.isCode,i.isBlank=ga(i),i.flankingWhitespace=pa(i,t),i}function ga(i){return!Sr(i)&&!ta(i)&&/^\s*$/i.test(i.textContent)&&!ea(i)&&!ia(i)}function pa(i,t){if(i.isBlock||t.preformattedCode&&i.isCode)return{leading:"",trailing:""};var e=fa(i.textContent);return e.leadingAscii&&wr("left",i,t)&&(e.leading=e.leadingNonAscii),e.trailingAscii&&wr("right",i,t)&&(e.trailing=e.trailingNonAscii),{leading:e.leading,trailing:e.trailing}}function fa(i){var t=i.match(/^(([ \t\r\n]*)(\s*))(?:(?=\S)[\s\S]*\S)?((\s*?)([ \t\r\n]*))$/);return{leading:t[1],leadingAscii:t[2],leadingNonAscii:t[3],trailing:t[4],trailingNonAscii:t[5],trailingAscii:t[6]}}function wr(i,t,e){var r,n,s;return i==="left"?(r=t.previousSibling,n=/ $/):(r=t.nextSibling,n=/^ /),r&&(r.nodeType===3?s=n.test(r.nodeValue):e.preformattedCode&&r.nodeName==="CODE"?s=!1:r.nodeType===1&&!di(r)&&(s=n.test(r.textContent))),s}var da=Array.prototype.reduce,ba=[[/\\/g,"\\\\"],[/\*/g,"\\*"],[/^-/g,"\\-"],[/^\+ /g,"\\+ "],[/^(=+)/g,"\\$1"],[/^(#{1,6}) /g,"\\$1 "],[/`/g,"\\`"],[/^~~~/g,"\\~~~"],[/\[/g,"\\["],[/\]/g,"\\]"],[/^>/g,"\\>"],[/_/g,"\\_"],[/^(\d+)\. /g,"$1\\. "]];function Ct(i){if(!(this instanceof Ct))return new Ct(i);var t={rules:Q,headingStyle:"setext",hr:"* * *",bulletListMarker:"*",codeBlockStyle:"indented",fence:"```",emDelimiter:"_",strongDelimiter:"**",linkStyle:"inlined",linkReferenceStyle:"full",br:"  ",preformattedCode:!1,blankReplacement:function(e,r){return r.isBlock?`

`:""},keepReplacement:function(e,r){return r.isBlock?`

`+r.outerHTML+`

`:r.outerHTML},defaultReplacement:function(e,r){return r.isBlock?`

`+e+`

`:e}};this.options=Kn({},t,i),this.rules=new xr(this.options)}Ct.prototype={turndown:function(i){if(!Ta(i))throw new TypeError(i+" is not a string, or an element/document/fragment node.");if(i==="")return"";var t=Lr.call(this,new ca(i,this.options));return va.call(this,t)},use:function(i){if(Array.isArray(i))for(var t=0;t<i.length;t++)this.use(i[t]);else if(typeof i=="function")i(this);else throw new TypeError("plugin must be a Function or an Array of Functions");return this},addRule:function(i,t){return this.rules.add(i,t),this},keep:function(i){return this.rules.keep(i),this},remove:function(i){return this.rules.remove(i),this},escape:function(i){return ba.reduce(function(t,e){return t.replace(e[0],e[1])},i)}};function Lr(i){var t=this;return da.call(i.childNodes,function(e,r){r=new ma(r,t.options);var n="";return r.nodeType===3?n=r.isCode?r.nodeValue:t.escape(r.nodeValue):r.nodeType===1&&(n=ya.call(t,r)),Pr(e,n)},"")}function va(i){var t=this;return this.rules.forEach(function(e){typeof e.append=="function"&&(i=Pr(i,e.append(t.options)))}),i.replace(/^[\t\r\n]+/,"").replace(/[\t\r\n\s]+$/,"")}function ya(i){var t=this.rules.forNode(i),e=Lr.call(this,i),r=i.flankingWhitespace;return(r.leading||r.trailing)&&(e=e.trim()),r.leading+t.replacement(e,i,this.options)+r.trailing}function Pr(i,t){var e=Zn(i),r=Jn(t),n=Math.max(i.length-e.length,t.length-r.length),s=`

`.substring(0,n);return e+s+r}function Ta(i){return i!=null&&(typeof i=="string"||i.nodeType&&(i.nodeType===1||i.nodeType===9||i.nodeType===11))}var Cr=Ct;var Ir=/highlight-(?:text|source)-([a-z0-9]+)/;function Na(i){i.addRule("highlightedCodeBlock",{filter:function(t){var e=t.firstChild;return t.nodeName==="DIV"&&Ir.test(t.className)&&e&&e.nodeName==="PRE"},replacement:function(t,e,r){var n=e.className||"",s=(n.match(Ir)||[null,""])[1];return`

`+r.fence+s+`
`+e.firstChild.textContent+`
`+r.fence+`

`}})}function Ea(i){i.addRule("strikethrough",{filter:["del","s","strike"],replacement:function(t){return"~"+t+"~"}})}var Aa=Array.prototype.indexOf,Le={};Le.tableCell={filter:["th","td"],replacement:function(i,t){return Mr(i,t)+Or(t,"")}};Le.tableRow={filter:"tr",replacement:function(i,t){var e="",r={left:":--",right:"--:",center:":-:"};if(wa(t))for(var n=0;n<t.childNodes.length;n++){var s="---",a=(t.childNodes[n].getAttribute("align")||"").toLowerCase();a&&(s=r[a]||s),e+=Mr(s,t.childNodes[n])+Or(t.childNodes[n],s)}return`
`+i+(e?`
`+e:"")}};Le.table={filter:function(i){return i.nodeName==="TABLE"&&!kr(i)},replacement:function(i){return i=i.replace(`

`,`
`),`

`+i+`

`}};Le.tableSection={filter:["thead","tbody","tfoot"],replacement:function(i){return i}};Le.captionSection={filter:"caption",replacement:function(i,t){return t.parentNode.nodeName==="TABLE"&&t.parentNode.childNodes[0]===t?i:""}};function wa(i){var t=i.parentNode,e=t;return(t.nodeName==="THEAD"||t.nodeName==="TFOOT"||t.nodeName==="TBODY")&&(e=t.parentNode),e.nodeName==="TABLE"&&e.rows[0]===i}function Mr(i,t){var e=Aa.call(t.parentNode.childNodes,t),r=" ";return e===0&&(r="| "),i=i.replace(/\r\n/g,`
`).replace(/\n/g," "),i=i.replace(/\|/g,"\\|"),r+i+" |"}function Or(i,t){var e=i.getAttribute("colspan")||1;return e<=1?"":(" "+t+" |").repeat(e-1)}function kr(i){for(var t=i.parentNode;t;){if(t.nodeName==="TABLE")return!0;t=t.parentNode}return!1}function _a(i){i.keep(function(e){return e.nodeName==="TABLE"&&kr(e)});for(var t in Le)i.addRule(t,Le[t])}function Sa(i){i.addRule("taskListItems",{filter:function(t){return t.type==="checkbox"&&t.parentNode.nodeName==="LI"},replacement:function(t,e){return(e.checked?"[x]":"[ ]")+" "}})}function Fr(i){i.use([Na,Ea,_a,Sa])}async function ye(i){let t=Fr,e=new Cr({headingStyle:"atx",hr:"---",bulletListMarker:"-",codeBlockStyle:"fenced",emDelimiter:"*"});return e.use(t),e.addRule("fencedCodeLangBlock",{filter:n=>n.nodeName=="PRE"&&(!n.firstChild||n.firstChild.nodeName!="CODE")&&!n.querySelector("img"),replacement:function(n,s,a){var x;s.innerHTML=s.innerHTML.replaceAll("<br-keep></br-keep>","<br>");let c=(x=s.id)==null?void 0:x.match(/code-lang-(.+)/),f=(c==null?void 0:c.length)>0?c[1]:"",d=s.textContent,v=a.fence.charAt(0),w=3,I=new RegExp("^"+v+"{3,}","gm"),D;for(;D=I.exec(d);)D[0].length>=w&&(w=D[0].length+1);let M=Array(w+1).join(v);return`

`+M+f+`
`+d.replace(/\n$/,"")+`
`+M+`

`}}),e.turndown(i)}var yi=class extends ${constructor(e,r,n){super(e,r,n);C(this,"PATTERN",/(https:\/\/(twitter|x).com\/([a-zA-Z0-9_]+\/)([a-zA-Z0-9_]+\/[a-zA-Z0-9_]+))/)}test(e){return this.isValidUrl(e)&&this.PATTERN.test(e)}async prepareNote(e){let r=new URL(e);r.hostname==="x.com"&&(r.hostname="twitter.com");let n=await this.getTweetNoteData(r),s=this.templateEngine.render(this.settings.twitterNote,n),a=this.templateEngine.render(this.settings.twitterNoteTitle,{tweetAuthorName:n.tweetAuthorName,date:this.getFormattedDateForFilename()});return new B(`${a}.md`,s)}async getTweetNoteData(e){let r=JSON.parse(await(0,It.request)({method:"GET",contentType:"application/json",url:`https://publish.twitter.com/oembed?url=${e.href}`})),n=await ye(r.html);return{date:this.getFormattedDateForContent(),tweetAuthorName:r.author_name,tweetURL:r.url,tweetContent:n,tweetPublishDate:this.getPublishedDateFromDOM(r.html)}}getPublishedDateFromDOM(e){let n=new DOMParser().parseFromString(e,"text/html").querySelector("blockquote > a"),s=(0,It.moment)(n.textContent);return s.isValid()?s.format(this.settings.dateContentFmt):""}},Ur=yi;var Mt=require("obsidian"),wi=$e(Ai());var _i=class extends ${constructor(e,r,n){super(e,r,n);C(this,"PATTERN",/(https:\/\/|http:\/\/)(stackoverflow\.com|serverfault\.com|superuser\.com|askubuntu\.com|stackapps\.com|.*\.stackexchange\.com)\/(q|a|questions)\/(\d+)/)}test(e){return this.isValidUrl(e)&&this.PATTERN.test(e)}async prepareNote(e){let r=await(0,Mt.request)({method:"GET",url:e}),n=new DOMParser().parseFromString(r,"text/html"),s=await this.parseDocument(n),a=this.settings.stackExchangeNoteTitle.replace(/%title%/g,()=>s.title).replace(/%date%/g,this.getFormattedDateForFilename()),c=this.settings.downloadStackExchangeAssetsInDir?`${this.settings.assetsDir}/${le(a)}/`:this.settings.assetsDir,f=this.templateEngine.render(this.settings.stackExchangeNote,this.getNoteData(s));return this.settings.downloadStackExchangeAssets&&Mt.Platform.isDesktop&&(f=await Re(this.app,f,c)),new B(`${a}.md`,f)}getNoteData(e){let r=e.topAnswer?this.templateEngine.render(this.settings.stackExchangeAnswer,{date:this.getFormattedDateForContent(),answerContent:e.topAnswer.content,authorName:e.author.name,authorProfileURL:e.author.profile}):"",n="";for(let s=0;s<e.answers.length;s++)n=n.concat(`

***

`,this.templateEngine.render(this.settings.stackExchangeAnswer,{date:this.getFormattedDateForContent(),answerContent:e.answers[s].content,authorName:e.answers[s].author.name,authorProfileURL:e.answers[s].author.profile}));return{date:this.getFormattedDateForContent(),questionTitle:e.title,questionURL:e.url,questionContent:e.content,authorName:e.author.name,authorProfileURL:e.author.profile,topAnswer:r,answers:n.trim(),extra:{question:e}}}async parseDocument(e){var a,c,f,d,v,w,I,D,M,x,y,p,g,l,o,m;let r;try{r=new URL((f=(a=e.querySelector('link[rel="canonical"]'))==null?void 0:a.getAttribute("href"))!=null?f:(c=e.querySelector('meta[property="og:url"]'))==null?void 0:c.getAttribute("content"))}catch(u){r=null}let n=e.querySelector('#question [itemprop="author"]'),s=[];for(let u of e.querySelectorAll(".answer")){let O=u.querySelector('[itemprop="author"]');s.push({content:await ye(wi.sanitize((d=u.querySelector('[itemprop="text"]'))!=null?d:"")),author:{name:(w=(v=O==null?void 0:O.querySelector('[itemprop="name"]'))==null?void 0:v.textContent)!=null?w:"",profile:O instanceof Element&&r instanceof URL?String.prototype.concat(r.origin,(D=(I=O.querySelector("a"))==null?void 0:I.getAttribute("href"))!=null?D:""):""}})}return{title:(x=(M=e.querySelector('#question-header [itemprop="name"]'))==null?void 0:M.textContent)!=null?x:"",content:await ye(wi.sanitize((y=e.querySelector('#question [itemprop="text"]'))!=null?y:"")),url:(p=r==null?void 0:r.href)!=null?p:"",topAnswer:s.slice(0,1).shift(),answers:s.slice(1),author:{name:(l=(g=n==null?void 0:n.querySelector('[itemprop="name"]'))==null?void 0:g.textContent)!=null?l:"",profile:n instanceof Element&&r instanceof URL?String.prototype.concat(r.origin,(m=(o=n.querySelector("a"))==null?void 0:o.getAttribute("href"))!=null?m:""):""}}}},Hr=_i;var Pe=require("obsidian"),Ot=$e(jr()),qr=$e(Ai());var Ri=class extends ${constructor(t,e,r){super(t,e,r)}test(t){return this.isValidUrl(t)}async prepareNote(t){let e=new URL(t),r=await this.getDocument(e);return this.makeNote(r,e)}async makeNote(t,e){(0,Ot.isProbablyReaderable)(t)||new Pe.Notice("@mozilla/readability considers this document to unlikely be readerable.");let r=this.extractPreviewUrl(t),n=new Ot.Readability(t).parse();if(n===null||!Object.prototype.hasOwnProperty.call(n,"content"))return this.notParsableArticle(e.href,r);let s=await ye(n.content);return this.parsableArticle({date:this.getFormattedDateForContent(),articleTitle:n.title||"No title",articleURL:e.href,articleReadingTime:this.getEstimatedReadingTime(n),articleContent:s,siteName:n.siteName||"",author:n.byline||"",previewURL:r||"",publishedTime:n.publishedTime!==null?Rt(n.publishedTime,this.settings.dateContentFmt):"",readabilityArticle:n})}async getDocument(t){var f,d,v,w,I;let e=await(0,Pe.request)({method:"GET",url:t.href}),r=new DOMParser().parseFromString(e,"text/html"),n=r.getElementsByTagName("base"),s=null;n.length>0&&(s=n.item(0).getAttribute("href"),Array.from(n).forEach(D=>{D.remove()}));let a=r.createElement("base");a.setAttribute("href",ai(s!=null?s:t.href,t.origin)),r.head.append(a);let c=qr.sanitize(r.body.innerHTML);return r.body.innerHTML=c,(f=r.body.querySelectorAll("pre br"))==null||f.forEach(D=>{D.outerHTML="<br-keep></br-keep>"}),(d=r.body.querySelectorAll("h1, h2, h3, h4, h5, h6"))==null||d.forEach(D=>{D.className=""}),(v=r.body.querySelectorAll("[class*=highlight-text],[class*=highlight-source]"))==null||v.forEach(D=>{var x;let M=(x=D.className.match(/highlight-(?:text|source)-([a-z0-9]+)/))==null?void 0:x[1];D.firstElementChild.nodeName=="PRE"&&(D.removeAttribute("data-snippet-clipboard-copy-content"),D.firstElementChild.id=`code-lang-${M}`)}),(w=r.body.querySelectorAll("[class*=language-]"))==null||w.forEach(D=>{var x;let M=(x=D.className.match(/language-([a-z0-9]+)/))==null?void 0:x[1];D.id=`code-lang-${M}`}),(I=r.body.querySelectorAll(".codehilite > pre"))==null||I.forEach(D=>{D.firstChild.nodeName!=="CODE"&&!D.className.includes("language")&&(D.id="code-lang-text")}),r}async parsableArticle(t){let e=this.templateEngine.render(this.settings.parseableArticleNoteTitle,{title:t.articleTitle,date:this.getFormattedDateForFilename()}),r=this.templateEngine.render(this.settings.parsableArticleNote,t);return this.settings.downloadImages&&Pe.Platform.isDesktop&&(r=await this.replaceImages(e,r)),new B(`${e}.md`,r)}async notParsableArticle(t,e){console.error("Website not parseable");let r=this.settings.notParsableArticleNote.replace(/%articleURL%/g,()=>t).replace(/%previewURL%/g,()=>e||""),n=this.settings.notParseableArticleNoteTitle.replace(/%date%/g,this.getFormattedDateForFilename());return this.settings.downloadImages&&Pe.Platform.isDesktop&&(r=await this.replaceImages(n,r)),new B(`${n}.md`,r)}extractPreviewUrl(t){let e=t.querySelector('meta[property="og:image"]');return e==null&&(e=t.querySelector('meta[name="twitter:image"]')),e==null?void 0:e.getAttribute("content")}async replaceImages(t,e){let r=this.settings.downloadImagesInArticleDir?`${this.settings.assetsDir}/${le(t)}/`:this.settings.assetsDir;return Re(this.app,e,r)}getEstimatedReadingTime(t){let e=this.getReadingSpeed(t.lang||"en"),r=t.textContent.trim().split(/\s+/).length;return Math.ceil(r/e)}getReadingSpeed(t){let e=new Map([["en",228],["ar",138],["de",179],["es",218],["fi",161],["fr",195],["he",187],["it",188],["ja",193],["nl",202],["pl",166],["pt",181],["ru",184],["sk",190],["sl",180],["sv",199],["tr",166],["zh",158]]);return e.get(t)||e.get("en")}},ze=Ri;var xi=class extends ${constructor(t,e,r){super(t,e,r)}test(){return!0}async prepareNote(t){let r=`${this.settings.textSnippetNoteTitle.replace(/%date%/g,this.getFormattedDateForFilename())}.md`,n=this.settings.textSnippetNote.replace(/%content%/g,()=>t).replace(/%date%/g,this.getFormattedDateForContent());return new B(r,n)}},Yr=xi;var je=require("obsidian");var Li={INSTANCE:"/api/v2/instance",OEMBED:"/api/oembed",STATUS:"/api/v1/statuses",CONTEXT:"/api/v1/statuses/%id%/context"},Pi=class extends ${constructor(t,e,r){super(t,e,r)}async test(t){return ge(t)&&await this.testIsMastodon(t)}async prepareNote(t){let e=new URL(t),r=e.pathname.split("/")[2],n=await this.loadStatus(e.hostname,r),s=[];this.settings.saveMastodonReplies&&(s=await this.loadReplies(e.hostname,r));let a=this.templateEngine.render(this.settings.mastodonNoteTitle,{tootAuthorName:n.account.display_name,date:this.getFormattedDateForFilename()}),c=this.settings.downloadMastodonMediaAttachmentsInDir?`${this.settings.assetsDir}/${le(a)}/`:this.settings.assetsDir,f=await this.getNoteData(n,s,c),d=this.templateEngine.render(this.settings.mastodonNote,f);return new B(`${a}.md`,d)}async getNoteData(t,e,r){let n=await this.parseStatus(t,r);if(e.length>0)for(let s=0;s<e.length;s++){let a=await this.parseStatus(e[s],r),c=this.templateEngine.render(this.settings.mastodonReply,{tootAuthorName:e[s].account.display_name,tootURL:e[s].url,tootContent:a});n=n.concat(`

***

`,c)}return{date:this.getFormattedDateForContent(),tootAuthorName:t.account.display_name,tootURL:t.url,tootContent:n,extra:{status:t,replies:e}}}async loadStatus(t,e){return JSON.parse(await(0,je.request)({method:"GET",contentType:"application/json",url:`https://${t}${Li.STATUS}/${e}`}))}async loadReplies(t,e){let r=String.prototype.concat.call("https://",t,String.prototype.replace.call(Li.CONTEXT,"%id%",e));return JSON.parse(await(0,je.request)({method:"GET",contentType:"application/json",url:r})).descendants}async parseStatus(t,e){let r=await ye(t.content),n=this.settings.downloadMastodonMediaAttachments&&je.Platform.isDesktop?await Re(this.app,this.prepareMedia(t.media_attachments),e):this.prepareMedia(t.media_attachments);return r.concat(n)}prepareMedia(t){return t.reduce((e,{url:r,description:n})=>{let s=n?`
> *${n}*`:"";return`${e}

![](${r})${s}`},"")}async testIsMastodon(t){if(!t)return!1;let e=new URL(t).hostname;try{let r=JSON.parse(await(0,je.request)({method:"GET",contentType:"application/json",url:`https://${e}${Li.INSTANCE}`}));return(r==null?void 0:r.domain)===e}catch(r){return!1}}},Xr=Pi;var Kr=require("obsidian");var Ci=class extends ${constructor(e,r,n){super(e,r,n);C(this,"PATTERN",/(tiktok.com)\/(\S+)\/(video)\/(\d+)/)}test(e){return this.isValidUrl(e)&&this.PATTERN.test(e)}async prepareNote(e){let r=await this.parseHtml(e),n=this.templateEngine.render(this.settings.tikTokNote,r),s=this.templateEngine.render(this.settings.tikTokNoteTitle,{authorName:r.authorName,date:this.getFormattedDateForFilename()});return new B(`${s}.md`,n)}async parseHtml(e){var a,c,f,d;let r=await(0,Kr.request)({method:"GET",url:e,headers:{"user-agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/108.0.0.0 Safari/537.36"}}),n=new DOMParser().parseFromString(r,"text/html"),s=this.PATTERN.exec(e);return{date:this.getFormattedDateForContent(),videoId:s[4],videoURL:(c=(a=n.querySelector('meta[property="og:url"]'))==null?void 0:a.getAttribute("content"))!=null?c:e,videoDescription:(d=(f=n.querySelector('meta[property="og:description"]'))==null?void 0:f.getAttribute("content"))!=null?d:"",videoPlayer:`<iframe width="${this.settings.tikTokEmbedWidth}" height="${this.settings.tikTokEmbedHeight}" src="https://www.tiktok.com/embed/v2/${s[4]}"></iframe>`,authorName:s[2],authorURL:`https://www.tiktok.com/${s[2]}`}}},Jr=Ci;var st=class{constructor(t){C(this,"parsers");this.parsers=t}async createParser(t){for(let e of this.parsers)if(await e.test(t))return e}};var ot=class extends ze{constructor(){super(...arguments);C(this,"PATTERN",/^https?:\/\/(?:www\.)?github\.com\/([a-zA-Z0-9_-]+)\/([a-zA-Z0-9_-]+)\/?$/)}test(e){return this.isValidUrl(e)&&this.PATTERN.test(e)}async prepareNote(e){let r=new URL(e),n=await this.getDocument(r),s=n.querySelector("article.markdown-body");return s.querySelectorAll('[aria-label^="Permalink:"]').forEach(a=>a.remove()),n.querySelector("body").innerHTML=s.outerHTML,this.makeNote(n,r)}};var lt=class extends ze{constructor(){super(...arguments);C(this,"PATTERN",/^(?:https?:\/\/)?(?:[a-z]{2,3}(?:-[a-z]{2,3})?)\.wikipedia\.org\/wiki\/([^/]+)$/i)}test(e){return this.isValidUrl(e)&&this.PATTERN.test(e)}async prepareNote(e){let r=new URL(e),n=await this.getDocument(r);return n.querySelectorAll(".reference .cite-bracket").forEach(s=>{s.remove()}),n.querySelectorAll(".reference a").forEach(s=>{s.textContent="\xA0"+s.textContent}),n.querySelectorAll(".mw-cite-backlink").forEach(s=>{s.remove()}),n.querySelectorAll(".infobox caption").forEach(s=>{let a=n.createElement("p");a.innerHTML=s.innerHTML,s.parentElement.insertBefore(a,s),s.remove()}),n.querySelectorAll(".wikitable caption").forEach(s=>{let a=n.createElement("p");a.innerHTML=s.innerHTML,s.parentElement.insertBefore(a,s),s.remove()}),this.makeNote(n,r)}};var qe=["string","number","bigint","symbol"],ct=class{constructor(){C(this,"modifiers");this.modifiers={blockquote:t=>this.validateFilterValueType(t,"blockquote",qe)?t.split(`
`).map(e=>`> ${e}`).join(`
`):t,capitalize:t=>{if(!this.validateFilterValueType(t,"capitalize",qe))return t;let e=String(t);return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()},join:(t,e=",")=>this.validateFilterValueType(t,"join",["array"])?t.join(e):t,lower:t=>{if(!this.validateFilterValueType(t,"lower",qe))return t;String(t).toLowerCase()},map:(t,e)=>{if(!this.validateFilterValueType(t,"map",["array"]))return t;try{return t.map(e)}catch(r){return console.warn("Error in map modifier:",r),t}},replace:(t,e,r="")=>this.validateFilterValueType(t,"replace",qe)?t.replaceAll(e,r):t,striptags:(t,e="")=>{if(!this.validateFilterValueType(t,"striptags",qe))return t;let r=new RegExp(`<(?!/?(${e.replace(/[<>]/g,"").split(",").join("|")})s*/?)[^>]+>`,"gi");return t.replace(r,"")},upper:t=>{if(!this.validateFilterValueType(t,"upper",qe))return t;String(t).toUpperCase()}}}render(t,e){try{let r=this.processLoops(t,e);return r=this.processVariables(r,e),r=this.processSimplePattern(r,e),r}catch(r){return console.error("Error rendering template:",r),t}}processSimplePattern(t,e){let r=/%(\w+(?:\.\w+)*)%/g;return t.replace(r,(n,s)=>{try{let a=this.resolveValue(s,e);return a===void 0?(console.warn(`Unable to resolve ${s}`),n):String(a)}catch(a){return console.warn(`Error processing simple pattern "${n}":`,a),n}})}processVariables(t,e){let r=/{{(.*?)}}/g;return t.replace(r,(n,s)=>{try{let[a,...c]=s.split("|").map(I=>I.trim()),d=/(['"])((?:[^\\]|\\.)*?)\1/.exec(a),v;if(d!==null?v=d[2]:v=this.resolveValue(a,e),v===void 0)return console.warn(`Unable to resolve ${a}`),n;let w=v;for(let I of c)w=this.applyModifier(w,I);return String(w)}catch(a){return console.warn(`Error processing variable "${n}":`,a),n}})}processLoops(t,e){let r=/{%\s*for\s+(\w+)\s+in\s+(\w+(?:\.\w+)*)\s*%}([\s\S]*?){%\s*endfor\s*%}/g;return t.replace(r,(n,s,a,c)=>{try{let f=this.resolveValue(a,e);return Array.isArray(f)?f.map(d=>{let v={...e,[s]:d};return this.render(c,v)}).join(""):(console.warn(`Value at "${a}" is not an array`),"")}catch(f){return console.warn(`Error processing loop "${n}":`,f),""}})}resolveValue(t,e){let r=t.trim().split("."),n=e;for(let s of r){if(n==null)return;n=n[s]}return n}addModifier(t,e){if(typeof e!="function")throw new Error("Modifier must be a function");this.modifiers[t]=e}parseModifier(t){let e=t.match(/(\w+)(?:\((.*?)\))?/);if(!e)return{name:t,args:[]};let[,r,n]=e,s=n?this.parseArguments(n):[];return{name:r,args:s}}parseArguments(t){let e=[],r="",n=!1,s="",a=!1,c=0,f=!1,d=()=>{(r.trim()||n)&&e.push(this.evaluateArgument(r.trim())),r=""};for(let v=0;v<t.length;v++){let w=t[v];if(f){r+=w,f=!1;continue}switch(w){case"\\":f=!0;break;case'"':case"'":a||(n&&w===s?n=!1:n||(n=!0,s=w)),r+=w;break;case"(":c++,r+=w;break;case")":c--,r+=w;break;case"=":t[v+1]===">"?(a=!0,r+="=>",v++):r+=w;break;case",":!n&&!a&&c===0?d():r+=w;break;default:r+=w}}return(r||n)&&d(),e}evaluateArgument(t){try{if(t.includes("=>")){let e=Function(`return ${t}`)();return typeof e=="function"?e:t}if(t.startsWith('"')&&t.endsWith('"')||t.startsWith("'")&&t.endsWith("'"))return t.slice(1,-1);if(t==="")return"";if(!isNaN(Number(t)))return Number(t);if(t.startsWith("[")&&t.endsWith("]"))try{return JSON.parse(t)}catch(e){return t}return t}catch(e){return console.warn("Error evaluating argument:",t,e),t}}applyModifier(t,e){try{let{name:r,args:n}=this.parseModifier(e);return this.modifiers[r]?this.modifiers[r](t,...n):(console.warn(`Modifier "${r}" not found`),t)}catch(r){return console.warn(`Error applying modifier "${e}":`,r),t}}validateFilterValueType(t,e,r){let n=typeof t;return r.includes(n)?!0:r.includes("array")?Array.isArray(t):(console.warn(`Filter ${e} supports following types ${r.join(", ")}, but ${n} was provided.`),!1)}};var kt=class extends pe.Plugin{constructor(){super(...arguments);C(this,"settings");C(this,"parserCreator");C(this,"templateEngine")}async onload(){await this.loadSettings(),this.templateEngine=new ct,this.parserCreator=new st([new vr(this.app,this.settings,this.templateEngine),new Tr(this.app,this.settings,this.templateEngine),new Er(this.app,this.settings,this.templateEngine),new Ur(this.app,this.settings,this.templateEngine),new Hr(this.app,this.settings,this.templateEngine),new Xr(this.app,this.settings,this.templateEngine),new Jr(this.app,this.settings,this.templateEngine),new ot(this.app,this.settings,this.templateEngine),new lt(this.app,this.settings,this.templateEngine),new ze(this.app,this.settings,this.templateEngine),new Yr(this.app,this.settings,this.templateEngine)]),(0,pe.addIcon)("read-it-later",Ca),this.addRibbonIcon("read-it-later","ReadItLater: Save clipboard",async()=>{await this.processClipboard()}),this.addCommand({id:"save-clipboard-to-notice",name:"Save clipboard",callback:async()=>{await this.processClipboard()}}),this.addSettingTab(new xt(this.app,this)),this.settings.extendShareMenu&&this.registerEvent(this.app.workspace.on("receive-text-menu",(e,r)=>{e.addItem(n=>{n.setTitle("ReadItLater"),n.setIcon("read-it-later"),n.onClick(()=>this.processContent(r))})})),this.registerEvent(this.app.workspace.on("url-menu",(e,r)=>{ge(r,[Et,At])&&e.addItem(n=>{n.setTitle("ReadItLater"),n.setIcon("read-it-later"),n.onClick(()=>this.processContent(r))})}))}async loadSettings(){this.settings=Object.assign({},A,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}async processClipboard(){let e=await navigator.clipboard.readText();this.settings.batchProcess?this._processUrlsBatch(e):this._processUrlSingle(e)}async _processUrlSingle(e){let n=await(await this.parserCreator.createParser(e)).prepareNote(e);await this.writeFile(n.fileName,n.content)}async _processUrlsBatch(e){let r=(()=>{let n=e.trim().split(fr(this.settings.batchProcessDelimiter)).filter(a=>a.trim().length>0);return n.reduce((a,c)=>a&&ge(c),!0)?n:[e]})();for(let n of r)this._processUrlSingle(n)}async processContent(e){let n=await(await this.parserCreator.createParser(e)).prepareNote(e);await this.writeFile(n.fileName,n.content)}async writeFile(e,r){let n;if(e=le(e),await at(this.app.vault,this.settings.inboxDir),this.settings.inboxDir?n=(0,pe.normalizePath)(`${this.settings.inboxDir}/${e}`):n=(0,pe.normalizePath)(`/${e}`),await this.app.vault.adapter.exists(n))new pe.Notice(`${e} already exists!`);else{let s=await this.app.vault.create(n,r);(this.settings.openNewNote||this.settings.openNewNoteInNewTab)&&this.app.workspace.getLeaf(this.settings.openNewNoteInNewTab?"tab":!1).openFile(s),new pe.Notice(`${e} created successful`)}}},Ca=`
<svg fill="currentColor" stroke="currentColor" version="1.1" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
	<g>
		<path d="m365.9,144.9c-12.3,0-24.2,1.8-35.4,5.2v-114.7h-96.9l7.3-35.4h-150.2l6.8,35.4h-97.5v454.6h330.5v-102.1c11.2,3.4 23.1,5.2 35.4,5.2 68.8-0.1 124.1-56.4 124.1-124.1 0-67.8-55.3-124.1-124.1-124.1zm-150.1-124l-10.4,50h-79.2l-9.4-50h99zm93.8,448.2h-288.7v-412.8h80.7l6.8,35.4h113.6l7.3-35.4h80.3v102.2c-27.3,14-48.8,37.9-59.7,66.7h-200.9v20.8h195c-1.4,7.4-2.2,15.1-2.2,22.9 0,13.4 2.2,26.4 6.2,38.6h-199v20.9h208.1c12,21.8 30.3,39.7 52.5,51.1v89.6zm56.3-98c-57.3,0-103.2-46.9-103.2-103.2s46.9-103.2 103.2-103.2c57.3,0 103.2,46.9 103.2,103.2s-45.8,103.2-103.2,103.2z"/>
		<polygon points="426.4,223.1 346.1,303.4 313.8,271.1 299.2,285.7 346.1,332.6 441,237.7   "/>
		<rect width="233.5" x="49" y="143.9" height="20.9"/>
		<rect width="233.5" x="49" y="388.9" height="20.9"/>
	</g>
</svg>`;
/*! Bundled license information:

dompurify/dist/purify.js:
  (*! @license DOMPurify 2.5.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.5.6/LICENSE *)
*/

/* nosourcemap */