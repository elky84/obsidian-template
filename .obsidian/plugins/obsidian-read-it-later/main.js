/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var In=Object.create;var lt=Object.defineProperty;var Mn=Object.getOwnPropertyDescriptor;var On=Object.getOwnPropertyNames;var Fn=Object.getPrototypeOf,Un=Object.prototype.hasOwnProperty;var jn=(i,t,e)=>t in i?lt(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var We=(i,t)=>()=>(t||i((t={exports:{}}).exports,t),t.exports),Hn=(i,t)=>{for(var e in t)lt(i,e,{get:t[e],enumerable:!0})},pa=(i,t,e,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of On(t))!Un.call(i,n)&&n!==e&&lt(i,n,{get:()=>t[n],enumerable:!(a=Mn(t,n))||a.enumerable});return i};var St=(i,t,e)=>(e=i!=null?In(Fn(i)):{},pa(t||!i||!i.__esModule?lt(e,"default",{value:i,enumerable:!0}):e,i)),zn=i=>pa(lt({},"__esModule",{value:!0}),i);var L=(i,t,e)=>jn(i,typeof t!="symbol"?t+"":t,e);var Na=We(K=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0});K.toSeconds=K.end=K.parse=K.pattern=void 0;var Ye="\\d+",ui="".concat(Ye,"(?:[\\.,]").concat(Ye,")?"),Kn="(".concat(Ye,"Y)?(").concat(Ye,"M)?(").concat(Ye,"W)?(").concat(Ye,"D)?"),Jn="T(".concat(ui,"H)?(").concat(ui,"M)?(").concat(ui,"S)?"),Zn="P(?:".concat(Kn,"(?:").concat(Jn,")?)"),Qn=["years","months","weeks","days","hours","minutes","seconds"],wa=Object.freeze({years:0,months:0,weeks:0,days:0,hours:0,minutes:0,seconds:0});K.pattern=new RegExp(Zn);var er=function(i){var t=i.replace(/,/g,".").match(K.pattern);if(!t)throw new RangeError("invalid duration: ".concat(i));var e=t.slice(1);if(e.filter(function(a){return a!=null}).length===0)throw new RangeError("invalid duration: ".concat(i));if(e.filter(function(a){return/\./.test(a||"")}).length>1)throw new RangeError("only the smallest unit can be fractional");return e.reduce(function(a,n,r){return a[Qn[r]]=parseFloat(n||"0")||0,a},{})};K.parse=er;var tr=function(i,t){t===void 0&&(t=new Date);var e=Object.assign({},wa,i),a=t.getTime(),n=new Date(a);n.setFullYear(n.getFullYear()+e.years),n.setMonth(n.getMonth()+e.months),n.setDate(n.getDate()+e.days);var r=e.hours*3600*1e3,s=e.minutes*60*1e3;return n.setMilliseconds(n.getMilliseconds()+e.seconds*1e3+r+s),n.setDate(n.getDate()+e.weeks*7),n};K.end=tr;var ir=function(i,t){t===void 0&&(t=new Date);var e=Object.assign({},wa,i),a=t.getTime(),n=new Date(a),r=(0,K.end)(e,n),s=t.getTimezoneOffset(),p=r.getTimezoneOffset(),l=(s-p)*60,c=(r.getTime()-n.getTime())/1e3;return c+l};K.toSeconds=ir;K.default={end:K.end,toSeconds:K.toSeconds,pattern:K.pattern,parse:K.parse}});var Si=We((Ai,_i)=>{(function(i,t){typeof Ai=="object"&&typeof _i!="undefined"?_i.exports=t():typeof define=="function"&&define.amd?define(t):(i=typeof globalThis!="undefined"?globalThis:i||self,i.DOMPurify=t())})(Ai,function(){"use strict";function i(h){"@babel/helpers - typeof";return i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},i(h)}function t(h,f){return t=Object.setPrototypeOf||function(_,U){return _.__proto__=U,_},t(h,f)}function e(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(h){return!1}}function a(h,f,N){return e()?a=Reflect.construct:a=function(U,re,ne){var me=[null];me.push.apply(me,re);var Ae=Function.bind.apply(U,me),nt=new Ae;return ne&&t(nt,ne.prototype),nt},a.apply(null,arguments)}function n(h){return r(h)||s(h)||p(h)||c()}function r(h){if(Array.isArray(h))return l(h)}function s(h){if(typeof Symbol!="undefined"&&h[Symbol.iterator]!=null||h["@@iterator"]!=null)return Array.from(h)}function p(h,f){if(h){if(typeof h=="string")return l(h,f);var N=Object.prototype.toString.call(h).slice(8,-1);if(N==="Object"&&h.constructor&&(N=h.constructor.name),N==="Map"||N==="Set")return Array.from(h);if(N==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(N))return l(h,f)}}function l(h,f){(f==null||f>h.length)&&(f=h.length);for(var N=0,_=new Array(f);N<f;N++)_[N]=h[N];return _}function c(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u=Object.hasOwnProperty,x=Object.setPrototypeOf,D=Object.isFrozen,T=Object.getPrototypeOf,k=Object.getOwnPropertyDescriptor,E=Object.freeze,S=Object.seal,C=Object.create,H=typeof Reflect!="undefined"&&Reflect,z=H.apply,b=H.construct;z||(z=function(f,N,_){return f.apply(N,_)}),E||(E=function(f){return f}),S||(S=function(f){return f}),b||(b=function(f,N){return a(f,n(N))});var Y=te(Array.prototype.forEach),w=te(Array.prototype.pop),V=te(Array.prototype.push),ge=te(String.prototype.toLowerCase),Ne=te(String.prototype.toString),Pe=te(String.prototype.match),ee=te(String.prototype.replace),Ze=te(String.prototype.indexOf),Ht=te(String.prototype.trim),O=te(RegExp.prototype.test),F=Qe(TypeError);function te(h){return function(f){for(var N=arguments.length,_=new Array(N>1?N-1:0),U=1;U<N;U++)_[U-1]=arguments[U];return z(h,f,_)}}function Qe(h){return function(){for(var f=arguments.length,N=new Array(f),_=0;_<f;_++)N[_]=arguments[_];return b(h,N)}}function A(h,f,N){var _;N=(_=N)!==null&&_!==void 0?_:ge,x&&x(h,null);for(var U=f.length;U--;){var re=f[U];if(typeof re=="string"){var ne=N(re);ne!==re&&(D(f)||(f[U]=ne),re=ne)}h[re]=!0}return h}function pe(h){var f=C(null),N;for(N in h)z(u,h,[N])===!0&&(f[N]=h[N]);return f}function P(h,f){for(;h!==null;){var N=k(h,f);if(N){if(N.get)return te(N.get);if(typeof N.value=="function")return te(N.value)}h=T(h)}function _(U){return console.warn("fallback value for",U),null}return _}var xe=E(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Ie=E(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Me=E(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),ft=E(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Ee=E(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),Oe=E(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Fe=E(["#text"]),ye=E(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),et=E(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),tt=E(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ie=E(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),ce=S(/\{\{[\w\W]*|[\w\W]*\}\}/gm),vt=S(/<%[\w\W]*|[\w\W]*%>/gm),Ue=S(/\${[\w\W]*}/gm),he=S(/^data-[\-\w.\u00B7-\uFFFF]/),it=S(/^aria-[\-\w]+$/),at=S(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),rn=S(/^(?:\w+script|data):/i),sn=S(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),on=S(/^html$/i),ln=S(/^[a-z][.\w]*(-[.\w]+)+$/i),pn=function(){return typeof window=="undefined"?null:window},cn=function(f,N){if(i(f)!=="object"||typeof f.createPolicy!="function")return null;var _=null,U="data-tt-policy-suffix";N.currentScript&&N.currentScript.hasAttribute(U)&&(_=N.currentScript.getAttribute(U));var re="dompurify"+(_?"#"+_:"");try{return f.createPolicy(re,{createHTML:function(me){return me},createScriptURL:function(me){return me}})}catch(ne){return console.warn("TrustedTypes policy "+re+" could not be created."),null}};function Ui(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:pn(),f=function(o){return Ui(o)};if(f.version="2.5.6",f.removed=[],!h||!h.document||h.document.nodeType!==9)return f.isSupported=!1,f;var N=h.document,_=h.document,U=h.DocumentFragment,re=h.HTMLTemplateElement,ne=h.Node,me=h.Element,Ae=h.NodeFilter,nt=h.NamedNodeMap,dn=nt===void 0?h.NamedNodeMap||h.MozNamedAttrMap:nt,un=h.HTMLFormElement,gn=h.DOMParser,bt=h.trustedTypes,xt=me.prototype,hn=P(xt,"cloneNode"),fn=P(xt,"nextSibling"),vn=P(xt,"childNodes"),zt=P(xt,"parentNode");if(typeof re=="function"){var Vt=_.createElement("template");Vt.content&&Vt.content.ownerDocument&&(_=Vt.content.ownerDocument)}var le=cn(bt,N),Bt=le?le.createHTML(""):"",yt=_,$t=yt.implementation,bn=yt.createNodeIterator,xn=yt.createDocumentFragment,yn=yt.getElementsByTagName,Tn=N.importNode,ji={};try{ji=pe(_).documentMode?_.documentMode:{}}catch(y){}var de={};f.isSupported=typeof zt=="function"&&$t&&$t.createHTMLDocument!==void 0&&ji!==9;var Wt=ce,Gt=vt,qt=Ue,wn=he,Nn=it,En=rn,Hi=sn,An=ln,Yt=at,$=null,zi=A({},[].concat(n(xe),n(Ie),n(Me),n(Ee),n(Fe))),W=null,Vi=A({},[].concat(n(ye),n(et),n(tt),n(ie))),I=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),rt=null,Xt=null,Bi=!0,Kt=!0,$i=!1,Wi=!0,je=!1,Jt=!0,_e=!1,Zt=!1,Qt=!1,He=!1,Tt=!1,wt=!1,Gi=!0,qi=!1,_n="user-content-",ei=!0,st=!1,ze={},Ve=null,Yi=A({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Xi=null,Ki=A({},["audio","video","img","source","image","track"]),ti=null,Ji=A({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Nt="http://www.w3.org/1998/Math/MathML",Et="http://www.w3.org/2000/svg",fe="http://www.w3.org/1999/xhtml",Be=fe,ii=!1,ai=null,Sn=A({},[Nt,Et,fe],Ne),Se,Dn=["application/xhtml+xml","text/html"],kn="text/html",G,$e=null,Cn=_.createElement("form"),Zi=function(o){return o instanceof RegExp||o instanceof Function},ni=function(o){$e&&$e===o||((!o||i(o)!=="object")&&(o={}),o=pe(o),Se=Dn.indexOf(o.PARSER_MEDIA_TYPE)===-1?Se=kn:Se=o.PARSER_MEDIA_TYPE,G=Se==="application/xhtml+xml"?Ne:ge,$="ALLOWED_TAGS"in o?A({},o.ALLOWED_TAGS,G):zi,W="ALLOWED_ATTR"in o?A({},o.ALLOWED_ATTR,G):Vi,ai="ALLOWED_NAMESPACES"in o?A({},o.ALLOWED_NAMESPACES,Ne):Sn,ti="ADD_URI_SAFE_ATTR"in o?A(pe(Ji),o.ADD_URI_SAFE_ATTR,G):Ji,Xi="ADD_DATA_URI_TAGS"in o?A(pe(Ki),o.ADD_DATA_URI_TAGS,G):Ki,Ve="FORBID_CONTENTS"in o?A({},o.FORBID_CONTENTS,G):Yi,rt="FORBID_TAGS"in o?A({},o.FORBID_TAGS,G):{},Xt="FORBID_ATTR"in o?A({},o.FORBID_ATTR,G):{},ze="USE_PROFILES"in o?o.USE_PROFILES:!1,Bi=o.ALLOW_ARIA_ATTR!==!1,Kt=o.ALLOW_DATA_ATTR!==!1,$i=o.ALLOW_UNKNOWN_PROTOCOLS||!1,Wi=o.ALLOW_SELF_CLOSE_IN_ATTR!==!1,je=o.SAFE_FOR_TEMPLATES||!1,Jt=o.SAFE_FOR_XML!==!1,_e=o.WHOLE_DOCUMENT||!1,He=o.RETURN_DOM||!1,Tt=o.RETURN_DOM_FRAGMENT||!1,wt=o.RETURN_TRUSTED_TYPE||!1,Qt=o.FORCE_BODY||!1,Gi=o.SANITIZE_DOM!==!1,qi=o.SANITIZE_NAMED_PROPS||!1,ei=o.KEEP_CONTENT!==!1,st=o.IN_PLACE||!1,Yt=o.ALLOWED_URI_REGEXP||Yt,Be=o.NAMESPACE||fe,I=o.CUSTOM_ELEMENT_HANDLING||{},o.CUSTOM_ELEMENT_HANDLING&&Zi(o.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(I.tagNameCheck=o.CUSTOM_ELEMENT_HANDLING.tagNameCheck),o.CUSTOM_ELEMENT_HANDLING&&Zi(o.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(I.attributeNameCheck=o.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),o.CUSTOM_ELEMENT_HANDLING&&typeof o.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(I.allowCustomizedBuiltInElements=o.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),je&&(Kt=!1),Tt&&(He=!0),ze&&($=A({},n(Fe)),W=[],ze.html===!0&&(A($,xe),A(W,ye)),ze.svg===!0&&(A($,Ie),A(W,et),A(W,ie)),ze.svgFilters===!0&&(A($,Me),A(W,et),A(W,ie)),ze.mathMl===!0&&(A($,Ee),A(W,tt),A(W,ie))),o.ADD_TAGS&&($===zi&&($=pe($)),A($,o.ADD_TAGS,G)),o.ADD_ATTR&&(W===Vi&&(W=pe(W)),A(W,o.ADD_ATTR,G)),o.ADD_URI_SAFE_ATTR&&A(ti,o.ADD_URI_SAFE_ATTR,G),o.FORBID_CONTENTS&&(Ve===Yi&&(Ve=pe(Ve)),A(Ve,o.FORBID_CONTENTS,G)),ei&&($["#text"]=!0),_e&&A($,["html","head","body"]),$.table&&(A($,["tbody"]),delete rt.tbody),E&&E(o),$e=o)},Qi=A({},["mi","mo","mn","ms","mtext"]),ea=A({},["foreignobject","annotation-xml"]),Rn=A({},["title","style","font","a","script"]),At=A({},Ie);A(At,Me),A(At,ft);var ri=A({},Ee);A(ri,Oe);var Ln=function(o){var m=zt(o);(!m||!m.tagName)&&(m={namespaceURI:Be,tagName:"template"});var g=ge(o.tagName),R=ge(m.tagName);return ai[o.namespaceURI]?o.namespaceURI===Et?m.namespaceURI===fe?g==="svg":m.namespaceURI===Nt?g==="svg"&&(R==="annotation-xml"||Qi[R]):!!At[g]:o.namespaceURI===Nt?m.namespaceURI===fe?g==="math":m.namespaceURI===Et?g==="math"&&ea[R]:!!ri[g]:o.namespaceURI===fe?m.namespaceURI===Et&&!ea[R]||m.namespaceURI===Nt&&!Qi[R]?!1:!ri[g]&&(Rn[g]||!At[g]):!!(Se==="application/xhtml+xml"&&ai[o.namespaceURI]):!1},se=function(o){V(f.removed,{element:o});try{o.parentNode.removeChild(o)}catch(m){try{o.outerHTML=Bt}catch(g){o.remove()}}},_t=function(o,m){try{V(f.removed,{attribute:m.getAttributeNode(o),from:m})}catch(g){V(f.removed,{attribute:null,from:m})}if(m.removeAttribute(o),o==="is"&&!W[o])if(He||Tt)try{se(m)}catch(g){}else try{m.setAttribute(o,"")}catch(g){}},ta=function(o){var m,g;if(Qt)o="<remove></remove>"+o;else{var R=Pe(o,/^[\r\n\t ]+/);g=R&&R[0]}Se==="application/xhtml+xml"&&Be===fe&&(o='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+o+"</body></html>");var ae=le?le.createHTML(o):o;if(Be===fe)try{m=new gn().parseFromString(ae,Se)}catch(X){}if(!m||!m.documentElement){m=$t.createDocument(Be,"template",null);try{m.documentElement.innerHTML=ii?Bt:ae}catch(X){}}var J=m.body||m.documentElement;return o&&g&&J.insertBefore(_.createTextNode(g),J.childNodes[0]||null),Be===fe?yn.call(m,_e?"html":"body")[0]:_e?m.documentElement:J},ia=function(o){return bn.call(o.ownerDocument||o,o,Ae.SHOW_ELEMENT|Ae.SHOW_COMMENT|Ae.SHOW_TEXT|Ae.SHOW_PROCESSING_INSTRUCTION|Ae.SHOW_CDATA_SECTION,null,!1)},aa=function(o){return o instanceof un&&(typeof o.nodeName!="string"||typeof o.textContent!="string"||typeof o.removeChild!="function"||!(o.attributes instanceof dn)||typeof o.removeAttribute!="function"||typeof o.setAttribute!="function"||typeof o.namespaceURI!="string"||typeof o.insertBefore!="function"||typeof o.hasChildNodes!="function")},ot=function(o){return i(ne)==="object"?o instanceof ne:o&&i(o)==="object"&&typeof o.nodeType=="number"&&typeof o.nodeName=="string"},ve=function(o,m,g){de[o]&&Y(de[o],function(R){R.call(f,m,g,$e)})},na=function(o){var m;if(ve("beforeSanitizeElements",o,null),aa(o)||O(/[\u0080-\uFFFF]/,o.nodeName))return se(o),!0;var g=G(o.nodeName);if(ve("uponSanitizeElement",o,{tagName:g,allowedTags:$}),o.hasChildNodes()&&!ot(o.firstElementChild)&&(!ot(o.content)||!ot(o.content.firstElementChild))&&O(/<[/\w]/g,o.innerHTML)&&O(/<[/\w]/g,o.textContent)||g==="select"&&O(/<template/i,o.innerHTML)||o.nodeType===7||Jt&&o.nodeType===8&&O(/<[/\w]/g,o.data))return se(o),!0;if(!$[g]||rt[g]){if(!rt[g]&&sa(g)&&(I.tagNameCheck instanceof RegExp&&O(I.tagNameCheck,g)||I.tagNameCheck instanceof Function&&I.tagNameCheck(g)))return!1;if(ei&&!Ve[g]){var R=zt(o)||o.parentNode,ae=vn(o)||o.childNodes;if(ae&&R)for(var J=ae.length,X=J-1;X>=0;--X){var De=hn(ae[X],!0);De.__removalCount=(o.__removalCount||0)+1,R.insertBefore(De,fn(o))}}return se(o),!0}return o instanceof me&&!Ln(o)||(g==="noscript"||g==="noembed"||g==="noframes")&&O(/<\/no(script|embed|frames)/i,o.innerHTML)?(se(o),!0):(je&&o.nodeType===3&&(m=o.textContent,m=ee(m,Wt," "),m=ee(m,Gt," "),m=ee(m,qt," "),o.textContent!==m&&(V(f.removed,{element:o.cloneNode()}),o.textContent=m)),ve("afterSanitizeElements",o,null),!1)},ra=function(o,m,g){if(Gi&&(m==="id"||m==="name")&&(g in _||g in Cn))return!1;if(!(Kt&&!Xt[m]&&O(wn,m))){if(!(Bi&&O(Nn,m))){if(!W[m]||Xt[m]){if(!(sa(o)&&(I.tagNameCheck instanceof RegExp&&O(I.tagNameCheck,o)||I.tagNameCheck instanceof Function&&I.tagNameCheck(o))&&(I.attributeNameCheck instanceof RegExp&&O(I.attributeNameCheck,m)||I.attributeNameCheck instanceof Function&&I.attributeNameCheck(m))||m==="is"&&I.allowCustomizedBuiltInElements&&(I.tagNameCheck instanceof RegExp&&O(I.tagNameCheck,g)||I.tagNameCheck instanceof Function&&I.tagNameCheck(g))))return!1}else if(!ti[m]){if(!O(Yt,ee(g,Hi,""))){if(!((m==="src"||m==="xlink:href"||m==="href")&&o!=="script"&&Ze(g,"data:")===0&&Xi[o])){if(!($i&&!O(En,ee(g,Hi,"")))){if(g)return!1}}}}}}return!0},sa=function(o){return o!=="annotation-xml"&&Pe(o,An)},oa=function(o){var m,g,R,ae;ve("beforeSanitizeAttributes",o,null);var J=o.attributes;if(J){var X={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:W};for(ae=J.length;ae--;){m=J[ae];var De=m,B=De.name,si=De.namespaceURI;if(g=B==="value"?m.value:Ht(m.value),R=G(B),X.attrName=R,X.attrValue=g,X.keepAttr=!0,X.forceKeepAttr=void 0,ve("uponSanitizeAttribute",o,X),g=X.attrValue,Jt&&O(/((--!?|])>)|<\/(style|title)/i,g)){_t(B,o);continue}if(!X.forceKeepAttr&&(_t(B,o),!!X.keepAttr)){if(!Wi&&O(/\/>/i,g)){_t(B,o);continue}je&&(g=ee(g,Wt," "),g=ee(g,Gt," "),g=ee(g,qt," "));var la=G(o.nodeName);if(ra(la,R,g)){if(qi&&(R==="id"||R==="name")&&(_t(B,o),g=_n+g),le&&i(bt)==="object"&&typeof bt.getAttributeType=="function"&&!si)switch(bt.getAttributeType(la,R)){case"TrustedHTML":{g=le.createHTML(g);break}case"TrustedScriptURL":{g=le.createScriptURL(g);break}}try{si?o.setAttributeNS(si,B,g):o.setAttribute(B,g),aa(o)?se(o):w(f.removed)}catch(Vr){}}}}ve("afterSanitizeAttributes",o,null)}},Pn=function y(o){var m,g=ia(o);for(ve("beforeSanitizeShadowDOM",o,null);m=g.nextNode();)ve("uponSanitizeShadowNode",m,null),!na(m)&&(m.content instanceof U&&y(m.content),oa(m));ve("afterSanitizeShadowDOM",o,null)};return f.sanitize=function(y){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},m,g,R,ae,J;if(ii=!y,ii&&(y="<!-->"),typeof y!="string"&&!ot(y))if(typeof y.toString=="function"){if(y=y.toString(),typeof y!="string")throw F("dirty is not a string, aborting")}else throw F("toString is not a function");if(!f.isSupported){if(i(h.toStaticHTML)==="object"||typeof h.toStaticHTML=="function"){if(typeof y=="string")return h.toStaticHTML(y);if(ot(y))return h.toStaticHTML(y.outerHTML)}return y}if(Zt||ni(o),f.removed=[],typeof y=="string"&&(st=!1),st){if(y.nodeName){var X=G(y.nodeName);if(!$[X]||rt[X])throw F("root node is forbidden and cannot be sanitized in-place")}}else if(y instanceof ne)m=ta("<!---->"),g=m.ownerDocument.importNode(y,!0),g.nodeType===1&&g.nodeName==="BODY"||g.nodeName==="HTML"?m=g:m.appendChild(g);else{if(!He&&!je&&!_e&&y.indexOf("<")===-1)return le&&wt?le.createHTML(y):y;if(m=ta(y),!m)return He?null:wt?Bt:""}m&&Qt&&se(m.firstChild);for(var De=ia(st?y:m);R=De.nextNode();)R.nodeType===3&&R===ae||na(R)||(R.content instanceof U&&Pn(R.content),oa(R),ae=R);if(ae=null,st)return y;if(He){if(Tt)for(J=xn.call(m.ownerDocument);m.firstChild;)J.appendChild(m.firstChild);else J=m;return(W.shadowroot||W.shadowrootmod)&&(J=Tn.call(N,J,!0)),J}var B=_e?m.outerHTML:m.innerHTML;return _e&&$["!doctype"]&&m.ownerDocument&&m.ownerDocument.doctype&&m.ownerDocument.doctype.name&&O(on,m.ownerDocument.doctype.name)&&(B="<!DOCTYPE "+m.ownerDocument.doctype.name+`>
`+B),je&&(B=ee(B,Wt," "),B=ee(B,Gt," "),B=ee(B,qt," ")),le&&wt?le.createHTML(B):B},f.setConfig=function(y){ni(y),Zt=!0},f.clearConfig=function(){$e=null,Zt=!1},f.isValidAttribute=function(y,o,m){$e||ni({});var g=G(y),R=G(o);return ra(g,R,m)},f.addHook=function(y,o){typeof o=="function"&&(de[y]=de[y]||[],V(de[y],o))},f.removeHook=function(y){if(de[y])return w(de[y])},f.removeHooks=function(y){de[y]&&(de[y]=[])},f.removeAllHooks=function(){de={}},f}var mn=Ui();return mn})});var Di=We((po,Wa)=>{Wa.exports=window.DOMPurify||(window.DOMPurify=Si().default||Si())});var Ya=We((vo,Ri)=>{function qa(i,t){if(t&&t.documentElement)i=t,t=arguments[2];else if(!i||!i.documentElement)throw new Error("First argument to Readability constructor should be a document object.");if(t=t||{},this._doc=i,this._docJSDOMParser=this._doc.firstChild.__JSDOMParser__,this._articleTitle=null,this._articleByline=null,this._articleDir=null,this._articleSiteName=null,this._attempts=[],this._debug=!!t.debug,this._maxElemsToParse=t.maxElemsToParse||this.DEFAULT_MAX_ELEMS_TO_PARSE,this._nbTopCandidates=t.nbTopCandidates||this.DEFAULT_N_TOP_CANDIDATES,this._charThreshold=t.charThreshold||this.DEFAULT_CHAR_THRESHOLD,this._classesToPreserve=this.CLASSES_TO_PRESERVE.concat(t.classesToPreserve||[]),this._keepClasses=!!t.keepClasses,this._serializer=t.serializer||function(e){return e.innerHTML},this._disableJSONLD=!!t.disableJSONLD,this._allowedVideoRegex=t.allowedVideoRegex||this.REGEXPS.videos,this._flags=this.FLAG_STRIP_UNLIKELYS|this.FLAG_WEIGHT_CLASSES|this.FLAG_CLEAN_CONDITIONALLY,this._debug){let e=function(a){if(a.nodeType==a.TEXT_NODE)return`${a.nodeName} ("${a.textContent}")`;let n=Array.from(a.attributes||[],function(r){return`${r.name}="${r.value}"`}).join(" ");return`<${a.localName} ${n}>`};this.log=function(){if(typeof console!="undefined"){let n=Array.from(arguments,r=>r&&r.nodeType==this.ELEMENT_NODE?e(r):r);n.unshift("Reader: (Readability)"),console.log.apply(console,n)}else if(typeof dump!="undefined"){var a=Array.prototype.map.call(arguments,function(n){return n&&n.nodeName?e(n):n}).join(" ");dump("Reader: (Readability) "+a+`
`)}}}else this.log=function(){}}qa.prototype={FLAG_STRIP_UNLIKELYS:1,FLAG_WEIGHT_CLASSES:2,FLAG_CLEAN_CONDITIONALLY:4,ELEMENT_NODE:1,TEXT_NODE:3,DEFAULT_MAX_ELEMS_TO_PARSE:0,DEFAULT_N_TOP_CANDIDATES:5,DEFAULT_TAGS_TO_SCORE:"section,h2,h3,h4,h5,h6,p,td,pre".toUpperCase().split(","),DEFAULT_CHAR_THRESHOLD:500,REGEXPS:{unlikelyCandidates:/-ad-|ai2html|banner|breadcrumbs|combx|comment|community|cover-wrap|disqus|extra|footer|gdpr|header|legends|menu|related|remark|replies|rss|shoutbox|sidebar|skyscraper|social|sponsor|supplemental|ad-break|agegate|pagination|pager|popup|yom-remote/i,okMaybeItsACandidate:/and|article|body|column|content|main|shadow/i,positive:/article|body|content|entry|hentry|h-entry|main|page|pagination|post|text|blog|story/i,negative:/-ad-|hidden|^hid$| hid$| hid |^hid |banner|combx|comment|com-|contact|foot|footer|footnote|gdpr|masthead|media|meta|outbrain|promo|related|scroll|share|shoutbox|sidebar|skyscraper|sponsor|shopping|tags|tool|widget/i,extraneous:/print|archive|comment|discuss|e[\-]?mail|share|reply|all|login|sign|single|utility/i,byline:/byline|author|dateline|writtenby|p-author/i,replaceFonts:/<(\/?)font[^>]*>/gi,normalize:/\s{2,}/g,videos:/\/\/(www\.)?((dailymotion|youtube|youtube-nocookie|player\.vimeo|v\.qq)\.com|(archive|upload\.wikimedia)\.org|player\.twitch\.tv)/i,shareElements:/(\b|_)(share|sharedaddy)(\b|_)/i,nextLink:/(next|weiter|continue|>([^\|]|$)|»([^\|]|$))/i,prevLink:/(prev|earl|old|new|<|«)/i,tokenize:/\W+/g,whitespace:/^\s*$/,hasContent:/\S$/,hashUrl:/^#.+/,srcsetUrl:/(\S+)(\s+[\d.]+[xw])?(\s*(?:,|$))/g,b64DataUrl:/^data:\s*([^\s;,]+)\s*;\s*base64\s*,/i,commas:/\u002C|\u060C|\uFE50|\uFE10|\uFE11|\u2E41|\u2E34|\u2E32|\uFF0C/g,jsonLdArticleTypes:/^Article|AdvertiserContentArticle|NewsArticle|AnalysisNewsArticle|AskPublicNewsArticle|BackgroundNewsArticle|OpinionNewsArticle|ReportageNewsArticle|ReviewNewsArticle|Report|SatiricalArticle|ScholarlyArticle|MedicalScholarlyArticle|SocialMediaPosting|BlogPosting|LiveBlogPosting|DiscussionForumPosting|TechArticle|APIReference$/},UNLIKELY_ROLES:["menu","menubar","complementary","navigation","alert","alertdialog","dialog"],DIV_TO_P_ELEMS:new Set(["BLOCKQUOTE","DL","DIV","IMG","OL","P","PRE","TABLE","UL"]),ALTER_TO_DIV_EXCEPTIONS:["DIV","ARTICLE","SECTION","P"],PRESENTATIONAL_ATTRIBUTES:["align","background","bgcolor","border","cellpadding","cellspacing","frame","hspace","rules","style","valign","vspace"],DEPRECATED_SIZE_ATTRIBUTE_ELEMS:["TABLE","TH","TD","HR","PRE"],PHRASING_ELEMS:["ABBR","AUDIO","B","BDO","BR","BUTTON","CITE","CODE","DATA","DATALIST","DFN","EM","EMBED","I","IMG","INPUT","KBD","LABEL","MARK","MATH","METER","NOSCRIPT","OBJECT","OUTPUT","PROGRESS","Q","RUBY","SAMP","SCRIPT","SELECT","SMALL","SPAN","STRONG","SUB","SUP","TEXTAREA","TIME","VAR","WBR"],CLASSES_TO_PRESERVE:["page"],HTML_ESCAPE_MAP:{lt:"<",gt:">",amp:"&",quot:'"',apos:"'"},_postProcessContent:function(i){this._fixRelativeUris(i),this._simplifyNestedElements(i),this._keepClasses||this._cleanClasses(i)},_removeNodes:function(i,t){if(this._docJSDOMParser&&i._isLiveNodeList)throw new Error("Do not pass live node lists to _removeNodes");for(var e=i.length-1;e>=0;e--){var a=i[e],n=a.parentNode;n&&(!t||t.call(this,a,e,i))&&n.removeChild(a)}},_replaceNodeTags:function(i,t){if(this._docJSDOMParser&&i._isLiveNodeList)throw new Error("Do not pass live node lists to _replaceNodeTags");for(let e of i)this._setNodeTag(e,t)},_forEachNode:function(i,t){Array.prototype.forEach.call(i,t,this)},_findNode:function(i,t){return Array.prototype.find.call(i,t,this)},_someNode:function(i,t){return Array.prototype.some.call(i,t,this)},_everyNode:function(i,t){return Array.prototype.every.call(i,t,this)},_concatNodeLists:function(){var i=Array.prototype.slice,t=i.call(arguments),e=t.map(function(a){return i.call(a)});return Array.prototype.concat.apply([],e)},_getAllNodesWithTag:function(i,t){return i.querySelectorAll?i.querySelectorAll(t.join(",")):[].concat.apply([],t.map(function(e){var a=i.getElementsByTagName(e);return Array.isArray(a)?a:Array.from(a)}))},_cleanClasses:function(i){var t=this._classesToPreserve,e=(i.getAttribute("class")||"").split(/\s+/).filter(function(a){return t.indexOf(a)!=-1}).join(" ");for(e?i.setAttribute("class",e):i.removeAttribute("class"),i=i.firstElementChild;i;i=i.nextElementSibling)this._cleanClasses(i)},_fixRelativeUris:function(i){var t=this._doc.baseURI,e=this._doc.documentURI;function a(s){if(t==e&&s.charAt(0)=="#")return s;try{return new URL(s,t).href}catch(p){}return s}var n=this._getAllNodesWithTag(i,["a"]);this._forEachNode(n,function(s){var p=s.getAttribute("href");if(p)if(p.indexOf("javascript:")===0)if(s.childNodes.length===1&&s.childNodes[0].nodeType===this.TEXT_NODE){var l=this._doc.createTextNode(s.textContent);s.parentNode.replaceChild(l,s)}else{for(var c=this._doc.createElement("span");s.firstChild;)c.appendChild(s.firstChild);s.parentNode.replaceChild(c,s)}else s.setAttribute("href",a(p))});var r=this._getAllNodesWithTag(i,["img","picture","figure","video","audio","source"]);this._forEachNode(r,function(s){var p=s.getAttribute("src"),l=s.getAttribute("poster"),c=s.getAttribute("srcset");if(p&&s.setAttribute("src",a(p)),l&&s.setAttribute("poster",a(l)),c){var u=c.replace(this.REGEXPS.srcsetUrl,function(x,D,T,k){return a(D)+(T||"")+k});s.setAttribute("srcset",u)}})},_simplifyNestedElements:function(i){for(var t=i;t;){if(t.parentNode&&["DIV","SECTION"].includes(t.tagName)&&!(t.id&&t.id.startsWith("readability"))){if(this._isElementWithoutContent(t)){t=this._removeAndGetNext(t);continue}else if(this._hasSingleTagInsideElement(t,"DIV")||this._hasSingleTagInsideElement(t,"SECTION")){for(var e=t.children[0],a=0;a<t.attributes.length;a++)e.setAttribute(t.attributes[a].name,t.attributes[a].value);t.parentNode.replaceChild(e,t),t=e;continue}}t=this._getNextNode(t)}},_getArticleTitle:function(){var i=this._doc,t="",e="";try{t=e=i.title.trim(),typeof t!="string"&&(t=e=this._getInnerText(i.getElementsByTagName("title")[0]))}catch(u){}var a=!1;function n(u){return u.split(/\s+/).length}if(/ [\|\-\\\/>»] /.test(t))a=/ [\\\/>»] /.test(t),t=e.replace(/(.*)[\|\-\\\/>»] .*/gi,"$1"),n(t)<3&&(t=e.replace(/[^\|\-\\\/>»]*[\|\-\\\/>»](.*)/gi,"$1"));else if(t.indexOf(": ")!==-1){var r=this._concatNodeLists(i.getElementsByTagName("h1"),i.getElementsByTagName("h2")),s=t.trim(),p=this._someNode(r,function(u){return u.textContent.trim()===s});p||(t=e.substring(e.lastIndexOf(":")+1),n(t)<3?t=e.substring(e.indexOf(":")+1):n(e.substr(0,e.indexOf(":")))>5&&(t=e))}else if(t.length>150||t.length<15){var l=i.getElementsByTagName("h1");l.length===1&&(t=this._getInnerText(l[0]))}t=t.trim().replace(this.REGEXPS.normalize," ");var c=n(t);return c<=4&&(!a||c!=n(e.replace(/[\|\-\\\/>»]+/g,""))-1)&&(t=e),t},_prepDocument:function(){var i=this._doc;this._removeNodes(this._getAllNodesWithTag(i,["style"])),i.body&&this._replaceBrs(i.body),this._replaceNodeTags(this._getAllNodesWithTag(i,["font"]),"SPAN")},_nextNode:function(i){for(var t=i;t&&t.nodeType!=this.ELEMENT_NODE&&this.REGEXPS.whitespace.test(t.textContent);)t=t.nextSibling;return t},_replaceBrs:function(i){this._forEachNode(this._getAllNodesWithTag(i,["br"]),function(t){for(var e=t.nextSibling,a=!1;(e=this._nextNode(e))&&e.tagName=="BR";){a=!0;var n=e.nextSibling;e.parentNode.removeChild(e),e=n}if(a){var r=this._doc.createElement("p");for(t.parentNode.replaceChild(r,t),e=r.nextSibling;e;){if(e.tagName=="BR"){var s=this._nextNode(e.nextSibling);if(s&&s.tagName=="BR")break}if(!this._isPhrasingContent(e))break;var p=e.nextSibling;r.appendChild(e),e=p}for(;r.lastChild&&this._isWhitespace(r.lastChild);)r.removeChild(r.lastChild);r.parentNode.tagName==="P"&&this._setNodeTag(r.parentNode,"DIV")}})},_setNodeTag:function(i,t){if(this.log("_setNodeTag",i,t),this._docJSDOMParser)return i.localName=t.toLowerCase(),i.tagName=t.toUpperCase(),i;for(var e=i.ownerDocument.createElement(t);i.firstChild;)e.appendChild(i.firstChild);i.parentNode.replaceChild(e,i),i.readability&&(e.readability=i.readability);for(var a=0;a<i.attributes.length;a++)try{e.setAttribute(i.attributes[a].name,i.attributes[a].value)}catch(n){}return e},_prepArticle:function(i){this._cleanStyles(i),this._markDataTables(i),this._fixLazyImages(i),this._cleanConditionally(i,"form"),this._cleanConditionally(i,"fieldset"),this._clean(i,"object"),this._clean(i,"embed"),this._clean(i,"footer"),this._clean(i,"link"),this._clean(i,"aside");var t=this.DEFAULT_CHAR_THRESHOLD;this._forEachNode(i.children,function(e){this._cleanMatchedNodes(e,function(a,n){return this.REGEXPS.shareElements.test(n)&&a.textContent.length<t})}),this._clean(i,"iframe"),this._clean(i,"input"),this._clean(i,"textarea"),this._clean(i,"select"),this._clean(i,"button"),this._cleanHeaders(i),this._cleanConditionally(i,"table"),this._cleanConditionally(i,"ul"),this._cleanConditionally(i,"div"),this._replaceNodeTags(this._getAllNodesWithTag(i,["h1"]),"h2"),this._removeNodes(this._getAllNodesWithTag(i,["p"]),function(e){var a=e.getElementsByTagName("img").length,n=e.getElementsByTagName("embed").length,r=e.getElementsByTagName("object").length,s=e.getElementsByTagName("iframe").length,p=a+n+r+s;return p===0&&!this._getInnerText(e,!1)}),this._forEachNode(this._getAllNodesWithTag(i,["br"]),function(e){var a=this._nextNode(e.nextSibling);a&&a.tagName=="P"&&e.parentNode.removeChild(e)}),this._forEachNode(this._getAllNodesWithTag(i,["table"]),function(e){var a=this._hasSingleTagInsideElement(e,"TBODY")?e.firstElementChild:e;if(this._hasSingleTagInsideElement(a,"TR")){var n=a.firstElementChild;if(this._hasSingleTagInsideElement(n,"TD")){var r=n.firstElementChild;r=this._setNodeTag(r,this._everyNode(r.childNodes,this._isPhrasingContent)?"P":"DIV"),e.parentNode.replaceChild(r,e)}}})},_initializeNode:function(i){switch(i.readability={contentScore:0},i.tagName){case"DIV":i.readability.contentScore+=5;break;case"PRE":case"TD":case"BLOCKQUOTE":i.readability.contentScore+=3;break;case"ADDRESS":case"OL":case"UL":case"DL":case"DD":case"DT":case"LI":case"FORM":i.readability.contentScore-=3;break;case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":case"TH":i.readability.contentScore-=5;break}i.readability.contentScore+=this._getClassWeight(i)},_removeAndGetNext:function(i){var t=this._getNextNode(i,!0);return i.parentNode.removeChild(i),t},_getNextNode:function(i,t){if(!t&&i.firstElementChild)return i.firstElementChild;if(i.nextElementSibling)return i.nextElementSibling;do i=i.parentNode;while(i&&!i.nextElementSibling);return i&&i.nextElementSibling},_textSimilarity:function(i,t){var e=i.toLowerCase().split(this.REGEXPS.tokenize).filter(Boolean),a=t.toLowerCase().split(this.REGEXPS.tokenize).filter(Boolean);if(!e.length||!a.length)return 0;var n=a.filter(s=>!e.includes(s)),r=n.join(" ").length/a.join(" ").length;return 1-r},_checkByline:function(i,t){if(this._articleByline)return!1;if(i.getAttribute!==void 0)var e=i.getAttribute("rel"),a=i.getAttribute("itemprop");return(e==="author"||a&&a.indexOf("author")!==-1||this.REGEXPS.byline.test(t))&&this._isValidByline(i.textContent)?(this._articleByline=i.textContent.trim(),!0):!1},_getNodeAncestors:function(i,t){t=t||0;for(var e=0,a=[];i.parentNode&&(a.push(i.parentNode),!(t&&++e===t));)i=i.parentNode;return a},_grabArticle:function(i){this.log("**** grabArticle ****");var t=this._doc,e=i!==null;if(i=i||this._doc.body,!i)return this.log("No body found in document. Abort."),null;for(var a=i.innerHTML;;){this.log("Starting grabArticle loop");var n=this._flagIsActive(this.FLAG_STRIP_UNLIKELYS),r=[],s=this._doc.documentElement;let tt=!0;for(;s;){s.tagName==="HTML"&&(this._articleLang=s.getAttribute("lang"));var p=s.className+" "+s.id;if(!this._isProbablyVisible(s)){this.log("Removing hidden node - "+p),s=this._removeAndGetNext(s);continue}if(s.getAttribute("aria-modal")=="true"&&s.getAttribute("role")=="dialog"){s=this._removeAndGetNext(s);continue}if(this._checkByline(s,p)){s=this._removeAndGetNext(s);continue}if(tt&&this._headerDuplicatesTitle(s)){this.log("Removing header: ",s.textContent.trim(),this._articleTitle.trim()),tt=!1,s=this._removeAndGetNext(s);continue}if(n){if(this.REGEXPS.unlikelyCandidates.test(p)&&!this.REGEXPS.okMaybeItsACandidate.test(p)&&!this._hasAncestorTag(s,"table")&&!this._hasAncestorTag(s,"code")&&s.tagName!=="BODY"&&s.tagName!=="A"){this.log("Removing unlikely candidate - "+p),s=this._removeAndGetNext(s);continue}if(this.UNLIKELY_ROLES.includes(s.getAttribute("role"))){this.log("Removing content with role "+s.getAttribute("role")+" - "+p),s=this._removeAndGetNext(s);continue}}if((s.tagName==="DIV"||s.tagName==="SECTION"||s.tagName==="HEADER"||s.tagName==="H1"||s.tagName==="H2"||s.tagName==="H3"||s.tagName==="H4"||s.tagName==="H5"||s.tagName==="H6")&&this._isElementWithoutContent(s)){s=this._removeAndGetNext(s);continue}if(this.DEFAULT_TAGS_TO_SCORE.indexOf(s.tagName)!==-1&&r.push(s),s.tagName==="DIV"){for(var l=null,c=s.firstChild;c;){var u=c.nextSibling;if(this._isPhrasingContent(c))l!==null?l.appendChild(c):this._isWhitespace(c)||(l=t.createElement("p"),s.replaceChild(l,c),l.appendChild(c));else if(l!==null){for(;l.lastChild&&this._isWhitespace(l.lastChild);)l.removeChild(l.lastChild);l=null}c=u}if(this._hasSingleTagInsideElement(s,"P")&&this._getLinkDensity(s)<.25){var x=s.children[0];s.parentNode.replaceChild(x,s),s=x,r.push(s)}else this._hasChildBlockElement(s)||(s=this._setNodeTag(s,"P"),r.push(s))}s=this._getNextNode(s)}var D=[];this._forEachNode(r,function(ie){if(!(!ie.parentNode||typeof ie.parentNode.tagName=="undefined")){var ce=this._getInnerText(ie);if(!(ce.length<25)){var vt=this._getNodeAncestors(ie,5);if(vt.length!==0){var Ue=0;Ue+=1,Ue+=ce.split(this.REGEXPS.commas).length,Ue+=Math.min(Math.floor(ce.length/100),3),this._forEachNode(vt,function(he,it){if(!(!he.tagName||!he.parentNode||typeof he.parentNode.tagName=="undefined")){if(typeof he.readability=="undefined"&&(this._initializeNode(he),D.push(he)),it===0)var at=1;else it===1?at=2:at=it*3;he.readability.contentScore+=Ue/at}})}}}});for(var T=[],k=0,E=D.length;k<E;k+=1){var S=D[k],C=S.readability.contentScore*(1-this._getLinkDensity(S));S.readability.contentScore=C,this.log("Candidate:",S,"with score "+C);for(var H=0;H<this._nbTopCandidates;H++){var z=T[H];if(!z||C>z.readability.contentScore){T.splice(H,0,S),T.length>this._nbTopCandidates&&T.pop();break}}}var b=T[0]||null,Y=!1,w;if(b===null||b.tagName==="BODY"){for(b=t.createElement("DIV"),Y=!0;i.firstChild;)this.log("Moving child out:",i.firstChild),b.appendChild(i.firstChild);i.appendChild(b),this._initializeNode(b)}else if(b){for(var V=[],ge=1;ge<T.length;ge++)T[ge].readability.contentScore/b.readability.contentScore>=.75&&V.push(this._getNodeAncestors(T[ge]));var Ne=3;if(V.length>=Ne)for(w=b.parentNode;w.tagName!=="BODY";){for(var Pe=0,ee=0;ee<V.length&&Pe<Ne;ee++)Pe+=Number(V[ee].includes(w));if(Pe>=Ne){b=w;break}w=w.parentNode}b.readability||this._initializeNode(b),w=b.parentNode;for(var Ze=b.readability.contentScore,Ht=Ze/3;w.tagName!=="BODY";){if(!w.readability){w=w.parentNode;continue}var O=w.readability.contentScore;if(O<Ht)break;if(O>Ze){b=w;break}Ze=w.readability.contentScore,w=w.parentNode}for(w=b.parentNode;w.tagName!="BODY"&&w.children.length==1;)b=w,w=b.parentNode;b.readability||this._initializeNode(b)}var F=t.createElement("DIV");e&&(F.id="readability-content");var te=Math.max(10,b.readability.contentScore*.2);w=b.parentNode;for(var Qe=w.children,A=0,pe=Qe.length;A<pe;A++){var P=Qe[A],xe=!1;if(this.log("Looking at sibling node:",P,P.readability?"with score "+P.readability.contentScore:""),this.log("Sibling has score",P.readability?P.readability.contentScore:"Unknown"),P===b)xe=!0;else{var Ie=0;if(P.className===b.className&&b.className!==""&&(Ie+=b.readability.contentScore*.2),P.readability&&P.readability.contentScore+Ie>=te)xe=!0;else if(P.nodeName==="P"){var Me=this._getLinkDensity(P),ft=this._getInnerText(P),Ee=ft.length;(Ee>80&&Me<.25||Ee<80&&Ee>0&&Me===0&&ft.search(/\.( |$)/)!==-1)&&(xe=!0)}}xe&&(this.log("Appending node:",P),this.ALTER_TO_DIV_EXCEPTIONS.indexOf(P.nodeName)===-1&&(this.log("Altering sibling:",P,"to div."),P=this._setNodeTag(P,"DIV")),F.appendChild(P),Qe=w.children,A-=1,pe-=1)}if(this._debug&&this.log("Article content pre-prep: "+F.innerHTML),this._prepArticle(F),this._debug&&this.log("Article content post-prep: "+F.innerHTML),Y)b.id="readability-page-1",b.className="page";else{var Oe=t.createElement("DIV");for(Oe.id="readability-page-1",Oe.className="page";F.firstChild;)Oe.appendChild(F.firstChild);F.appendChild(Oe)}this._debug&&this.log("Article content after paging: "+F.innerHTML);var Fe=!0,ye=this._getInnerText(F,!0).length;if(ye<this._charThreshold)if(Fe=!1,i.innerHTML=a,this._flagIsActive(this.FLAG_STRIP_UNLIKELYS))this._removeFlag(this.FLAG_STRIP_UNLIKELYS),this._attempts.push({articleContent:F,textLength:ye});else if(this._flagIsActive(this.FLAG_WEIGHT_CLASSES))this._removeFlag(this.FLAG_WEIGHT_CLASSES),this._attempts.push({articleContent:F,textLength:ye});else if(this._flagIsActive(this.FLAG_CLEAN_CONDITIONALLY))this._removeFlag(this.FLAG_CLEAN_CONDITIONALLY),this._attempts.push({articleContent:F,textLength:ye});else{if(this._attempts.push({articleContent:F,textLength:ye}),this._attempts.sort(function(ie,ce){return ce.textLength-ie.textLength}),!this._attempts[0].textLength)return null;F=this._attempts[0].articleContent,Fe=!0}if(Fe){var et=[w,b].concat(this._getNodeAncestors(w));return this._someNode(et,function(ie){if(!ie.tagName)return!1;var ce=ie.getAttribute("dir");return ce?(this._articleDir=ce,!0):!1}),F}}},_isValidByline:function(i){return typeof i=="string"||i instanceof String?(i=i.trim(),i.length>0&&i.length<100):!1},_unescapeHtmlEntities:function(i){if(!i)return i;var t=this.HTML_ESCAPE_MAP;return i.replace(/&(quot|amp|apos|lt|gt);/g,function(e,a){return t[a]}).replace(/&#(?:x([0-9a-z]{1,4})|([0-9]{1,4}));/gi,function(e,a,n){var r=parseInt(a||n,a?16:10);return String.fromCharCode(r)})},_getJSONLD:function(i){var t=this._getAllNodesWithTag(i,["script"]),e;return this._forEachNode(t,function(a){if(!e&&a.getAttribute("type")==="application/ld+json")try{var n=a.textContent.replace(/^\s*<!\[CDATA\[|\]\]>\s*$/g,""),r=JSON.parse(n);if(!r["@context"]||!r["@context"].match(/^https?\:\/\/schema\.org$/)||(!r["@type"]&&Array.isArray(r["@graph"])&&(r=r["@graph"].find(function(c){return(c["@type"]||"").match(this.REGEXPS.jsonLdArticleTypes)})),!r||!r["@type"]||!r["@type"].match(this.REGEXPS.jsonLdArticleTypes)))return;if(e={},typeof r.name=="string"&&typeof r.headline=="string"&&r.name!==r.headline){var s=this._getArticleTitle(),p=this._textSimilarity(r.name,s)>.75,l=this._textSimilarity(r.headline,s)>.75;l&&!p?e.title=r.headline:e.title=r.name}else typeof r.name=="string"?e.title=r.name.trim():typeof r.headline=="string"&&(e.title=r.headline.trim());r.author&&(typeof r.author.name=="string"?e.byline=r.author.name.trim():Array.isArray(r.author)&&r.author[0]&&typeof r.author[0].name=="string"&&(e.byline=r.author.filter(function(c){return c&&typeof c.name=="string"}).map(function(c){return c.name.trim()}).join(", "))),typeof r.description=="string"&&(e.excerpt=r.description.trim()),r.publisher&&typeof r.publisher.name=="string"&&(e.siteName=r.publisher.name.trim()),typeof r.datePublished=="string"&&(e.datePublished=r.datePublished.trim());return}catch(c){this.log(c.message)}}),e||{}},_getArticleMetadata:function(i){var t={},e={},a=this._doc.getElementsByTagName("meta"),n=/\s*(article|dc|dcterm|og|twitter)\s*:\s*(author|creator|description|published_time|title|site_name)\s*/gi,r=/^\s*(?:(dc|dcterm|og|twitter|weibo:(article|webpage))\s*[\.:]\s*)?(author|creator|description|title|site_name)\s*$/i;return this._forEachNode(a,function(s){var p=s.getAttribute("name"),l=s.getAttribute("property"),c=s.getAttribute("content");if(c){var u=null,x=null;l&&(u=l.match(n),u&&(x=u[0].toLowerCase().replace(/\s/g,""),e[x]=c.trim())),!u&&p&&r.test(p)&&(x=p,c&&(x=x.toLowerCase().replace(/\s/g,"").replace(/\./g,":"),e[x]=c.trim()))}}),t.title=i.title||e["dc:title"]||e["dcterm:title"]||e["og:title"]||e["weibo:article:title"]||e["weibo:webpage:title"]||e.title||e["twitter:title"],t.title||(t.title=this._getArticleTitle()),t.byline=i.byline||e["dc:creator"]||e["dcterm:creator"]||e.author,t.excerpt=i.excerpt||e["dc:description"]||e["dcterm:description"]||e["og:description"]||e["weibo:article:description"]||e["weibo:webpage:description"]||e.description||e["twitter:description"],t.siteName=i.siteName||e["og:site_name"],t.publishedTime=i.datePublished||e["article:published_time"]||null,t.title=this._unescapeHtmlEntities(t.title),t.byline=this._unescapeHtmlEntities(t.byline),t.excerpt=this._unescapeHtmlEntities(t.excerpt),t.siteName=this._unescapeHtmlEntities(t.siteName),t.publishedTime=this._unescapeHtmlEntities(t.publishedTime),t},_isSingleImage:function(i){return i.tagName==="IMG"?!0:i.children.length!==1||i.textContent.trim()!==""?!1:this._isSingleImage(i.children[0])},_unwrapNoscriptImages:function(i){var t=Array.from(i.getElementsByTagName("img"));this._forEachNode(t,function(a){for(var n=0;n<a.attributes.length;n++){var r=a.attributes[n];switch(r.name){case"src":case"srcset":case"data-src":case"data-srcset":return}if(/\.(jpg|jpeg|png|webp)/i.test(r.value))return}a.parentNode.removeChild(a)});var e=Array.from(i.getElementsByTagName("noscript"));this._forEachNode(e,function(a){var n=i.createElement("div");if(n.innerHTML=a.innerHTML,!!this._isSingleImage(n)){var r=a.previousElementSibling;if(r&&this._isSingleImage(r)){var s=r;s.tagName!=="IMG"&&(s=r.getElementsByTagName("img")[0]);for(var p=n.getElementsByTagName("img")[0],l=0;l<s.attributes.length;l++){var c=s.attributes[l];if(c.value!==""&&(c.name==="src"||c.name==="srcset"||/\.(jpg|jpeg|png|webp)/i.test(c.value))){if(p.getAttribute(c.name)===c.value)continue;var u=c.name;p.hasAttribute(u)&&(u="data-old-"+u),p.setAttribute(u,c.value)}}a.parentNode.replaceChild(n.firstElementChild,r)}}})},_removeScripts:function(i){this._removeNodes(this._getAllNodesWithTag(i,["script","noscript"]))},_hasSingleTagInsideElement:function(i,t){return i.children.length!=1||i.children[0].tagName!==t?!1:!this._someNode(i.childNodes,function(e){return e.nodeType===this.TEXT_NODE&&this.REGEXPS.hasContent.test(e.textContent)})},_isElementWithoutContent:function(i){return i.nodeType===this.ELEMENT_NODE&&i.textContent.trim().length==0&&(i.children.length==0||i.children.length==i.getElementsByTagName("br").length+i.getElementsByTagName("hr").length)},_hasChildBlockElement:function(i){return this._someNode(i.childNodes,function(t){return this.DIV_TO_P_ELEMS.has(t.tagName)||this._hasChildBlockElement(t)})},_isPhrasingContent:function(i){return i.nodeType===this.TEXT_NODE||this.PHRASING_ELEMS.indexOf(i.tagName)!==-1||(i.tagName==="A"||i.tagName==="DEL"||i.tagName==="INS")&&this._everyNode(i.childNodes,this._isPhrasingContent)},_isWhitespace:function(i){return i.nodeType===this.TEXT_NODE&&i.textContent.trim().length===0||i.nodeType===this.ELEMENT_NODE&&i.tagName==="BR"},_getInnerText:function(i,t){t=typeof t=="undefined"?!0:t;var e=i.textContent.trim();return t?e.replace(this.REGEXPS.normalize," "):e},_getCharCount:function(i,t){return t=t||",",this._getInnerText(i).split(t).length-1},_cleanStyles:function(i){if(!(!i||i.tagName.toLowerCase()==="svg")){for(var t=0;t<this.PRESENTATIONAL_ATTRIBUTES.length;t++)i.removeAttribute(this.PRESENTATIONAL_ATTRIBUTES[t]);this.DEPRECATED_SIZE_ATTRIBUTE_ELEMS.indexOf(i.tagName)!==-1&&(i.removeAttribute("width"),i.removeAttribute("height"));for(var e=i.firstElementChild;e!==null;)this._cleanStyles(e),e=e.nextElementSibling}},_getLinkDensity:function(i){var t=this._getInnerText(i).length;if(t===0)return 0;var e=0;return this._forEachNode(i.getElementsByTagName("a"),function(a){var n=a.getAttribute("href"),r=n&&this.REGEXPS.hashUrl.test(n)?.3:1;e+=this._getInnerText(a).length*r}),e/t},_getClassWeight:function(i){if(!this._flagIsActive(this.FLAG_WEIGHT_CLASSES))return 0;var t=0;return typeof i.className=="string"&&i.className!==""&&(this.REGEXPS.negative.test(i.className)&&(t-=25),this.REGEXPS.positive.test(i.className)&&(t+=25)),typeof i.id=="string"&&i.id!==""&&(this.REGEXPS.negative.test(i.id)&&(t-=25),this.REGEXPS.positive.test(i.id)&&(t+=25)),t},_clean:function(i,t){var e=["object","embed","iframe"].indexOf(t)!==-1;this._removeNodes(this._getAllNodesWithTag(i,[t]),function(a){if(e){for(var n=0;n<a.attributes.length;n++)if(this._allowedVideoRegex.test(a.attributes[n].value))return!1;if(a.tagName==="object"&&this._allowedVideoRegex.test(a.innerHTML))return!1}return!0})},_hasAncestorTag:function(i,t,e,a){e=e||3,t=t.toUpperCase();for(var n=0;i.parentNode;){if(e>0&&n>e)return!1;if(i.parentNode.tagName===t&&(!a||a(i.parentNode)))return!0;i=i.parentNode,n++}return!1},_getRowAndColumnCount:function(i){for(var t=0,e=0,a=i.getElementsByTagName("tr"),n=0;n<a.length;n++){var r=a[n].getAttribute("rowspan")||0;r&&(r=parseInt(r,10)),t+=r||1;for(var s=0,p=a[n].getElementsByTagName("td"),l=0;l<p.length;l++){var c=p[l].getAttribute("colspan")||0;c&&(c=parseInt(c,10)),s+=c||1}e=Math.max(e,s)}return{rows:t,columns:e}},_markDataTables:function(i){for(var t=i.getElementsByTagName("table"),e=0;e<t.length;e++){var a=t[e],n=a.getAttribute("role");if(n=="presentation"){a._readabilityDataTable=!1;continue}var r=a.getAttribute("datatable");if(r=="0"){a._readabilityDataTable=!1;continue}var s=a.getAttribute("summary");if(s){a._readabilityDataTable=!0;continue}var p=a.getElementsByTagName("caption")[0];if(p&&p.childNodes.length>0){a._readabilityDataTable=!0;continue}var l=["col","colgroup","tfoot","thead","th"],c=function(x){return!!a.getElementsByTagName(x)[0]};if(l.some(c)){this.log("Data table because found data-y descendant"),a._readabilityDataTable=!0;continue}if(a.getElementsByTagName("table")[0]){a._readabilityDataTable=!1;continue}var u=this._getRowAndColumnCount(a);if(u.rows>=10||u.columns>4){a._readabilityDataTable=!0;continue}a._readabilityDataTable=u.rows*u.columns>10}},_fixLazyImages:function(i){this._forEachNode(this._getAllNodesWithTag(i,["img","picture","figure"]),function(t){if(t.src&&this.REGEXPS.b64DataUrl.test(t.src)){var e=this.REGEXPS.b64DataUrl.exec(t.src);if(e[1]==="image/svg+xml")return;for(var a=!1,n=0;n<t.attributes.length;n++){var r=t.attributes[n];if(r.name!=="src"&&/\.(jpg|jpeg|png|webp)/i.test(r.value)){a=!0;break}}if(a){var s=t.src.search(/base64\s*/i)+7,p=t.src.length-s;p<133&&t.removeAttribute("src")}}if(!((t.src||t.srcset&&t.srcset!="null")&&t.className.toLowerCase().indexOf("lazy")===-1)){for(var l=0;l<t.attributes.length;l++)if(r=t.attributes[l],!(r.name==="src"||r.name==="srcset"||r.name==="alt")){var c=null;if(/\.(jpg|jpeg|png|webp)\s+\d/.test(r.value)?c="srcset":/^\s*\S+\.(jpg|jpeg|png|webp)\S*\s*$/.test(r.value)&&(c="src"),c){if(t.tagName==="IMG"||t.tagName==="PICTURE")t.setAttribute(c,r.value);else if(t.tagName==="FIGURE"&&!this._getAllNodesWithTag(t,["img","picture"]).length){var u=this._doc.createElement("img");u.setAttribute(c,r.value),t.appendChild(u)}}}}})},_getTextDensity:function(i,t){var e=this._getInnerText(i,!0).length;if(e===0)return 0;var a=0,n=this._getAllNodesWithTag(i,t);return this._forEachNode(n,r=>a+=this._getInnerText(r,!0).length),a/e},_cleanConditionally:function(i,t){this._flagIsActive(this.FLAG_CLEAN_CONDITIONALLY)&&this._removeNodes(this._getAllNodesWithTag(i,[t]),function(e){var a=function(w){return w._readabilityDataTable},n=t==="ul"||t==="ol";if(!n){var r=0,s=this._getAllNodesWithTag(e,["ul","ol"]);this._forEachNode(s,w=>r+=this._getInnerText(w).length),n=r/this._getInnerText(e).length>.9}if(t==="table"&&a(e)||this._hasAncestorTag(e,"table",-1,a)||this._hasAncestorTag(e,"code"))return!1;var p=this._getClassWeight(e);this.log("Cleaning Conditionally",e);var l=0;if(p+l<0)return!0;if(this._getCharCount(e,",")<10){for(var c=e.getElementsByTagName("p").length,u=e.getElementsByTagName("img").length,x=e.getElementsByTagName("li").length-100,D=e.getElementsByTagName("input").length,T=this._getTextDensity(e,["h1","h2","h3","h4","h5","h6"]),k=0,E=this._getAllNodesWithTag(e,["object","embed","iframe"]),S=0;S<E.length;S++){for(var C=0;C<E[S].attributes.length;C++)if(this._allowedVideoRegex.test(E[S].attributes[C].value))return!1;if(E[S].tagName==="object"&&this._allowedVideoRegex.test(E[S].innerHTML))return!1;k++}var H=this._getLinkDensity(e),z=this._getInnerText(e).length,b=u>1&&c/u<.5&&!this._hasAncestorTag(e,"figure")||!n&&x>c||D>Math.floor(c/3)||!n&&T<.9&&z<25&&(u===0||u>2)&&!this._hasAncestorTag(e,"figure")||!n&&p<25&&H>.2||p>=25&&H>.5||k===1&&z<75||k>1;if(n&&b){for(var Y=0;Y<e.children.length;Y++)if(e.children[Y].children.length>1)return b;let w=e.getElementsByTagName("li").length;if(u==w)return!1}return b}return!1})},_cleanMatchedNodes:function(i,t){for(var e=this._getNextNode(i,!0),a=this._getNextNode(i);a&&a!=e;)t.call(this,a,a.className+" "+a.id)?a=this._removeAndGetNext(a):a=this._getNextNode(a)},_cleanHeaders:function(i){let t=this._getAllNodesWithTag(i,["h1","h2"]);this._removeNodes(t,function(e){let a=this._getClassWeight(e)<0;return a&&this.log("Removing header with low class weight:",e),a})},_headerDuplicatesTitle:function(i){if(i.tagName!="H1"&&i.tagName!="H2")return!1;var t=this._getInnerText(i,!1);return this.log("Evaluating similarity of header:",t,this._articleTitle),this._textSimilarity(this._articleTitle,t)>.75},_flagIsActive:function(i){return(this._flags&i)>0},_removeFlag:function(i){this._flags=this._flags&~i},_isProbablyVisible:function(i){return(!i.style||i.style.display!="none")&&(!i.style||i.style.visibility!="hidden")&&!i.hasAttribute("hidden")&&(!i.hasAttribute("aria-hidden")||i.getAttribute("aria-hidden")!="true"||i.className&&i.className.indexOf&&i.className.indexOf("fallback-image")!==-1)},parse:function(){if(this._maxElemsToParse>0){var i=this._doc.getElementsByTagName("*").length;if(i>this._maxElemsToParse)throw new Error("Aborting parsing document; "+i+" elements found")}this._unwrapNoscriptImages(this._doc);var t=this._disableJSONLD?{}:this._getJSONLD(this._doc);this._removeScripts(this._doc),this._prepDocument();var e=this._getArticleMetadata(t);this._articleTitle=e.title;var a=this._grabArticle();if(!a)return null;if(this.log("Grabbed: "+a.innerHTML),this._postProcessContent(a),!e.excerpt){var n=a.getElementsByTagName("p");n.length>0&&(e.excerpt=n[0].textContent.trim())}var r=a.textContent;return{title:this._articleTitle,byline:e.byline||this._articleByline,dir:this._articleDir,lang:this._articleLang,content:this._serializer(a),textContent:r,length:r.length,excerpt:e.excerpt,siteName:e.siteName||this._articleSiteName,publishedTime:e.publishedTime}}};typeof Ri=="object"&&(Ri.exports=qa)});var Ka=We((bo,Li)=>{var Xa={unlikelyCandidates:/-ad-|ai2html|banner|breadcrumbs|combx|comment|community|cover-wrap|disqus|extra|footer|gdpr|header|legends|menu|related|remark|replies|rss|shoutbox|sidebar|skyscraper|social|sponsor|supplemental|ad-break|agegate|pagination|pager|popup|yom-remote/i,okMaybeItsACandidate:/and|article|body|column|content|main|shadow/i};function Mr(i){return(!i.style||i.style.display!="none")&&!i.hasAttribute("hidden")&&(!i.hasAttribute("aria-hidden")||i.getAttribute("aria-hidden")!="true"||i.className&&i.className.indexOf&&i.className.indexOf("fallback-image")!==-1)}function Or(i,t={}){typeof t=="function"&&(t={visibilityChecker:t});var e={minScore:20,minContentLength:140,visibilityChecker:Mr};t=Object.assign(e,t);var a=i.querySelectorAll("p, pre, article"),n=i.querySelectorAll("div > br");if(n.length){var r=new Set(a);[].forEach.call(n,function(p){r.add(p.parentNode)}),a=Array.from(r)}var s=0;return[].some.call(a,function(p){if(!t.visibilityChecker(p))return!1;var l=p.className+" "+p.id;if(Xa.unlikelyCandidates.test(l)&&!Xa.okMaybeItsACandidate.test(l)||p.matches("li p"))return!1;var c=p.textContent.trim().length;return c<t.minContentLength?!1:(s+=Math.sqrt(c-t.minContentLength),s>t.minScore)})}typeof Li=="object"&&(Li.exports=Or)});var Za=We((xo,Ja)=>{var Fr=Ya(),Ur=Ka();Ja.exports={Readability:Fr,isProbablyReaderable:Ur}});var zr={};Hn(zr,{default:()=>jt});module.exports=zn(zr);var q=require("obsidian");var Dt=require("obsidian");async function pt(i,t){t=(0,Dt.normalizePath)(t);let e=i.getAbstractFileByPath(t);e&&e instanceof Dt.TFolder||await i.createFolder(t)}var Te=require("obsidian");var kt="http:",Ct="https:";var ha=require("obsidian");var ca={"application/prs.cww":["cww"],"application/prs.xsf+xml":["xsf"],"application/vnd.1000minds.decision-model+xml":["1km"],"application/vnd.3gpp.pic-bw-large":["plb"],"application/vnd.3gpp.pic-bw-small":["psb"],"application/vnd.3gpp.pic-bw-var":["pvb"],"application/vnd.3gpp2.tcap":["tcap"],"application/vnd.3m.post-it-notes":["pwn"],"application/vnd.accpac.simply.aso":["aso"],"application/vnd.accpac.simply.imp":["imp"],"application/vnd.acucobol":["acu"],"application/vnd.acucorp":["atc","acutc"],"application/vnd.adobe.air-application-installer-package+zip":["air"],"application/vnd.adobe.formscentral.fcdt":["fcdt"],"application/vnd.adobe.fxp":["fxp","fxpl"],"application/vnd.adobe.xdp+xml":["xdp"],"application/vnd.adobe.xfdf":["*xfdf"],"application/vnd.age":["age"],"application/vnd.ahead.space":["ahead"],"application/vnd.airzip.filesecure.azf":["azf"],"application/vnd.airzip.filesecure.azs":["azs"],"application/vnd.amazon.ebook":["azw"],"application/vnd.americandynamics.acc":["acc"],"application/vnd.amiga.ami":["ami"],"application/vnd.android.package-archive":["apk"],"application/vnd.anser-web-certificate-issue-initiation":["cii"],"application/vnd.anser-web-funds-transfer-initiation":["fti"],"application/vnd.antix.game-component":["atx"],"application/vnd.apple.installer+xml":["mpkg"],"application/vnd.apple.keynote":["key"],"application/vnd.apple.mpegurl":["m3u8"],"application/vnd.apple.numbers":["numbers"],"application/vnd.apple.pages":["pages"],"application/vnd.apple.pkpass":["pkpass"],"application/vnd.aristanetworks.swi":["swi"],"application/vnd.astraea-software.iota":["iota"],"application/vnd.audiograph":["aep"],"application/vnd.balsamiq.bmml+xml":["bmml"],"application/vnd.blueice.multipass":["mpm"],"application/vnd.bmi":["bmi"],"application/vnd.businessobjects":["rep"],"application/vnd.chemdraw+xml":["cdxml"],"application/vnd.chipnuts.karaoke-mmd":["mmd"],"application/vnd.cinderella":["cdy"],"application/vnd.citationstyles.style+xml":["csl"],"application/vnd.claymore":["cla"],"application/vnd.cloanto.rp9":["rp9"],"application/vnd.clonk.c4group":["c4g","c4d","c4f","c4p","c4u"],"application/vnd.cluetrust.cartomobile-config":["c11amc"],"application/vnd.cluetrust.cartomobile-config-pkg":["c11amz"],"application/vnd.commonspace":["csp"],"application/vnd.contact.cmsg":["cdbcmsg"],"application/vnd.cosmocaller":["cmc"],"application/vnd.crick.clicker":["clkx"],"application/vnd.crick.clicker.keyboard":["clkk"],"application/vnd.crick.clicker.palette":["clkp"],"application/vnd.crick.clicker.template":["clkt"],"application/vnd.crick.clicker.wordbank":["clkw"],"application/vnd.criticaltools.wbs+xml":["wbs"],"application/vnd.ctc-posml":["pml"],"application/vnd.cups-ppd":["ppd"],"application/vnd.curl.car":["car"],"application/vnd.curl.pcurl":["pcurl"],"application/vnd.dart":["dart"],"application/vnd.data-vision.rdz":["rdz"],"application/vnd.dbf":["dbf"],"application/vnd.dece.data":["uvf","uvvf","uvd","uvvd"],"application/vnd.dece.ttml+xml":["uvt","uvvt"],"application/vnd.dece.unspecified":["uvx","uvvx"],"application/vnd.dece.zip":["uvz","uvvz"],"application/vnd.denovo.fcselayout-link":["fe_launch"],"application/vnd.dna":["dna"],"application/vnd.dolby.mlp":["mlp"],"application/vnd.dpgraph":["dpg"],"application/vnd.dreamfactory":["dfac"],"application/vnd.ds-keypoint":["kpxx"],"application/vnd.dvb.ait":["ait"],"application/vnd.dvb.service":["svc"],"application/vnd.dynageo":["geo"],"application/vnd.ecowin.chart":["mag"],"application/vnd.enliven":["nml"],"application/vnd.epson.esf":["esf"],"application/vnd.epson.msf":["msf"],"application/vnd.epson.quickanime":["qam"],"application/vnd.epson.salt":["slt"],"application/vnd.epson.ssf":["ssf"],"application/vnd.eszigno3+xml":["es3","et3"],"application/vnd.ezpix-album":["ez2"],"application/vnd.ezpix-package":["ez3"],"application/vnd.fdf":["*fdf"],"application/vnd.fdsn.mseed":["mseed"],"application/vnd.fdsn.seed":["seed","dataless"],"application/vnd.flographit":["gph"],"application/vnd.fluxtime.clip":["ftc"],"application/vnd.framemaker":["fm","frame","maker","book"],"application/vnd.frogans.fnc":["fnc"],"application/vnd.frogans.ltf":["ltf"],"application/vnd.fsc.weblaunch":["fsc"],"application/vnd.fujitsu.oasys":["oas"],"application/vnd.fujitsu.oasys2":["oa2"],"application/vnd.fujitsu.oasys3":["oa3"],"application/vnd.fujitsu.oasysgp":["fg5"],"application/vnd.fujitsu.oasysprs":["bh2"],"application/vnd.fujixerox.ddd":["ddd"],"application/vnd.fujixerox.docuworks":["xdw"],"application/vnd.fujixerox.docuworks.binder":["xbd"],"application/vnd.fuzzysheet":["fzs"],"application/vnd.genomatix.tuxedo":["txd"],"application/vnd.geogebra.file":["ggb"],"application/vnd.geogebra.tool":["ggt"],"application/vnd.geometry-explorer":["gex","gre"],"application/vnd.geonext":["gxt"],"application/vnd.geoplan":["g2w"],"application/vnd.geospace":["g3w"],"application/vnd.gmx":["gmx"],"application/vnd.google-apps.document":["gdoc"],"application/vnd.google-apps.presentation":["gslides"],"application/vnd.google-apps.spreadsheet":["gsheet"],"application/vnd.google-earth.kml+xml":["kml"],"application/vnd.google-earth.kmz":["kmz"],"application/vnd.grafeq":["gqf","gqs"],"application/vnd.groove-account":["gac"],"application/vnd.groove-help":["ghf"],"application/vnd.groove-identity-message":["gim"],"application/vnd.groove-injector":["grv"],"application/vnd.groove-tool-message":["gtm"],"application/vnd.groove-tool-template":["tpl"],"application/vnd.groove-vcard":["vcg"],"application/vnd.hal+xml":["hal"],"application/vnd.handheld-entertainment+xml":["zmm"],"application/vnd.hbci":["hbci"],"application/vnd.hhe.lesson-player":["les"],"application/vnd.hp-hpgl":["hpgl"],"application/vnd.hp-hpid":["hpid"],"application/vnd.hp-hps":["hps"],"application/vnd.hp-jlyt":["jlt"],"application/vnd.hp-pcl":["pcl"],"application/vnd.hp-pclxl":["pclxl"],"application/vnd.hydrostatix.sof-data":["sfd-hdstx"],"application/vnd.ibm.minipay":["mpy"],"application/vnd.ibm.modcap":["afp","listafp","list3820"],"application/vnd.ibm.rights-management":["irm"],"application/vnd.ibm.secure-container":["sc"],"application/vnd.iccprofile":["icc","icm"],"application/vnd.igloader":["igl"],"application/vnd.immervision-ivp":["ivp"],"application/vnd.immervision-ivu":["ivu"],"application/vnd.insors.igm":["igm"],"application/vnd.intercon.formnet":["xpw","xpx"],"application/vnd.intergeo":["i2g"],"application/vnd.intu.qbo":["qbo"],"application/vnd.intu.qfx":["qfx"],"application/vnd.ipunplugged.rcprofile":["rcprofile"],"application/vnd.irepository.package+xml":["irp"],"application/vnd.is-xpr":["xpr"],"application/vnd.isac.fcs":["fcs"],"application/vnd.jam":["jam"],"application/vnd.jcp.javame.midlet-rms":["rms"],"application/vnd.jisp":["jisp"],"application/vnd.joost.joda-archive":["joda"],"application/vnd.kahootz":["ktz","ktr"],"application/vnd.kde.karbon":["karbon"],"application/vnd.kde.kchart":["chrt"],"application/vnd.kde.kformula":["kfo"],"application/vnd.kde.kivio":["flw"],"application/vnd.kde.kontour":["kon"],"application/vnd.kde.kpresenter":["kpr","kpt"],"application/vnd.kde.kspread":["ksp"],"application/vnd.kde.kword":["kwd","kwt"],"application/vnd.kenameaapp":["htke"],"application/vnd.kidspiration":["kia"],"application/vnd.kinar":["kne","knp"],"application/vnd.koan":["skp","skd","skt","skm"],"application/vnd.kodak-descriptor":["sse"],"application/vnd.las.las+xml":["lasxml"],"application/vnd.llamagraphics.life-balance.desktop":["lbd"],"application/vnd.llamagraphics.life-balance.exchange+xml":["lbe"],"application/vnd.lotus-1-2-3":["123"],"application/vnd.lotus-approach":["apr"],"application/vnd.lotus-freelance":["pre"],"application/vnd.lotus-notes":["nsf"],"application/vnd.lotus-organizer":["org"],"application/vnd.lotus-screencam":["scm"],"application/vnd.lotus-wordpro":["lwp"],"application/vnd.macports.portpkg":["portpkg"],"application/vnd.mapbox-vector-tile":["mvt"],"application/vnd.mcd":["mcd"],"application/vnd.medcalcdata":["mc1"],"application/vnd.mediastation.cdkey":["cdkey"],"application/vnd.mfer":["mwf"],"application/vnd.mfmp":["mfm"],"application/vnd.micrografx.flo":["flo"],"application/vnd.micrografx.igx":["igx"],"application/vnd.mif":["mif"],"application/vnd.mobius.daf":["daf"],"application/vnd.mobius.dis":["dis"],"application/vnd.mobius.mbk":["mbk"],"application/vnd.mobius.mqy":["mqy"],"application/vnd.mobius.msl":["msl"],"application/vnd.mobius.plc":["plc"],"application/vnd.mobius.txf":["txf"],"application/vnd.mophun.application":["mpn"],"application/vnd.mophun.certificate":["mpc"],"application/vnd.mozilla.xul+xml":["xul"],"application/vnd.ms-artgalry":["cil"],"application/vnd.ms-cab-compressed":["cab"],"application/vnd.ms-excel":["xls","xlm","xla","xlc","xlt","xlw"],"application/vnd.ms-excel.addin.macroenabled.12":["xlam"],"application/vnd.ms-excel.sheet.binary.macroenabled.12":["xlsb"],"application/vnd.ms-excel.sheet.macroenabled.12":["xlsm"],"application/vnd.ms-excel.template.macroenabled.12":["xltm"],"application/vnd.ms-fontobject":["eot"],"application/vnd.ms-htmlhelp":["chm"],"application/vnd.ms-ims":["ims"],"application/vnd.ms-lrm":["lrm"],"application/vnd.ms-officetheme":["thmx"],"application/vnd.ms-outlook":["msg"],"application/vnd.ms-pki.seccat":["cat"],"application/vnd.ms-pki.stl":["*stl"],"application/vnd.ms-powerpoint":["ppt","pps","pot"],"application/vnd.ms-powerpoint.addin.macroenabled.12":["ppam"],"application/vnd.ms-powerpoint.presentation.macroenabled.12":["pptm"],"application/vnd.ms-powerpoint.slide.macroenabled.12":["sldm"],"application/vnd.ms-powerpoint.slideshow.macroenabled.12":["ppsm"],"application/vnd.ms-powerpoint.template.macroenabled.12":["potm"],"application/vnd.ms-project":["*mpp","mpt"],"application/vnd.ms-word.document.macroenabled.12":["docm"],"application/vnd.ms-word.template.macroenabled.12":["dotm"],"application/vnd.ms-works":["wps","wks","wcm","wdb"],"application/vnd.ms-wpl":["wpl"],"application/vnd.ms-xpsdocument":["xps"],"application/vnd.mseq":["mseq"],"application/vnd.musician":["mus"],"application/vnd.muvee.style":["msty"],"application/vnd.mynfc":["taglet"],"application/vnd.neurolanguage.nlu":["nlu"],"application/vnd.nitf":["ntf","nitf"],"application/vnd.noblenet-directory":["nnd"],"application/vnd.noblenet-sealer":["nns"],"application/vnd.noblenet-web":["nnw"],"application/vnd.nokia.n-gage.ac+xml":["*ac"],"application/vnd.nokia.n-gage.data":["ngdat"],"application/vnd.nokia.n-gage.symbian.install":["n-gage"],"application/vnd.nokia.radio-preset":["rpst"],"application/vnd.nokia.radio-presets":["rpss"],"application/vnd.novadigm.edm":["edm"],"application/vnd.novadigm.edx":["edx"],"application/vnd.novadigm.ext":["ext"],"application/vnd.oasis.opendocument.chart":["odc"],"application/vnd.oasis.opendocument.chart-template":["otc"],"application/vnd.oasis.opendocument.database":["odb"],"application/vnd.oasis.opendocument.formula":["odf"],"application/vnd.oasis.opendocument.formula-template":["odft"],"application/vnd.oasis.opendocument.graphics":["odg"],"application/vnd.oasis.opendocument.graphics-template":["otg"],"application/vnd.oasis.opendocument.image":["odi"],"application/vnd.oasis.opendocument.image-template":["oti"],"application/vnd.oasis.opendocument.presentation":["odp"],"application/vnd.oasis.opendocument.presentation-template":["otp"],"application/vnd.oasis.opendocument.spreadsheet":["ods"],"application/vnd.oasis.opendocument.spreadsheet-template":["ots"],"application/vnd.oasis.opendocument.text":["odt"],"application/vnd.oasis.opendocument.text-master":["odm"],"application/vnd.oasis.opendocument.text-template":["ott"],"application/vnd.oasis.opendocument.text-web":["oth"],"application/vnd.olpc-sugar":["xo"],"application/vnd.oma.dd2+xml":["dd2"],"application/vnd.openblox.game+xml":["obgx"],"application/vnd.openofficeorg.extension":["oxt"],"application/vnd.openstreetmap.data+xml":["osm"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":["pptx"],"application/vnd.openxmlformats-officedocument.presentationml.slide":["sldx"],"application/vnd.openxmlformats-officedocument.presentationml.slideshow":["ppsx"],"application/vnd.openxmlformats-officedocument.presentationml.template":["potx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":["xlsx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.template":["xltx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":["docx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.template":["dotx"],"application/vnd.osgeo.mapguide.package":["mgp"],"application/vnd.osgi.dp":["dp"],"application/vnd.osgi.subsystem":["esa"],"application/vnd.palm":["pdb","pqa","oprc"],"application/vnd.pawaafile":["paw"],"application/vnd.pg.format":["str"],"application/vnd.pg.osasli":["ei6"],"application/vnd.picsel":["efif"],"application/vnd.pmi.widget":["wg"],"application/vnd.pocketlearn":["plf"],"application/vnd.powerbuilder6":["pbd"],"application/vnd.previewsystems.box":["box"],"application/vnd.proteus.magazine":["mgz"],"application/vnd.publishare-delta-tree":["qps"],"application/vnd.pvi.ptid1":["ptid"],"application/vnd.pwg-xhtml-print+xml":["xhtm"],"application/vnd.quark.quarkxpress":["qxd","qxt","qwd","qwt","qxl","qxb"],"application/vnd.rar":["rar"],"application/vnd.realvnc.bed":["bed"],"application/vnd.recordare.musicxml":["mxl"],"application/vnd.recordare.musicxml+xml":["musicxml"],"application/vnd.rig.cryptonote":["cryptonote"],"application/vnd.rim.cod":["cod"],"application/vnd.rn-realmedia":["rm"],"application/vnd.rn-realmedia-vbr":["rmvb"],"application/vnd.route66.link66+xml":["link66"],"application/vnd.sailingtracker.track":["st"],"application/vnd.seemail":["see"],"application/vnd.sema":["sema"],"application/vnd.semd":["semd"],"application/vnd.semf":["semf"],"application/vnd.shana.informed.formdata":["ifm"],"application/vnd.shana.informed.formtemplate":["itp"],"application/vnd.shana.informed.interchange":["iif"],"application/vnd.shana.informed.package":["ipk"],"application/vnd.simtech-mindmapper":["twd","twds"],"application/vnd.smaf":["mmf"],"application/vnd.smart.teacher":["teacher"],"application/vnd.software602.filler.form+xml":["fo"],"application/vnd.solent.sdkm+xml":["sdkm","sdkd"],"application/vnd.spotfire.dxp":["dxp"],"application/vnd.spotfire.sfs":["sfs"],"application/vnd.stardivision.calc":["sdc"],"application/vnd.stardivision.draw":["sda"],"application/vnd.stardivision.impress":["sdd"],"application/vnd.stardivision.math":["smf"],"application/vnd.stardivision.writer":["sdw","vor"],"application/vnd.stardivision.writer-global":["sgl"],"application/vnd.stepmania.package":["smzip"],"application/vnd.stepmania.stepchart":["sm"],"application/vnd.sun.wadl+xml":["wadl"],"application/vnd.sun.xml.calc":["sxc"],"application/vnd.sun.xml.calc.template":["stc"],"application/vnd.sun.xml.draw":["sxd"],"application/vnd.sun.xml.draw.template":["std"],"application/vnd.sun.xml.impress":["sxi"],"application/vnd.sun.xml.impress.template":["sti"],"application/vnd.sun.xml.math":["sxm"],"application/vnd.sun.xml.writer":["sxw"],"application/vnd.sun.xml.writer.global":["sxg"],"application/vnd.sun.xml.writer.template":["stw"],"application/vnd.sus-calendar":["sus","susp"],"application/vnd.svd":["svd"],"application/vnd.symbian.install":["sis","sisx"],"application/vnd.syncml+xml":["xsm"],"application/vnd.syncml.dm+wbxml":["bdm"],"application/vnd.syncml.dm+xml":["xdm"],"application/vnd.syncml.dmddf+xml":["ddf"],"application/vnd.tao.intent-module-archive":["tao"],"application/vnd.tcpdump.pcap":["pcap","cap","dmp"],"application/vnd.tmobile-livetv":["tmo"],"application/vnd.trid.tpt":["tpt"],"application/vnd.triscape.mxs":["mxs"],"application/vnd.trueapp":["tra"],"application/vnd.ufdl":["ufd","ufdl"],"application/vnd.uiq.theme":["utz"],"application/vnd.umajin":["umj"],"application/vnd.unity":["unityweb"],"application/vnd.uoml+xml":["uoml","uo"],"application/vnd.vcx":["vcx"],"application/vnd.visio":["vsd","vst","vss","vsw"],"application/vnd.visionary":["vis"],"application/vnd.vsf":["vsf"],"application/vnd.wap.wbxml":["wbxml"],"application/vnd.wap.wmlc":["wmlc"],"application/vnd.wap.wmlscriptc":["wmlsc"],"application/vnd.webturbo":["wtb"],"application/vnd.wolfram.player":["nbp"],"application/vnd.wordperfect":["wpd"],"application/vnd.wqd":["wqd"],"application/vnd.wt.stf":["stf"],"application/vnd.xara":["xar"],"application/vnd.xfdl":["xfdl"],"application/vnd.yamaha.hv-dic":["hvd"],"application/vnd.yamaha.hv-script":["hvs"],"application/vnd.yamaha.hv-voice":["hvp"],"application/vnd.yamaha.openscoreformat":["osf"],"application/vnd.yamaha.openscoreformat.osfpvg+xml":["osfpvg"],"application/vnd.yamaha.smaf-audio":["saf"],"application/vnd.yamaha.smaf-phrase":["spf"],"application/vnd.yellowriver-custom-menu":["cmp"],"application/vnd.zul":["zir","zirz"],"application/vnd.zzazz.deck+xml":["zaz"],"application/x-7z-compressed":["7z"],"application/x-abiword":["abw"],"application/x-ace-compressed":["ace"],"application/x-apple-diskimage":["*dmg"],"application/x-arj":["arj"],"application/x-authorware-bin":["aab","x32","u32","vox"],"application/x-authorware-map":["aam"],"application/x-authorware-seg":["aas"],"application/x-bcpio":["bcpio"],"application/x-bdoc":["*bdoc"],"application/x-bittorrent":["torrent"],"application/x-blorb":["blb","blorb"],"application/x-bzip":["bz"],"application/x-bzip2":["bz2","boz"],"application/x-cbr":["cbr","cba","cbt","cbz","cb7"],"application/x-cdlink":["vcd"],"application/x-cfs-compressed":["cfs"],"application/x-chat":["chat"],"application/x-chess-pgn":["pgn"],"application/x-chrome-extension":["crx"],"application/x-cocoa":["cco"],"application/x-conference":["nsc"],"application/x-cpio":["cpio"],"application/x-csh":["csh"],"application/x-debian-package":["*deb","udeb"],"application/x-dgc-compressed":["dgc"],"application/x-director":["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"],"application/x-doom":["wad"],"application/x-dtbncx+xml":["ncx"],"application/x-dtbook+xml":["dtb"],"application/x-dtbresource+xml":["res"],"application/x-dvi":["dvi"],"application/x-envoy":["evy"],"application/x-eva":["eva"],"application/x-font-bdf":["bdf"],"application/x-font-ghostscript":["gsf"],"application/x-font-linux-psf":["psf"],"application/x-font-pcf":["pcf"],"application/x-font-snf":["snf"],"application/x-font-type1":["pfa","pfb","pfm","afm"],"application/x-freearc":["arc"],"application/x-futuresplash":["spl"],"application/x-gca-compressed":["gca"],"application/x-glulx":["ulx"],"application/x-gnumeric":["gnumeric"],"application/x-gramps-xml":["gramps"],"application/x-gtar":["gtar"],"application/x-hdf":["hdf"],"application/x-httpd-php":["php"],"application/x-install-instructions":["install"],"application/x-iso9660-image":["*iso"],"application/x-iwork-keynote-sffkey":["*key"],"application/x-iwork-numbers-sffnumbers":["*numbers"],"application/x-iwork-pages-sffpages":["*pages"],"application/x-java-archive-diff":["jardiff"],"application/x-java-jnlp-file":["jnlp"],"application/x-keepass2":["kdbx"],"application/x-latex":["latex"],"application/x-lua-bytecode":["luac"],"application/x-lzh-compressed":["lzh","lha"],"application/x-makeself":["run"],"application/x-mie":["mie"],"application/x-mobipocket-ebook":["*prc","mobi"],"application/x-ms-application":["application"],"application/x-ms-shortcut":["lnk"],"application/x-ms-wmd":["wmd"],"application/x-ms-wmz":["wmz"],"application/x-ms-xbap":["xbap"],"application/x-msaccess":["mdb"],"application/x-msbinder":["obd"],"application/x-mscardfile":["crd"],"application/x-msclip":["clp"],"application/x-msdos-program":["*exe"],"application/x-msdownload":["*exe","*dll","com","bat","*msi"],"application/x-msmediaview":["mvb","m13","m14"],"application/x-msmetafile":["*wmf","*wmz","*emf","emz"],"application/x-msmoney":["mny"],"application/x-mspublisher":["pub"],"application/x-msschedule":["scd"],"application/x-msterminal":["trm"],"application/x-mswrite":["wri"],"application/x-netcdf":["nc","cdf"],"application/x-ns-proxy-autoconfig":["pac"],"application/x-nzb":["nzb"],"application/x-perl":["pl","pm"],"application/x-pilot":["*prc","*pdb"],"application/x-pkcs12":["p12","pfx"],"application/x-pkcs7-certificates":["p7b","spc"],"application/x-pkcs7-certreqresp":["p7r"],"application/x-rar-compressed":["*rar"],"application/x-redhat-package-manager":["rpm"],"application/x-research-info-systems":["ris"],"application/x-sea":["sea"],"application/x-sh":["sh"],"application/x-shar":["shar"],"application/x-shockwave-flash":["swf"],"application/x-silverlight-app":["xap"],"application/x-sql":["*sql"],"application/x-stuffit":["sit"],"application/x-stuffitx":["sitx"],"application/x-subrip":["srt"],"application/x-sv4cpio":["sv4cpio"],"application/x-sv4crc":["sv4crc"],"application/x-t3vm-image":["t3"],"application/x-tads":["gam"],"application/x-tar":["tar"],"application/x-tcl":["tcl","tk"],"application/x-tex":["tex"],"application/x-tex-tfm":["tfm"],"application/x-texinfo":["texinfo","texi"],"application/x-tgif":["*obj"],"application/x-ustar":["ustar"],"application/x-virtualbox-hdd":["hdd"],"application/x-virtualbox-ova":["ova"],"application/x-virtualbox-ovf":["ovf"],"application/x-virtualbox-vbox":["vbox"],"application/x-virtualbox-vbox-extpack":["vbox-extpack"],"application/x-virtualbox-vdi":["vdi"],"application/x-virtualbox-vhd":["vhd"],"application/x-virtualbox-vmdk":["vmdk"],"application/x-wais-source":["src"],"application/x-web-app-manifest+json":["webapp"],"application/x-x509-ca-cert":["der","crt","pem"],"application/x-xfig":["fig"],"application/x-xliff+xml":["*xlf"],"application/x-xpinstall":["xpi"],"application/x-xz":["xz"],"application/x-zmachine":["z1","z2","z3","z4","z5","z6","z7","z8"],"audio/vnd.dece.audio":["uva","uvva"],"audio/vnd.digital-winds":["eol"],"audio/vnd.dra":["dra"],"audio/vnd.dts":["dts"],"audio/vnd.dts.hd":["dtshd"],"audio/vnd.lucent.voice":["lvp"],"audio/vnd.ms-playready.media.pya":["pya"],"audio/vnd.nuera.ecelp4800":["ecelp4800"],"audio/vnd.nuera.ecelp7470":["ecelp7470"],"audio/vnd.nuera.ecelp9600":["ecelp9600"],"audio/vnd.rip":["rip"],"audio/x-aac":["*aac"],"audio/x-aiff":["aif","aiff","aifc"],"audio/x-caf":["caf"],"audio/x-flac":["flac"],"audio/x-m4a":["*m4a"],"audio/x-matroska":["mka"],"audio/x-mpegurl":["m3u"],"audio/x-ms-wax":["wax"],"audio/x-ms-wma":["wma"],"audio/x-pn-realaudio":["ram","ra"],"audio/x-pn-realaudio-plugin":["rmp"],"audio/x-realaudio":["*ra"],"audio/x-wav":["*wav"],"chemical/x-cdx":["cdx"],"chemical/x-cif":["cif"],"chemical/x-cmdf":["cmdf"],"chemical/x-cml":["cml"],"chemical/x-csml":["csml"],"chemical/x-xyz":["xyz"],"image/prs.btif":["btif","btf"],"image/prs.pti":["pti"],"image/vnd.adobe.photoshop":["psd"],"image/vnd.airzip.accelerator.azv":["azv"],"image/vnd.dece.graphic":["uvi","uvvi","uvg","uvvg"],"image/vnd.djvu":["djvu","djv"],"image/vnd.dvb.subtitle":["*sub"],"image/vnd.dwg":["dwg"],"image/vnd.dxf":["dxf"],"image/vnd.fastbidsheet":["fbs"],"image/vnd.fpx":["fpx"],"image/vnd.fst":["fst"],"image/vnd.fujixerox.edmics-mmr":["mmr"],"image/vnd.fujixerox.edmics-rlc":["rlc"],"image/vnd.microsoft.icon":["ico"],"image/vnd.ms-dds":["dds"],"image/vnd.ms-modi":["mdi"],"image/vnd.ms-photo":["wdp"],"image/vnd.net-fpx":["npx"],"image/vnd.pco.b16":["b16"],"image/vnd.tencent.tap":["tap"],"image/vnd.valve.source.texture":["vtf"],"image/vnd.wap.wbmp":["wbmp"],"image/vnd.xiff":["xif"],"image/vnd.zbrush.pcx":["pcx"],"image/x-3ds":["3ds"],"image/x-cmu-raster":["ras"],"image/x-cmx":["cmx"],"image/x-freehand":["fh","fhc","fh4","fh5","fh7"],"image/x-icon":["*ico"],"image/x-jng":["jng"],"image/x-mrsid-image":["sid"],"image/x-ms-bmp":["*bmp"],"image/x-pcx":["*pcx"],"image/x-pict":["pic","pct"],"image/x-portable-anymap":["pnm"],"image/x-portable-bitmap":["pbm"],"image/x-portable-graymap":["pgm"],"image/x-portable-pixmap":["ppm"],"image/x-rgb":["rgb"],"image/x-tga":["tga"],"image/x-xbitmap":["xbm"],"image/x-xpixmap":["xpm"],"image/x-xwindowdump":["xwd"],"message/vnd.wfa.wsc":["wsc"],"model/vnd.cld":["cld"],"model/vnd.collada+xml":["dae"],"model/vnd.dwf":["dwf"],"model/vnd.gdl":["gdl"],"model/vnd.gtw":["gtw"],"model/vnd.mts":["mts"],"model/vnd.opengex":["ogex"],"model/vnd.parasolid.transmit.binary":["x_b"],"model/vnd.parasolid.transmit.text":["x_t"],"model/vnd.pytha.pyox":["pyo","pyox"],"model/vnd.sap.vds":["vds"],"model/vnd.usda":["usda"],"model/vnd.usdz+zip":["usdz"],"model/vnd.valve.source.compiled-map":["bsp"],"model/vnd.vtu":["vtu"],"text/prs.lines.tag":["dsc"],"text/vnd.curl":["curl"],"text/vnd.curl.dcurl":["dcurl"],"text/vnd.curl.mcurl":["mcurl"],"text/vnd.curl.scurl":["scurl"],"text/vnd.dvb.subtitle":["sub"],"text/vnd.familysearch.gedcom":["ged"],"text/vnd.fly":["fly"],"text/vnd.fmi.flexstor":["flx"],"text/vnd.graphviz":["gv"],"text/vnd.in3d.3dml":["3dml"],"text/vnd.in3d.spot":["spot"],"text/vnd.sun.j2me.app-descriptor":["jad"],"text/vnd.wap.wml":["wml"],"text/vnd.wap.wmlscript":["wmls"],"text/x-asm":["s","asm"],"text/x-c":["c","cc","cxx","cpp","h","hh","dic"],"text/x-component":["htc"],"text/x-fortran":["f","for","f77","f90"],"text/x-handlebars-template":["hbs"],"text/x-java-source":["java"],"text/x-lua":["lua"],"text/x-markdown":["mkd"],"text/x-nfo":["nfo"],"text/x-opml":["opml"],"text/x-org":["*org"],"text/x-pascal":["p","pas"],"text/x-processing":["pde"],"text/x-sass":["sass"],"text/x-scss":["scss"],"text/x-setext":["etx"],"text/x-sfv":["sfv"],"text/x-suse-ymp":["ymp"],"text/x-uuencode":["uu"],"text/x-vcalendar":["vcs"],"text/x-vcard":["vcf"],"video/vnd.dece.hd":["uvh","uvvh"],"video/vnd.dece.mobile":["uvm","uvvm"],"video/vnd.dece.pd":["uvp","uvvp"],"video/vnd.dece.sd":["uvs","uvvs"],"video/vnd.dece.video":["uvv","uvvv"],"video/vnd.dvb.file":["dvb"],"video/vnd.fvt":["fvt"],"video/vnd.mpegurl":["mxu","m4u"],"video/vnd.ms-playready.media.pyv":["pyv"],"video/vnd.uvvu.mp4":["uvu","uvvu"],"video/vnd.vivo":["viv"],"video/x-f4v":["f4v"],"video/x-fli":["fli"],"video/x-flv":["flv"],"video/x-m4v":["m4v"],"video/x-matroska":["mkv","mk3d","mks"],"video/x-mng":["mng"],"video/x-ms-asf":["asf","asx"],"video/x-ms-vob":["vob"],"video/x-ms-wm":["wm"],"video/x-ms-wmv":["wmv"],"video/x-ms-wmx":["wmx"],"video/x-ms-wvx":["wvx"],"video/x-msvideo":["avi"],"video/x-sgi-movie":["movie"],"video/x-smv":["smv"],"x-conference/x-cooltalk":["ice"]};Object.freeze(ca);var ma=ca;var da={"application/andrew-inset":["ez"],"application/appinstaller":["appinstaller"],"application/applixware":["aw"],"application/appx":["appx"],"application/appxbundle":["appxbundle"],"application/atom+xml":["atom"],"application/atomcat+xml":["atomcat"],"application/atomdeleted+xml":["atomdeleted"],"application/atomsvc+xml":["atomsvc"],"application/atsc-dwd+xml":["dwd"],"application/atsc-held+xml":["held"],"application/atsc-rsat+xml":["rsat"],"application/automationml-aml+xml":["aml"],"application/automationml-amlx+zip":["amlx"],"application/bdoc":["bdoc"],"application/calendar+xml":["xcs"],"application/ccxml+xml":["ccxml"],"application/cdfx+xml":["cdfx"],"application/cdmi-capability":["cdmia"],"application/cdmi-container":["cdmic"],"application/cdmi-domain":["cdmid"],"application/cdmi-object":["cdmio"],"application/cdmi-queue":["cdmiq"],"application/cpl+xml":["cpl"],"application/cu-seeme":["cu"],"application/cwl":["cwl"],"application/dash+xml":["mpd"],"application/dash-patch+xml":["mpp"],"application/davmount+xml":["davmount"],"application/docbook+xml":["dbk"],"application/dssc+der":["dssc"],"application/dssc+xml":["xdssc"],"application/ecmascript":["ecma"],"application/emma+xml":["emma"],"application/emotionml+xml":["emotionml"],"application/epub+zip":["epub"],"application/exi":["exi"],"application/express":["exp"],"application/fdf":["fdf"],"application/fdt+xml":["fdt"],"application/font-tdpfr":["pfr"],"application/geo+json":["geojson"],"application/gml+xml":["gml"],"application/gpx+xml":["gpx"],"application/gxf":["gxf"],"application/gzip":["gz"],"application/hjson":["hjson"],"application/hyperstudio":["stk"],"application/inkml+xml":["ink","inkml"],"application/ipfix":["ipfix"],"application/its+xml":["its"],"application/java-archive":["jar","war","ear"],"application/java-serialized-object":["ser"],"application/java-vm":["class"],"application/javascript":["*js"],"application/json":["json","map"],"application/json5":["json5"],"application/jsonml+json":["jsonml"],"application/ld+json":["jsonld"],"application/lgr+xml":["lgr"],"application/lost+xml":["lostxml"],"application/mac-binhex40":["hqx"],"application/mac-compactpro":["cpt"],"application/mads+xml":["mads"],"application/manifest+json":["webmanifest"],"application/marc":["mrc"],"application/marcxml+xml":["mrcx"],"application/mathematica":["ma","nb","mb"],"application/mathml+xml":["mathml"],"application/mbox":["mbox"],"application/media-policy-dataset+xml":["mpf"],"application/mediaservercontrol+xml":["mscml"],"application/metalink+xml":["metalink"],"application/metalink4+xml":["meta4"],"application/mets+xml":["mets"],"application/mmt-aei+xml":["maei"],"application/mmt-usd+xml":["musd"],"application/mods+xml":["mods"],"application/mp21":["m21","mp21"],"application/mp4":["*mp4","*mpg4","mp4s","m4p"],"application/msix":["msix"],"application/msixbundle":["msixbundle"],"application/msword":["doc","dot"],"application/mxf":["mxf"],"application/n-quads":["nq"],"application/n-triples":["nt"],"application/node":["cjs"],"application/octet-stream":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"],"application/oda":["oda"],"application/oebps-package+xml":["opf"],"application/ogg":["ogx"],"application/omdoc+xml":["omdoc"],"application/onenote":["onetoc","onetoc2","onetmp","onepkg"],"application/oxps":["oxps"],"application/p2p-overlay+xml":["relo"],"application/patch-ops-error+xml":["xer"],"application/pdf":["pdf"],"application/pgp-encrypted":["pgp"],"application/pgp-keys":["asc"],"application/pgp-signature":["sig","*asc"],"application/pics-rules":["prf"],"application/pkcs10":["p10"],"application/pkcs7-mime":["p7m","p7c"],"application/pkcs7-signature":["p7s"],"application/pkcs8":["p8"],"application/pkix-attr-cert":["ac"],"application/pkix-cert":["cer"],"application/pkix-crl":["crl"],"application/pkix-pkipath":["pkipath"],"application/pkixcmp":["pki"],"application/pls+xml":["pls"],"application/postscript":["ai","eps","ps"],"application/provenance+xml":["provx"],"application/pskc+xml":["pskcxml"],"application/raml+yaml":["raml"],"application/rdf+xml":["rdf","owl"],"application/reginfo+xml":["rif"],"application/relax-ng-compact-syntax":["rnc"],"application/resource-lists+xml":["rl"],"application/resource-lists-diff+xml":["rld"],"application/rls-services+xml":["rs"],"application/route-apd+xml":["rapd"],"application/route-s-tsid+xml":["sls"],"application/route-usd+xml":["rusd"],"application/rpki-ghostbusters":["gbr"],"application/rpki-manifest":["mft"],"application/rpki-roa":["roa"],"application/rsd+xml":["rsd"],"application/rss+xml":["rss"],"application/rtf":["rtf"],"application/sbml+xml":["sbml"],"application/scvp-cv-request":["scq"],"application/scvp-cv-response":["scs"],"application/scvp-vp-request":["spq"],"application/scvp-vp-response":["spp"],"application/sdp":["sdp"],"application/senml+xml":["senmlx"],"application/sensml+xml":["sensmlx"],"application/set-payment-initiation":["setpay"],"application/set-registration-initiation":["setreg"],"application/shf+xml":["shf"],"application/sieve":["siv","sieve"],"application/smil+xml":["smi","smil"],"application/sparql-query":["rq"],"application/sparql-results+xml":["srx"],"application/sql":["sql"],"application/srgs":["gram"],"application/srgs+xml":["grxml"],"application/sru+xml":["sru"],"application/ssdl+xml":["ssdl"],"application/ssml+xml":["ssml"],"application/swid+xml":["swidtag"],"application/tei+xml":["tei","teicorpus"],"application/thraud+xml":["tfi"],"application/timestamped-data":["tsd"],"application/toml":["toml"],"application/trig":["trig"],"application/ttml+xml":["ttml"],"application/ubjson":["ubj"],"application/urc-ressheet+xml":["rsheet"],"application/urc-targetdesc+xml":["td"],"application/voicexml+xml":["vxml"],"application/wasm":["wasm"],"application/watcherinfo+xml":["wif"],"application/widget":["wgt"],"application/winhlp":["hlp"],"application/wsdl+xml":["wsdl"],"application/wspolicy+xml":["wspolicy"],"application/xaml+xml":["xaml"],"application/xcap-att+xml":["xav"],"application/xcap-caps+xml":["xca"],"application/xcap-diff+xml":["xdf"],"application/xcap-el+xml":["xel"],"application/xcap-ns+xml":["xns"],"application/xenc+xml":["xenc"],"application/xfdf":["xfdf"],"application/xhtml+xml":["xhtml","xht"],"application/xliff+xml":["xlf"],"application/xml":["xml","xsl","xsd","rng"],"application/xml-dtd":["dtd"],"application/xop+xml":["xop"],"application/xproc+xml":["xpl"],"application/xslt+xml":["*xsl","xslt"],"application/xspf+xml":["xspf"],"application/xv+xml":["mxml","xhvml","xvml","xvm"],"application/yang":["yang"],"application/yin+xml":["yin"],"application/zip":["zip"],"audio/3gpp":["*3gpp"],"audio/aac":["adts","aac"],"audio/adpcm":["adp"],"audio/amr":["amr"],"audio/basic":["au","snd"],"audio/midi":["mid","midi","kar","rmi"],"audio/mobile-xmf":["mxmf"],"audio/mp3":["*mp3"],"audio/mp4":["m4a","mp4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx","opus"],"audio/s3m":["s3m"],"audio/silk":["sil"],"audio/wav":["wav"],"audio/wave":["*wav"],"audio/webm":["weba"],"audio/xm":["xm"],"font/collection":["ttc"],"font/otf":["otf"],"font/ttf":["ttf"],"font/woff":["woff"],"font/woff2":["woff2"],"image/aces":["exr"],"image/apng":["apng"],"image/avci":["avci"],"image/avcs":["avcs"],"image/avif":["avif"],"image/bmp":["bmp","dib"],"image/cgm":["cgm"],"image/dicom-rle":["drle"],"image/dpx":["dpx"],"image/emf":["emf"],"image/fits":["fits"],"image/g3fax":["g3"],"image/gif":["gif"],"image/heic":["heic"],"image/heic-sequence":["heics"],"image/heif":["heif"],"image/heif-sequence":["heifs"],"image/hej2k":["hej2"],"image/hsj2":["hsj2"],"image/ief":["ief"],"image/jls":["jls"],"image/jp2":["jp2","jpg2"],"image/jpeg":["jpeg","jpg","jpe"],"image/jph":["jph"],"image/jphc":["jhc"],"image/jpm":["jpm","jpgm"],"image/jpx":["jpx","jpf"],"image/jxr":["jxr"],"image/jxra":["jxra"],"image/jxrs":["jxrs"],"image/jxs":["jxs"],"image/jxsc":["jxsc"],"image/jxsi":["jxsi"],"image/jxss":["jxss"],"image/ktx":["ktx"],"image/ktx2":["ktx2"],"image/png":["png"],"image/sgi":["sgi"],"image/svg+xml":["svg","svgz"],"image/t38":["t38"],"image/tiff":["tif","tiff"],"image/tiff-fx":["tfx"],"image/webp":["webp"],"image/wmf":["wmf"],"message/disposition-notification":["disposition-notification"],"message/global":["u8msg"],"message/global-delivery-status":["u8dsn"],"message/global-disposition-notification":["u8mdn"],"message/global-headers":["u8hdr"],"message/rfc822":["eml","mime"],"model/3mf":["3mf"],"model/gltf+json":["gltf"],"model/gltf-binary":["glb"],"model/iges":["igs","iges"],"model/jt":["jt"],"model/mesh":["msh","mesh","silo"],"model/mtl":["mtl"],"model/obj":["obj"],"model/prc":["prc"],"model/step+xml":["stpx"],"model/step+zip":["stpz"],"model/step-xml+zip":["stpxz"],"model/stl":["stl"],"model/u3d":["u3d"],"model/vrml":["wrl","vrml"],"model/x3d+binary":["*x3db","x3dbz"],"model/x3d+fastinfoset":["x3db"],"model/x3d+vrml":["*x3dv","x3dvz"],"model/x3d+xml":["x3d","x3dz"],"model/x3d-vrml":["x3dv"],"text/cache-manifest":["appcache","manifest"],"text/calendar":["ics","ifb"],"text/coffeescript":["coffee","litcoffee"],"text/css":["css"],"text/csv":["csv"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/javascript":["js","mjs"],"text/jsx":["jsx"],"text/less":["less"],"text/markdown":["md","markdown"],"text/mathml":["mml"],"text/mdx":["mdx"],"text/n3":["n3"],"text/plain":["txt","text","conf","def","list","log","in","ini"],"text/richtext":["rtx"],"text/rtf":["*rtf"],"text/sgml":["sgml","sgm"],"text/shex":["shex"],"text/slim":["slim","slm"],"text/spdx":["spdx"],"text/stylus":["stylus","styl"],"text/tab-separated-values":["tsv"],"text/troff":["t","tr","roff","man","me","ms"],"text/turtle":["ttl"],"text/uri-list":["uri","uris","urls"],"text/vcard":["vcard"],"text/vtt":["vtt"],"text/wgsl":["wgsl"],"text/xml":["*xml"],"text/yaml":["yaml","yml"],"video/3gpp":["3gp","3gpp"],"video/3gpp2":["3g2"],"video/h261":["h261"],"video/h263":["h263"],"video/h264":["h264"],"video/iso.segment":["m4s"],"video/jpeg":["jpgv"],"video/jpm":["*jpm","*jpgm"],"video/mj2":["mj2","mjp2"],"video/mp2t":["ts"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/webm":["webm"]};Object.freeze(da);var ua=da;var oe=function(i,t,e,a){if(e==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?i!==t||!a:!t.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?a:e==="a"?a.call(i):a?a.value:t.get(i)},Ge,ct,ke,oi=class{constructor(...t){Ge.set(this,new Map),ct.set(this,new Map),ke.set(this,new Map);for(let e of t)this.define(e)}define(t,e=!1){for(let[a,n]of Object.entries(t)){a=a.toLowerCase(),n=n.map(p=>p.toLowerCase()),oe(this,ke,"f").has(a)||oe(this,ke,"f").set(a,new Set);let r=oe(this,ke,"f").get(a),s=!0;for(let p of n){let l=p.startsWith("*");if(p=l?p.slice(1):p,r==null||r.add(p),s&&oe(this,ct,"f").set(a,p),s=!1,l)continue;let c=oe(this,Ge,"f").get(p);if(c&&c!=a&&!e)throw new Error(`"${a} -> ${p}" conflicts with "${c} -> ${p}". Pass \`force=true\` to override this definition.`);oe(this,Ge,"f").set(p,a)}}return this}getType(t){var s;if(typeof t!="string")return null;let e=t.replace(/^.*[/\\]/,"").toLowerCase(),a=e.replace(/^.*\./,"").toLowerCase(),n=e.length<t.length;return!(a.length<e.length-1)&&n?null:(s=oe(this,Ge,"f").get(a))!=null?s:null}getExtension(t){var e,a;return typeof t!="string"?null:(t=(e=t==null?void 0:t.split)==null?void 0:e.call(t,";")[0],(a=t&&oe(this,ct,"f").get(t.trim().toLowerCase()))!=null?a:null)}getAllExtensions(t){var e;return typeof t!="string"?null:(e=oe(this,ke,"f").get(t.toLowerCase()))!=null?e:null}_freeze(){this.define=()=>{throw new Error("define() not allowed for built-in Mime objects. See https://github.com/broofa/mime/blob/main/README.md#custom-mime-instances")},Object.freeze(this);for(let t of oe(this,ke,"f").values())Object.freeze(t);return this}_getTestState(){return{types:oe(this,Ge,"f"),extensions:oe(this,ct,"f")}}};Ge=new WeakMap,ct=new WeakMap,ke=new WeakMap;var li=oi;var ga=new li(ua,ma)._freeze();function ue(i,t=[]){let e;try{e=new URL(i)}catch(a){return!1}return t.length===0?!0:t.includes(e.protocol)}function ci(i,t){return new URL(i,t).href}function Z(i){return i.replace(/[:#/\\|?*<>"]/g,"")}function mt(i,t,e,a){let n=`.${Vn(t)}`,r=t;r.length>a.fileName&&(r=r.substring(0,a.fileName-n.length)+`${n}`);let s=(0,ha.normalizePath)(`${i}/${r}`),p=e.getFullPath(s);return p.length>a.path&&(s=s.substring(0,s.length-(p.length-a.path)-n.length)+`${n}`),s}function fa(i,t){var a,n;let e=mi(i);return{path:(a=t.filesystemLimitPath)!=null?a:e.path,fileName:(n=t.filesystemLimitFileName)!=null?n:e.fileName}}function mi(i){return i.isLinux?pi(4096,255):i.isMacOS||i.isIosApp||i.isAndroidApp||i.isMobile?pi(1024,255):pi(256,256)}function Vn(i){return i.includes(".")?i.split(".").pop():""}function va(i){var t;return(t=ga.getExtension(i))!=null?t:""}function pi(i,t){return{path:i,fileName:t}}function di(i){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e="";for(let a=0;a<i;a++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}var Bn=/!\[(?<anchor>.*?)\]\((?<link>.+?)\)/g,$n=5,Wn=1e3;async function we(i,t,e,a,n){return await Gn(a,Bn,qn(i,t,e,n))}async function Gn(i,t,e){try{if(typeof e=="function"){let a=[];return String.prototype.replace.call(i,t,function(n,r,s){return a.push(e(n,r,s)),""}),Promise.all(a).then(function(n){return String.prototype.replace.call(i,t,function(){return n.shift()})})}else return Promise.resolve(String.prototype.replace.call(i,t,e))}catch(a){return console.error(),Promise.reject(a)}}function qn(i,t,e,a){return async function(r,s,p){if(!ue(p,[kt,Ct]))return r;let l=new URL(p);await pt(i.vault,a);try{let{fileContent:c,fileExtension:u}=await Xn(l),x=0;for(;x<$n;)try{let{fileName:D,needWrite:T}=await Yn(i.vault.adapter,t.getFileSystemLimits(),a,e,u);if(T&&D!==""){await i.vault.createBinary(D,c);let k=D.replace(/\s/g,"%20");return`![${s}](${k})`}else return r}catch(D){console.warn(D),x++}return r}catch(c){return console.warn(c),r}}}async function Yn(i,t,e,a,n){if(n==="")return{fileName:"",needWrite:!1};let r=!1,s="",p=0;for(;s===""&&p<Wn;){let l;i instanceof Te.CapacitorAdapter||i instanceof Te.FileSystemAdapter?l=mt(e,`${a}-${di(10)}.${n}`,i,t):l=`${e}/${a}-${di(10)}.${n}`,await i.exists((0,Te.normalizePath)(l),!1)||(s=l,r=!0),p++}return{fileName:s,needWrite:r}}async function Xn(i){var e;let t=await(0,Te.requestUrl)({url:i.href,method:"get"});return{fileContent:t.arrayBuffer,fileExtension:(e=va(t.headers["content-type"]||""))!=null?e:""}}var ba=require("obsidian");function Rt(i){throw new ba.Notice("Error occured. Please check console output for detailed information."),i}var xa=require("obsidian");function qe(i,t){return(0,xa.moment)(i).format(t)}function ya(){return[{label:"New Line",option:"newLine"},{label:"Comma",option:"comma"},{label:"Period",option:"period"},{label:"Semicolon",option:"semicolon"}]}function Ta(i){switch(i){case"newLine":return`
`;case"comma":return",";case"period":return".";case"semicolon":return";"}}var d={inboxDir:"ReadItLater Inbox",assetsDir:"ReadItLater Inbox/assets",openNewNote:!1,batchProcess:!1,batchProcessDelimiter:"newLine",openNewNoteInNewTab:!1,youtubeContentTypeSlug:"youtube",youtubeNoteTitle:"Youtube - {{ title }}",youtubeNote:`[[ReadItLater]] [[Youtube]]

# [{{ videoTitle }}]({{ videoURL }})

{{ videoPlayer }}`,youtubeEmbedWidth:"560",youtubeEmbedHeight:"315",youtubeUsePrivacyEnhancedEmbed:!0,vimeoContentTypeSlug:"vimeo",vimeoNoteTitle:"Vimeo - {{ title }}",vimeoNote:`[[ReadItLater]] [[Vimeo]]

# [{{ videoTitle }}]({{ videoURL }})

{{ videoPlayer }}`,vimeoEmbedWidth:"560",vimeoEmbedHeight:"315",bilibiliContentTypeSlug:"bilibili",bilibiliNoteTitle:"Bilibili - {{ title }}",bilibiliNote:`[[ReadItLater]] [[Bilibili]]

# [{{ videoTitle }}]({{ videoURL }})

{{ videoPlayer }}`,bilibiliEmbedWidth:"560",bilibiliEmbedHeight:"315",twitterContentTypeSlug:"xcom",twitterNoteTitle:"Tweet from {{ tweetAuthorName }} ({{ date }})",twitterNote:`[[ReadItLater]] [[Tweet]]

# [{{ tweetAuthorName }}]({{ tweetURL }})

{{ tweetContent }}`,parseableArticleContentType:"article",parseableArticleNoteTitle:"{{ title }}",parsableArticleNote:`[[ReadItLater]] [[Article]]

# [{{ articleTitle }}]({{ articleURL }})

{{ articleContent }}`,notParseableArticleContentType:"article",notParseableArticleNoteTitle:"Article {{ date }}",notParsableArticleNote:`[[ReadItLater]] [[Article]]

[{{ articleURL }}]({{ articleURL }})`,textSnippetContentType:"textsnippet",textSnippetNoteTitle:"Note {{ date }}",textSnippetNote:`[[ReadItLater]] [[Textsnippet]]

{{ content }}`,mastodonContentTypeSlug:"mastodon",mastodonNoteTitle:"Toot from {{ tootAuthorName }} ({{ date }})",mastodonNote:`[[ReadItLater]] [[Toot]]

# [{{ tootAuthorName }}]({{ tootURL }})

> {{ tootContent }}`,downloadImages:!0,downloadImagesInArticleDir:!1,dateTitleFmt:"YYYY-MM-DD HH-mm-ss",dateContentFmt:"YYYY-MM-DD",downloadMastodonMediaAttachments:!0,downloadMastodonMediaAttachmentsInDir:!1,saveMastodonReplies:!1,mastodonReply:`[{{ tootAuthorName }}]({{ tootURL }})

> {{ tootContent }}`,stackExchangeContentType:"stackexchange",stackExchangeNoteTitle:"{{ title }}",stackExchangeNote:`[[ReadItLater]] [[StackExchange]]

# [{{ questionTitle }}]({{ questionURL }})

Author: [{{ authorName }}]({{ authorProfileURL }})

{{ questionContent }}

***

{{ topAnswer }}

{{ answers }}`,stackExchangeAnswer:`Answered by: [{{ authorName }}]({{ authorProfileURL }})

{{ answerContent }}`,downloadStackExchangeAssets:!0,downloadStackExchangeAssetsInDir:!1,youtubeApiKey:"",tikTokContentTypeSlug:"tiktok",tikTokNoteTitle:"TikTok from {{ authorName }} ({{ date }})",tikTokNote:`[[ReadItLater]] [[TikTok]]

{{ videoDescription }}

[{{ videoURL }}]({{ videoURL }})

{{ videoPlayer }}`,tikTokEmbedWidth:"325",tikTokEmbedHeight:"760",extendShareMenu:!0,filesystemLimitPath:null,filesystemLimitFileName:null};var v=require("obsidian");var Lt=class extends v.PluginSettingTab{constructor(e,a){super(e,a);L(this,"plugin");this.plugin=a}display(){let{containerEl:e}=this;e.empty(),e.createEl("h2",{text:"General"}),new v.Setting(e).setName("Inbox directory").setDesc("Enter valid directory name. For nested directory use this format: Directory A/Directory B. If no directory is entered, new note will be created in vault root.").addText(n=>n.setPlaceholder("Defaults to vault root directory").setValue(typeof this.plugin.settings.inboxDir=="undefined"?d.inboxDir:this.plugin.settings.inboxDir).onChange(async r=>{this.plugin.settings.inboxDir=r,await this.plugin.saveSettings()})),new v.Setting(e).setName("Assets directory").setDesc("Enter valid directory name. For nested directory use this format: Directory A/Directory B. If no directory is entered, new note will be created in Vault root.").addText(n=>n.setPlaceholder("Defaults to vault root directory").setValue(typeof this.plugin.settings.assetsDir=="undefined"?d.inboxDir+"/assets":this.plugin.settings.assetsDir).onChange(async r=>{this.plugin.settings.assetsDir=r,await this.plugin.saveSettings()})),new v.Setting(e).setName("Open new note in current workspace").setDesc("If enabled, new note will open in current workspace").addToggle(n=>n.setValue(this.plugin.settings.openNewNote||d.openNewNote).onChange(async r=>{this.plugin.settings.openNewNote=r,r===!0&&(this.plugin.settings.openNewNoteInNewTab=!1),await this.plugin.saveSettings(),this.display()})),new v.Setting(e).setName("Open new note in new tab").setDesc("If enabled, new note will open in new tab").addToggle(n=>n.setValue(this.plugin.settings.openNewNoteInNewTab||d.openNewNoteInNewTab).onChange(async r=>{this.plugin.settings.openNewNoteInNewTab=r,r===!0&&(this.plugin.settings.openNewNote=!1),await this.plugin.saveSettings(),this.display()})),new v.Setting(e).setName("Batch process URLs").setDesc("If enabled, a list of URLs will processed in sequence. Delimiter can be set in setting bellow.").addToggle(n=>{var r;return n.setValue((r=this.plugin.settings.batchProcess)!=null?r:d.batchProcess).onChange(async s=>{this.plugin.settings.batchProcess=s,await this.plugin.saveSettings()})}),new v.Setting(e).setName("Batch note creation delimiter").setDesc("Delimiter for batch list of notes").addDropdown(n=>{ya().forEach(r=>n.addOption(r.option,r.label)),n.setValue(this.plugin.settings.batchProcessDelimiter||d.batchProcessDelimiter),n.onChange(async r=>{this.plugin.settings.batchProcessDelimiter=r,await this.plugin.saveSettings()})}),new v.Setting(e).setName("Date format string").setDesc("Format of the %date% variable. NOTE: do not use symbols forbidden in file names.").addText(n=>n.setPlaceholder(`Defaults to ${d.dateTitleFmt}`).setValue(typeof this.plugin.settings.dateTitleFmt=="undefined"?d.dateTitleFmt:this.plugin.settings.dateTitleFmt).onChange(async r=>{this.plugin.settings.dateTitleFmt=r,await this.plugin.saveSettings()})),new v.Setting(e).setName("Date format string in content").setDesc("Format of the %date% variable for content").addText(n=>n.setPlaceholder(`Defaults to ${d.dateContentFmt}`).setValue(typeof this.plugin.settings.dateContentFmt=="undefined"?d.dateContentFmt:this.plugin.settings.dateContentFmt).onChange(async r=>{this.plugin.settings.dateContentFmt=r,await this.plugin.saveSettings()})),new v.Setting(e).setName("Extend share menu").setDesc("If enabled, share menu will be extended with shortcut to create note directly from it. Requires plugin reload or Obsidian restart to apply change.").addToggle(n=>n.setValue(Object.prototype.hasOwnProperty.call(this.plugin.settings,"extendShareMenu")?this.plugin.settings.extendShareMenu:d.extendShareMenu).onChange(async r=>{this.plugin.settings.extendShareMenu=r,await this.plugin.saveSettings()})),e.createEl("h2",{text:"YouTube"}),new v.Setting(e).setName("Youtube content type slug").setDesc(this.createTemplateVariableReferenceDiv()).addText(n=>n.setPlaceholder(`Defaults to ${d.youtubeContentTypeSlug}`).setValue(typeof this.plugin.settings.youtubeContentTypeSlug=="undefined"?d.youtubeContentTypeSlug:this.plugin.settings.youtubeContentTypeSlug).onChange(async r=>{this.plugin.settings.youtubeContentTypeSlug=r,await this.plugin.saveSettings()})),new v.Setting(e).setName("Youtube note template title").setDesc(this.createTemplateVariableReferenceDiv()).addText(n=>n.setPlaceholder(`Defaults to ${d.youtubeNoteTitle}`).setValue(this.plugin.settings.youtubeNoteTitle||d.youtubeNoteTitle).onChange(async r=>{this.plugin.settings.youtubeNoteTitle=r,await this.plugin.saveSettings()})),new v.Setting(e).setName("Youtube note template").setDesc(this.createTemplateVariableReferenceDiv()).addTextArea(n=>{n.setValue(this.plugin.settings.youtubeNote||d.youtubeNote).onChange(async r=>{this.plugin.settings.youtubeNote=r,await this.plugin.saveSettings()}),n.inputEl.rows=10,n.inputEl.cols=25}),new v.Setting(e).setName("Youtube Data API v3 key").setDesc("If entered, additional template variables are available").addText(n=>n.setPlaceholder("").setValue(this.plugin.settings.youtubeApiKey||d.youtubeApiKey).onChange(async r=>{this.plugin.settings.youtubeApiKey=r,await this.plugin.saveSettings()})),new v.Setting(e).setName("Youtube embed player width").addText(n=>n.setPlaceholder(d.youtubeEmbedWidth).setValue(this.plugin.settings.youtubeEmbedWidth||d.youtubeEmbedWidth).onChange(async r=>{this.plugin.settings.youtubeEmbedWidth=r,await this.plugin.saveSettings()})),new v.Setting(e).setName("Youtube embed player height").addText(n=>n.setPlaceholder(d.youtubeEmbedHeight).setValue(this.plugin.settings.youtubeEmbedHeight||d.youtubeEmbedHeight).onChange(async r=>{this.plugin.settings.youtubeEmbedHeight=r,await this.plugin.saveSettings()})),new v.Setting(e).setName("Embed in privacy enhanced mode").setDesc("If enabled, content will be embeded in privacy enhanced mode, which prevents the use of views of it from influencing the viewer\u2019s browsing experience on YouTube.").addToggle(n=>n.setValue(Object.prototype.hasOwnProperty.call(this.plugin.settings,"youtubeUsePrivacyEnhancedEmbed")?this.plugin.settings.youtubeUsePrivacyEnhancedEmbed:d.youtubeUsePrivacyEnhancedEmbed).onChange(async r=>{this.plugin.settings.youtubeUsePrivacyEnhancedEmbed=r,await this.plugin.saveSettings()})),e.createEl("h2",{text:"Vimeo"}),new v.Setting(e).setName("Vimeo content type slug").setDesc(this.createTemplateVariableReferenceDiv()).addText(n=>n.setPlaceholder(`Defaults to ${d.vimeoContentTypeSlug}`).setValue(typeof this.plugin.settings.vimeoContentTypeSlug=="undefined"?d.vimeoContentTypeSlug:this.plugin.settings.vimeoContentTypeSlug).onChange(async r=>{this.plugin.settings.vimeoContentTypeSlug=r,await this.plugin.saveSettings()})),new v.Setting(e).setName("Vimeo note title template").setDesc(this.createTemplateVariableReferenceDiv()).addText(n=>n.setPlaceholder("Defaults to %title%").setValue(this.plugin.settings.vimeoNoteTitle||d.vimeoNoteTitle).onChange(async r=>{this.plugin.settings.vimeoNoteTitle=r,await this.plugin.saveSettings()})),new v.Setting(e).setName("Vimeo note template").setDesc(this.createTemplateVariableReferenceDiv()).addTextArea(n=>{n.setValue(this.plugin.settings.vimeoNote||d.vimeoNote).onChange(async r=>{this.plugin.settings.vimeoNote=r,await this.plugin.saveSettings()}),n.inputEl.rows=10,n.inputEl.cols=25}),new v.Setting(e).setName("Vimeo embed player width").addText(n=>n.setPlaceholder(d.vimeoEmbedWidth).setValue(this.plugin.settings.vimeoEmbedWidth||d.vimeoEmbedWidth).onChange(async r=>{this.plugin.settings.vimeoEmbedWidth=r,await this.plugin.saveSettings()})),new v.Setting(e).setName("Vimeo embed player height").addText(n=>n.setPlaceholder(d.vimeoEmbedHeight).setValue(this.plugin.settings.vimeoEmbedHeight||d.vimeoEmbedHeight).onChange(async r=>{this.plugin.settings.vimeoEmbedHeight=r,await this.plugin.saveSettings()})),e.createEl("h2",{text:"Bilibili"}),new v.Setting(e).setName("Bilibili content type slug").setDesc(this.createTemplateVariableReferenceDiv()).addText(n=>n.setPlaceholder(`Defaults to ${d.bilibiliContentTypeSlug}`).setValue(typeof this.plugin.settings.bilibiliContentTypeSlug=="undefined"?d.bilibiliContentTypeSlug:this.plugin.settings.bilibiliContentTypeSlug).onChange(async r=>{this.plugin.settings.bilibiliContentTypeSlug=r,await this.plugin.saveSettings()})),new v.Setting(e).setName("Bilibili note template title").setDesc(this.createTemplateVariableReferenceDiv()).addText(n=>n.setPlaceholder("Defaults to %title%").setValue(this.plugin.settings.bilibiliNoteTitle||d.bilibiliNoteTitle).onChange(async r=>{this.plugin.settings.bilibiliNoteTitle=r,await this.plugin.saveSettings()})),new v.Setting(e).setName("Bilibili note template").setDesc(this.createTemplateVariableReferenceDiv()).addTextArea(n=>{n.setValue(this.plugin.settings.bilibiliNote||d.bilibiliNote).onChange(async r=>{this.plugin.settings.bilibiliNote=r,await this.plugin.saveSettings()}),n.inputEl.rows=10,n.inputEl.cols=25}),new v.Setting(e).setName("Bilibili embed player width").addText(n=>n.setPlaceholder(d.bilibiliEmbedWidth).setValue(this.plugin.settings.bilibiliEmbedWidth||d.bilibiliEmbedWidth).onChange(async r=>{this.plugin.settings.bilibiliEmbedWidth=r,await this.plugin.saveSettings()})),new v.Setting(e).setName("Bilibili embed player height").addText(n=>n.setPlaceholder(d.bilibiliEmbedHeight).setValue(this.plugin.settings.bilibiliEmbedHeight||d.bilibiliEmbedHeight).onChange(async r=>{this.plugin.settings.bilibiliEmbedHeight=r,await this.plugin.saveSettings()})),e.createEl("h2",{text:"Twitter"}),new v.Setting(e).setName("Twitter content type slug").setDesc(this.createTemplateVariableReferenceDiv()).addText(n=>n.setPlaceholder(`Defaults to ${d.twitterContentTypeSlug}`).setValue(typeof this.plugin.settings.twitterContentTypeSlug=="undefined"?d.twitterContentTypeSlug:this.plugin.settings.twitterContentTypeSlug).onChange(async r=>{this.plugin.settings.twitterContentTypeSlug=r,await this.plugin.saveSettings()})),new v.Setting(e).setName("Twitter note template title").setDesc(this.createTemplateVariableReferenceDiv()).addText(n=>n.setPlaceholder("Defaults to %tweetAuthorName%").setValue(this.plugin.settings.twitterNoteTitle||d.twitterNoteTitle).onChange(async r=>{this.plugin.settings.twitterNoteTitle=r,await this.plugin.saveSettings()})),new v.Setting(e).setName("Twitter note template").setDesc(this.createTemplateVariableReferenceDiv()).addTextArea(n=>{n.setValue(this.plugin.settings.twitterNote||d.twitterNote).onChange(async r=>{this.plugin.settings.twitterNote=r,await this.plugin.saveSettings()}),n.inputEl.rows=10,n.inputEl.cols=25}),e.createEl("h2",{text:"Stack Exchange"}),new v.Setting(e).setName("Stack Exchange content type slug").setDesc(this.createTemplateVariableReferenceDiv()).addText(n=>n.setPlaceholder(`Defaults to ${d.stackExchangeContentType}`).setValue(typeof this.plugin.settings.stackExchangeContentType=="undefined"?d.stackExchangeContentType:this.plugin.settings.stackExchangeContentType).onChange(async r=>{this.plugin.settings.stackExchangeContentType=r,await this.plugin.saveSettings()})),new v.Setting(e).setName("Stack Exchange note title template").addText(n=>n.setPlaceholder("Defaults to %title%").setValue(this.plugin.settings.stackExchangeNoteTitle||d.stackExchangeNoteTitle).onChange(async r=>{this.plugin.settings.stackExchangeNoteTitle=r,await this.plugin.saveSettings()})),new v.Setting(e).setName("Stack Exchange question note template").setDesc(this.createTemplateVariableReferenceDiv()).addTextArea(n=>{n.setValue(this.plugin.settings.stackExchangeNote||d.stackExchangeNote).onChange(async r=>{this.plugin.settings.stackExchangeNote=r,await this.plugin.saveSettings()}),n.inputEl.rows=10,n.inputEl.cols=25}),new v.Setting(e).setName("Stack Exchange answer template").setDesc(this.createTemplateVariableReferenceDiv()).addTextArea(n=>{n.setValue(this.plugin.settings.stackExchangeAnswer||d.stackExchangeAnswer).onChange(async r=>{this.plugin.settings.stackExchangeAnswer=r,await this.plugin.saveSettings()}),n.inputEl.rows=10,n.inputEl.cols=25}),new v.Setting(e).setName("Download media attachments").setDesc("Media attachments will be downloaded to the assets directory (Desktop App feature only). To dynamically change destination directory you can use variables. Check variables reference to learn more.").addToggle(n=>n.setValue(Object.prototype.hasOwnProperty.call(this.plugin.settings,"downloadStackExchangeAssets")?this.plugin.settings.downloadStackExchangeAssets:d.downloadStackExchangeAssets).onChange(async r=>{this.plugin.settings.downloadStackExchangeAssets=r,r===!1&&(this.plugin.settings.downloadStackExchangeAssetsInDir=!1),await this.plugin.saveSettings(),this.display()})),new v.Setting(e).setName("Download media attachments to note directory").setDesc("Media attachments will be downloaded to the dedicated note assets directory (Desktop App feature only). Overrides assets directory template.").addToggle(n=>n.setValue(Object.prototype.hasOwnProperty.call(this.plugin.settings,"downloadStackExchangeAssetsInDir")?this.plugin.settings.downloadStackExchangeAssetsInDir:d.downloadStackExchangeAssetsInDir).onChange(async r=>{this.plugin.settings.downloadStackExchangeAssetsInDir=r,r===!0&&(this.plugin.settings.downloadStackExchangeAssets=!0),await this.plugin.saveSettings(),this.display()})),e.createEl("h2",{text:"Mastodon"}),new v.Setting(e).setName("Mastodon content type slug").setDesc(this.createTemplateVariableReferenceDiv()).addText(n=>n.setPlaceholder(`Defaults to ${d.mastodonContentTypeSlug}`).setValue(typeof this.plugin.settings.mastodonContentTypeSlug=="undefined"?d.mastodonContentTypeSlug:this.plugin.settings.mastodonContentTypeSlug).onChange(async r=>{this.plugin.settings.mastodonContentTypeSlug=r,await this.plugin.saveSettings()})),new v.Setting(e).setName("Mastodon note template title").setDesc(this.createTemplateVariableReferenceDiv()).addText(n=>n.setPlaceholder("Defaults to %tootAuthorName%").setValue(this.plugin.settings.mastodonNoteTitle||d.mastodonNoteTitle).onChange(async r=>{this.plugin.settings.mastodonNoteTitle=r,await this.plugin.saveSettings()})),new v.Setting(e).setName("Mastodon note template").setDesc(this.createTemplateVariableReferenceDiv()).addTextArea(n=>{n.setValue(this.plugin.settings.mastodonNote||d.mastodonNote).onChange(async r=>{this.plugin.settings.mastodonNote=r,await this.plugin.saveSettings()}),n.inputEl.rows=10,n.inputEl.cols=25}),new v.Setting(e).setName("Download media attachments").setDesc("Media attachments will be downloaded to the assets directory (Desktop App feature only). To dynamically change destination directory you can use variables. Check variables reference to learn more.").addToggle(n=>n.setValue(Object.prototype.hasOwnProperty.call(this.plugin.settings,"downloadMastodonMediaAttachments")?this.plugin.settings.downloadMastodonMediaAttachments:d.downloadMastodonMediaAttachments).onChange(async r=>{this.plugin.settings.downloadMastodonMediaAttachments=r,r===!1&&(this.plugin.settings.downloadMastodonMediaAttachmentsInDir=!1),await this.plugin.saveSettings(),this.display()})),new v.Setting(e).setName("Download media attachments to note directory").setDesc("Media attachments will be downloaded to the dedicated note assets directory (Desktop App feature only). Overrides assets directory template.").addToggle(n=>n.setValue(Object.prototype.hasOwnProperty.call(this.plugin.settings,"downloadMastodonMediaAttachmentsInDir")?this.plugin.settings.downloadMastodonMediaAttachmentsInDir:d.downloadMastodonMediaAttachmentsInDir).onChange(async r=>{this.plugin.settings.downloadMastodonMediaAttachmentsInDir=r,r===!0&&(this.plugin.settings.downloadMastodonMediaAttachments=!0),await this.plugin.saveSettings(),this.display()})),new v.Setting(e).setName("Save replies").setDesc("If enabled, replies of toot will be saved.").addToggle(n=>n.setValue(Object.prototype.hasOwnProperty.call(this.plugin.settings,"saveMastodonReplies")?this.plugin.settings.saveMastodonReplies:d.saveMastodonReplies).onChange(async r=>{this.plugin.settings.saveMastodonReplies=r,await this.plugin.saveSettings()})),new v.Setting(e).setName("Mastodon reply template").addTextArea(n=>{n.setValue(this.plugin.settings.mastodonReply||d.mastodonReply).onChange(async r=>{this.plugin.settings.mastodonReply=r,await this.plugin.saveSettings()}),n.inputEl.rows=10,n.inputEl.cols=25}),e.createEl("h2",{text:"TikTok"}),new v.Setting(e).setName("TikTok content type slug").setDesc(this.createTemplateVariableReferenceDiv()).addText(n=>n.setPlaceholder(`Defaults to ${d.tikTokContentTypeSlug}`).setValue(typeof this.plugin.settings.tikTokContentTypeSlug=="undefined"?d.tikTokContentTypeSlug:this.plugin.settings.tikTokContentTypeSlug).onChange(async r=>{this.plugin.settings.tikTokContentTypeSlug=r,await this.plugin.saveSettings()})),new v.Setting(e).setName("TikTok note title template").setDesc(this.createTemplateVariableReferenceDiv()).addText(n=>n.setPlaceholder("TikTok from %authorName% (%date%)").setValue(this.plugin.settings.tikTokNoteTitle||d.tikTokNoteTitle).onChange(async r=>{this.plugin.settings.tikTokNoteTitle=r,await this.plugin.saveSettings()})),new v.Setting(e).setName("TikTok note template").setDesc(this.createTemplateVariableReferenceDiv()).addTextArea(n=>{n.setValue(this.plugin.settings.tikTokNote||d.tikTokNote).onChange(async r=>{this.plugin.settings.tikTokNote=r,await this.plugin.saveSettings()}),n.inputEl.rows=10,n.inputEl.cols=25}),new v.Setting(e).setName("TikTok embed player width").addText(n=>n.setPlaceholder(d.tikTokEmbedWidth).setValue(this.plugin.settings.tikTokEmbedWidth||d.tikTokEmbedWidth).onChange(async r=>{this.plugin.settings.tikTokEmbedWidth=r,await this.plugin.saveSettings()})),new v.Setting(e).setName("TikTok embed player height").addText(n=>n.setPlaceholder(d.tikTokEmbedHeight).setValue(this.plugin.settings.tikTokEmbedHeight||d.tikTokEmbedHeight).onChange(async r=>{this.plugin.settings.tikTokEmbedHeight=r,await this.plugin.saveSettings()})),e.createEl("h2",{text:"Readable Article"}),new v.Setting(e).setName("Readable content type slug").setDesc(this.createTemplateVariableReferenceDiv()).addText(n=>n.setPlaceholder(`Defaults to ${d.parseableArticleContentType}`).setValue(typeof this.plugin.settings.parseableArticleContentType=="undefined"?d.parseableArticleContentType:this.plugin.settings.parseableArticleContentType).onChange(async r=>{this.plugin.settings.parseableArticleContentType=r,await this.plugin.saveSettings()})),new v.Setting(e).setName("Readable article note template title").setDesc(this.createTemplateVariableReferenceDiv()).addText(n=>n.setPlaceholder("Defaults to %title%").setValue(this.plugin.settings.parseableArticleNoteTitle||d.parseableArticleNoteTitle).onChange(async r=>{this.plugin.settings.parseableArticleNoteTitle=r,await this.plugin.saveSettings()})),new v.Setting(e).setName("Readable article note template").setDesc(this.createTemplateVariableReferenceDiv()).addTextArea(n=>{n.setValue(this.plugin.settings.parsableArticleNote||d.parsableArticleNote).onChange(async r=>{this.plugin.settings.parsableArticleNote=r,await this.plugin.saveSettings()}),n.inputEl.rows=10,n.inputEl.cols=25}),new v.Setting(e).setName("Download images").setDesc("Images from article will be downloaded to the assets directory (Desktop App feature only). To dynamically change destination directory you can use variables. Check variables reference to learn more.").addToggle(n=>n.setValue(Object.prototype.hasOwnProperty.call(this.plugin.settings,"downloadImages")?this.plugin.settings.downloadImages:d.downloadImages).onChange(async r=>{this.plugin.settings.downloadImages=r,r===!1&&(this.plugin.settings.downloadImagesInArticleDir=!1),await this.plugin.saveSettings(),this.display()})),new v.Setting(e).setName("Download images to note directory").setDesc("Images from article will be downloaded to the dedicated note assets directory (Desktop App feature only). Overrides assets directory template.").addToggle(n=>n.setValue(Object.prototype.hasOwnProperty.call(this.plugin.settings,"downloadImagesInArticleDir")?this.plugin.settings.downloadImagesInArticleDir:d.downloadImagesInArticleDir).onChange(async r=>{this.plugin.settings.downloadImagesInArticleDir=r,r===!0&&(this.plugin.settings.downloadImages=!0),await this.plugin.saveSettings(),this.display()})),e.createEl("h2",{text:"Nonreadable Article"}),new v.Setting(e).setName("Nonreadable content type slug").setDesc(this.createTemplateVariableReferenceDiv()).addText(n=>n.setPlaceholder(`Defaults to ${d.notParseableArticleContentType}`).setValue(typeof this.plugin.settings.notParseableArticleContentType=="undefined"?d.notParseableArticleContentType:this.plugin.settings.notParseableArticleContentType).onChange(async r=>{this.plugin.settings.notParseableArticleContentType=r,await this.plugin.saveSettings()})),new v.Setting(e).setName("Nonreadable article note template title").setDesc(this.createTemplateVariableReferenceDiv()).addText(n=>n.setPlaceholder("Defaults to 'Article %date%'").setValue(this.plugin.settings.notParseableArticleNoteTitle||d.notParseableArticleNoteTitle).onChange(async r=>{this.plugin.settings.notParseableArticleNoteTitle=r,await this.plugin.saveSettings()})),new v.Setting(e).setName("Nonreadable article note template").setDesc(this.createTemplateVariableReferenceDiv()).addTextArea(n=>{n.setValue(this.plugin.settings.notParsableArticleNote||d.notParsableArticleNote).onChange(async r=>{this.plugin.settings.notParsableArticleNote=r,await this.plugin.saveSettings()}),n.inputEl.rows=10,n.inputEl.cols=25}),e.createEl("h2",{text:"Text Snippet"}),new v.Setting(e).setName("Text Snippet content type slug").setDesc(this.createTemplateVariableReferenceDiv()).addText(n=>n.setPlaceholder(`Defaults to ${d.textSnippetContentType}`).setValue(typeof this.plugin.settings.textSnippetContentType=="undefined"?d.textSnippetContentType:this.plugin.settings.textSnippetContentType).onChange(async r=>{this.plugin.settings.textSnippetContentType=r,await this.plugin.saveSettings()})),new v.Setting(e).setName("Text snippet note template title").setDesc(this.createTemplateVariableReferenceDiv()).addText(n=>n.setPlaceholder("Defaults to 'Note %date%'").setValue(this.plugin.settings.textSnippetNoteTitle||d.textSnippetNoteTitle).onChange(async r=>{this.plugin.settings.textSnippetNoteTitle=r,await this.plugin.saveSettings()})),new v.Setting(e).setName("Text snippet note template").setDesc(this.createTemplateVariableReferenceDiv()).addTextArea(n=>{n.setValue(this.plugin.settings.textSnippetNote||d.textSnippetNote).onChange(async r=>{this.plugin.settings.textSnippetNote=r,await this.plugin.saveSettings()}),n.inputEl.rows=10,n.inputEl.cols=25}),e.createEl("h2",{text:"Advanced"});let a=mi(this.plugin.getPlatformType());new v.Setting(e).setName("Maximum file path length").setDesc(`Defaults to ${a.path} characters on your current platform.`).addText(n=>n.setPlaceholder(String(a.path)).onChange(async r=>{let s=r.trim();if(s!==""&&Number.isNaN(Number(s))){new v.Notice("Maximum file path length must be a number.");return}s===""?this.plugin.settings.filesystemLimitPath=null:this.plugin.settings.filesystemLimitPath=Number(s),await this.plugin.saveSettings()})),new v.Setting(e).setName("Maximum file name length").setDesc(`Defaults to ${a.fileName} characters on your current platform.`).addText(n=>n.setPlaceholder(String(a.fileName)).onChange(async r=>{let s=r.trim();if(s!==""&&Number.isNaN(Number(s))){new v.Notice("Maximum file name length must be a number.");return}s===""?this.plugin.settings.filesystemLimitFileName=null:this.plugin.settings.filesystemLimitFileName=Number(s),await this.plugin.saveSettings()}))}createHTMLDiv(e){return createFragment(a=>a.createDiv().innerHTML=e)}createTemplateVariableReferenceDiv(e=""){return this.createHTMLDiv(`<p>${e} See the <a href="https://github.com/DominikPieper/obsidian-ReadItLater?tab=readme-ov-file#template-engine">template variables reference</a></p>`)}};var Ce=require("obsidian"),Pt=St(Na());var M=class{constructor(t,e,a,n,r){this.fileName=t;this.fileExtension=e;this.content=a;this.contentType=n;this.createdAt=r;this.fileName=Z(this.fileName)}getFullFilename(){return`${this.fileName}.${this.fileExtension}`}};var j=class{constructor(t,e,a){L(this,"app");L(this,"plugin");L(this,"templateEngine");this.app=t,this.plugin=e,this.templateEngine=a}isValidUrl(t){return ue(t)}getFormattedDateForFilename(t){return qe(t,this.plugin.settings.dateTitleFmt)}getFormattedDateForContent(t){return qe(t,this.plugin.settings.dateContentFmt)}};var gi=class extends j{constructor(){super(...arguments);L(this,"PATTERN",/(youtube.com|youtu.be)\/(watch|shorts)?(\?v=|\/)?([^&#?]*)/)}test(e){return this.isValidUrl(e)&&this.PATTERN.test(e)}async prepareNote(e){let a=new Date,n=this.plugin.settings.youtubeApiKey===""?await this.parseSchema(e,a):await this.parseApiResponse(e,a),r=this.templateEngine.render(this.plugin.settings.youtubeNote,n),s=this.templateEngine.render(this.plugin.settings.youtubeNoteTitle,{title:n.videoTitle,date:this.getFormattedDateForFilename(a)});return new M(s,"md",r,this.plugin.settings.youtubeContentTypeSlug,a)}async parseApiResponse(e,a){var r,s,p,l,c,u,x,D,T,k;let n=this.PATTERN.exec(e)[4];try{let E=await(0,Ce.request)({method:"GET",url:`https://www.googleapis.com/youtube/v3/videos?part=contentDetails,snippet,statistics,status,topicDetails&id=${n}&key=${this.plugin.settings.youtubeApiKey}`,headers:{Accept:"application/json"}}),S=JSON.parse(E);if(S.items.length===0)throw new Error(`Video (${e}) cannot be fetched from API`);let C=S.items[0],H=await(0,Ce.request)({method:"GET",url:`https://www.googleapis.com/youtube/v3/channels?part=snippet,contentDetails,statistics&id=${C.snippet.channelId}&key=${this.plugin.settings.youtubeApiKey}`,headers:{Accept:"application/json"}}),z=JSON.parse(H);if(z.items.length===0)throw new Error(`Channel (${C.snippet.channelId}) cannot be fetched from API`);let b=z.items[0],Y=(0,Pt.parse)(C.contentDetails.duration),w=Object.prototype.hasOwnProperty.call(C,"tags")?C.snippet.tags.map(V=>V.replace(/[\s:\-_.]/g,"").replace(/^/,"#")):[];return{date:this.getFormattedDateForContent(a),videoId:C.id,videoURL:e,videoTitle:C.snippet.title,videoDescription:C.snippet.description,videoThumbnail:(T=(D=(c=(s=(r=C.snippet.thumbnails)==null?void 0:r.maxres)==null?void 0:s.url)!=null?c:(l=(p=C.snippet.thumbnails)==null?void 0:p.medium)==null?void 0:l.url)!=null?D:(x=(u=C.snippet.thumbnails)==null?void 0:u.default)==null?void 0:x.url)!=null?T:"",videoPlayer:this.getEmbedPlayer(C.id),videoDuration:(0,Pt.toSeconds)(Y),videoDurationFormatted:this.formatDuration(Y),videoPublishDate:(0,Ce.moment)(C.snippet.publishedAt).format(this.plugin.settings.dateContentFmt),videoViewsCount:C.statistics.viewCount,videoTags:w.join(" "),channelId:b.id,channelURL:`https://www.youtube.com/channel/${b.id}`,channelName:(k=b.snippet.title)!=null?k:"",extra:{thumbnails:C.snippet.thumbnails,publishedAt:(0,Ce.moment)(C.snippet.publishedAt).toDate(),tags:w,channel:{thumbnails:b.snippet.thumbnails}}}}catch(E){Rt(E)}}async parseSchema(e,a){var n,r,s,p,l,c,u,x,D,T,k,E,S,C;try{let H=await(0,Ce.request)({method:"GET",url:e,headers:{"user-agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Safari/537.36"}}),z=new DOMParser().parseFromString(H,"text/html"),b=z.querySelector('[itemtype*="http://schema.org/VideoObject"]');if(b===null)throw new Error("Unable to find Schema.org element in HTML.");let Y=(r=(n=b==null?void 0:b.querySelector('[itemprop="identifier"]'))==null?void 0:n.getAttribute("content"))!=null?r:"",w=b.querySelector('[itemtype="http://schema.org/Person"]');return{date:this.getFormattedDateForContent(a),videoId:Y,videoURL:e,videoTitle:(p=(s=b==null?void 0:b.querySelector('[itemprop="name"]'))==null?void 0:s.getAttribute("content"))!=null?p:"",videoDescription:(c=(l=b==null?void 0:b.querySelector('[itemprop="description"]'))==null?void 0:l.getAttribute("content"))!=null?c:"",videoThumbnail:(x=(u=z.querySelector('meta[property="og:image"]'))==null?void 0:u.getAttribute("content"))!=null?x:"",videoPlayer:this.getEmbedPlayer(Y),videoDuration:0,videoDurationFormatted:"",videoPublishDate:"",videoViewsCount:0,videoTags:"",channelId:(T=(D=b==null?void 0:b.querySelector('[itemprop="channelId"'))==null?void 0:D.getAttribute("content"))!=null?T:"",channelURL:(E=(k=w==null?void 0:w.querySelector('[itemprop="url"]'))==null?void 0:k.getAttribute("href"))!=null?E:"",channelName:(C=(S=w==null?void 0:w.querySelector('[itemprop="name"]'))==null?void 0:S.getAttribute("content"))!=null?C:"",extra:null}}catch(H){Rt(H)}}formatDuration(e){let a="";return e.years>0&&(a=a.concat(" ",`${e.years}y`)),e.months>0&&(a=a.concat(" ",`${e.months}m`)),e.weeks>0&&(a=a.concat(" ",`${e.weeks}w`)),e.days>0&&(a=a.concat(" ",`${e.days}d`)),e.hours>0&&(a=a.concat(" ",`${e.hours}h`)),e.minutes>0&&(a=a.concat(" ",`${e.minutes}m`)),e.seconds>0&&(a=a.concat(" ",`${e.seconds}s`)),a.trim()}getEmbedPlayer(e){let a=this.plugin.settings.youtubeUsePrivacyEnhancedEmbed?"youtube-nocookie.com":"youtube.com";return`<iframe width="${this.plugin.settings.youtubeEmbedWidth}" height="${this.plugin.settings.youtubeEmbedHeight}" src="https://www.${a}/embed/${e}" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>`}},Ea=gi;var Aa=require("obsidian");var hi=class extends j{constructor(){super(...arguments);L(this,"PATTERN",/(vimeo.com)\/(\d+)?/)}test(e){return this.isValidUrl(e)&&this.PATTERN.test(e)}async prepareNote(e){let a=new Date,n=await this.parseSchema(e,a),r=this.templateEngine.render(this.plugin.settings.vimeoNote,n),s=this.templateEngine.render(this.plugin.settings.vimeoNoteTitle,{title:n.videoTitle,date:this.getFormattedDateForFilename(a)});return new M(s,"md",r,this.plugin.settings.vimeoContentTypeSlug,a)}async parseSchema(e,a){var u,x,D,T,k,E;let n=await(0,Aa.request)({method:"GET",url:e,headers:{"user-agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/108.0.0.0 Safari/537.36"}}),s=new DOMParser().parseFromString(n,"text/html").querySelector('script[type="application/ld+json"]'),l=JSON.parse(s.textContent)[0],c=this.PATTERN.exec(e);return{date:this.getFormattedDateForContent(a),videoId:c.length===3?c[2]:"",videoURL:(u=l==null?void 0:l.url)!=null?u:"",videoTitle:(x=l==null?void 0:l.name)!=null?x:"",videoPlayer:`<iframe width="${this.plugin.settings.vimeoEmbedWidth}" height="${this.plugin.settings.vimeoEmbedHeight}" src="${l==null?void 0:l.embedUrl}" title="Vimeo video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>`,channelName:(T=(D=l==null?void 0:l.author)==null?void 0:D.name)!=null?T:"",channelURL:(E=(k=l==null?void 0:l.author)==null?void 0:k.url)!=null?E:""}}},_a=hi;var Sa=require("obsidian");var fi=class extends j{constructor(){super(...arguments);L(this,"PATTERN",/(bilibili.com)\/(video)?\/([a-z0-9]+)?/i)}test(e){return this.isValidUrl(e)&&this.PATTERN.test(e)}async prepareNote(e){let a=new Date,n=await this.getNoteData(e,a),r=this.templateEngine.render(this.plugin.settings.bilibiliNote,n),s=this.templateEngine.render(this.plugin.settings.bilibiliNoteTitle,{title:n.videoTitle,date:this.getFormattedDateForFilename(a)});return new M(s,"md",r,this.plugin.settings.bilibiliContentTypeSlug,a)}async getNoteData(e,a){var p,l;let n=await(0,Sa.request)({method:"GET",url:e,headers:{"user-agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/103.0.0.0 Safari/537.36"}}),r=new DOMParser().parseFromString(n,"text/html"),s=(p=this.PATTERN.exec(e)[3])!=null?p:"";return{date:this.getFormattedDateForContent(a),videoId:s,videoTitle:(l=r.querySelector("[property~='og:title']").getAttribute("content"))!=null?l:"",videoURL:e,videoPlayer:`<iframe width="${this.plugin.settings.bilibiliEmbedWidth}" height="${this.plugin.settings.bilibiliEmbedHeight}" src="https://player.bilibili.com/player.html?autoplay=0&bvid=${s}" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"></iframe>`}}},Da=fi;var Ot=require("obsidian");function ar(i){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var a in e)e.hasOwnProperty(a)&&(i[a]=e[a])}return i}function yi(i,t){return Array(t+1).join(i)}function nr(i){return i.replace(/^\n*/,"")}function rr(i){for(var t=i.length;t>0&&i[t-1]===`
`;)t--;return i.substring(0,t)}var sr=["ADDRESS","ARTICLE","ASIDE","AUDIO","BLOCKQUOTE","BODY","CANVAS","CENTER","DD","DIR","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","FRAMESET","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","HTML","ISINDEX","LI","MAIN","MENU","NAV","NOFRAMES","NOSCRIPT","OL","OUTPUT","P","PRE","SECTION","TABLE","TBODY","TD","TFOOT","TH","THEAD","TR","UL"];function Ti(i){return wi(i,sr)}var Ra=["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"];function La(i){return wi(i,Ra)}function or(i){return Ia(i,Ra)}var Pa=["A","TABLE","THEAD","TBODY","TFOOT","TH","TD","IFRAME","SCRIPT","AUDIO","VIDEO"];function lr(i){return wi(i,Pa)}function pr(i){return Ia(i,Pa)}function wi(i,t){return t.indexOf(i.nodeName)>=0}function Ia(i,t){return i.getElementsByTagName&&t.some(function(e){return i.getElementsByTagName(e).length})}var Q={};Q.paragraph={filter:"p",replacement:function(i){return`

`+i+`

`}};Q.lineBreak={filter:"br",replacement:function(i,t,e){return e.br+`
`}};Q.heading={filter:["h1","h2","h3","h4","h5","h6"],replacement:function(i,t,e){var a=Number(t.nodeName.charAt(1));if(e.headingStyle==="setext"&&a<3){var n=yi(a===1?"=":"-",i.length);return`

`+i+`
`+n+`

`}else return`

`+yi("#",a)+" "+i+`

`}};Q.blockquote={filter:"blockquote",replacement:function(i){return i=i.replace(/^\n+|\n+$/g,""),i=i.replace(/^/gm,"> "),`

`+i+`

`}};Q.list={filter:["ul","ol"],replacement:function(i,t){var e=t.parentNode;return e.nodeName==="LI"&&e.lastElementChild===t?`
`+i:`

`+i+`

`}};Q.listItem={filter:"li",replacement:function(i,t,e){i=i.replace(/^\n+/,"").replace(/\n+$/,`
`).replace(/\n/gm,`
    `);var a=e.bulletListMarker+"   ",n=t.parentNode;if(n.nodeName==="OL"){var r=n.getAttribute("start"),s=Array.prototype.indexOf.call(n.children,t);a=(r?Number(r)+s:s+1)+".  "}return a+i+(t.nextSibling&&!/\n$/.test(i)?`
`:"")}};Q.indentedCodeBlock={filter:function(i,t){return t.codeBlockStyle==="indented"&&i.nodeName==="PRE"&&i.firstChild&&i.firstChild.nodeName==="CODE"},replacement:function(i,t,e){return`

    `+t.firstChild.textContent.replace(/\n/g,`
    `)+`

`}};Q.fencedCodeBlock={filter:function(i,t){return t.codeBlockStyle==="fenced"&&i.nodeName==="PRE"&&i.firstChild&&i.firstChild.nodeName==="CODE"},replacement:function(i,t,e){for(var a=t.firstChild.getAttribute("class")||"",n=(a.match(/language-(\S+)/)||[null,""])[1],r=t.firstChild.textContent,s=e.fence.charAt(0),p=3,l=new RegExp("^"+s+"{3,}","gm"),c;c=l.exec(r);)c[0].length>=p&&(p=c[0].length+1);var u=yi(s,p);return`

`+u+n+`
`+r.replace(/\n$/,"")+`
`+u+`

`}};Q.horizontalRule={filter:"hr",replacement:function(i,t,e){return`

`+e.hr+`

`}};Q.inlineLink={filter:function(i,t){return t.linkStyle==="inlined"&&i.nodeName==="A"&&i.getAttribute("href")},replacement:function(i,t){var e=t.getAttribute("href");e&&(e=e.replace(/([()])/g,"\\$1"));var a=It(t.getAttribute("title"));return a&&(a=' "'+a.replace(/"/g,'\\"')+'"'),"["+i+"]("+e+a+")"}};Q.referenceLink={filter:function(i,t){return t.linkStyle==="referenced"&&i.nodeName==="A"&&i.getAttribute("href")},replacement:function(i,t,e){var a=t.getAttribute("href"),n=It(t.getAttribute("title"));n&&(n=' "'+n+'"');var r,s;switch(e.linkReferenceStyle){case"collapsed":r="["+i+"][]",s="["+i+"]: "+a+n;break;case"shortcut":r="["+i+"]",s="["+i+"]: "+a+n;break;default:var p=this.references.length+1;r="["+i+"]["+p+"]",s="["+p+"]: "+a+n}return this.references.push(s),r},references:[],append:function(i){var t="";return this.references.length&&(t=`

`+this.references.join(`
`)+`

`,this.references=[]),t}};Q.emphasis={filter:["em","i"],replacement:function(i,t,e){return i.trim()?e.emDelimiter+i+e.emDelimiter:""}};Q.strong={filter:["strong","b"],replacement:function(i,t,e){return i.trim()?e.strongDelimiter+i+e.strongDelimiter:""}};Q.code={filter:function(i){var t=i.previousSibling||i.nextSibling,e=i.parentNode.nodeName==="PRE"&&!t;return i.nodeName==="CODE"&&!e},replacement:function(i){if(!i)return"";i=i.replace(/\r?\n|\r/g," ");for(var t=/^`|^ .*?[^ ].* $|`$/.test(i)?" ":"",e="`",a=i.match(/`+/gm)||[];a.indexOf(e)!==-1;)e=e+"`";return e+t+i+t+e}};Q.image={filter:"img",replacement:function(i,t){var e=It(t.getAttribute("alt")),a=t.getAttribute("src")||"",n=It(t.getAttribute("title")),r=n?' "'+n+'"':"";return a?"!["+e+"]("+a+r+")":""}};function It(i){return i?i.replace(/(\n+\s*)+/g,`
`):""}function Ma(i){this.options=i,this._keep=[],this._remove=[],this.blankRule={replacement:i.blankReplacement},this.keepReplacement=i.keepReplacement,this.defaultRule={replacement:i.defaultReplacement},this.array=[];for(var t in i.rules)this.array.push(i.rules[t])}Ma.prototype={add:function(i,t){this.array.unshift(t)},keep:function(i){this._keep.unshift({filter:i,replacement:this.keepReplacement})},remove:function(i){this._remove.unshift({filter:i,replacement:function(){return""}})},forNode:function(i){if(i.isBlank)return this.blankRule;var t;return(t=vi(this.array,i,this.options))||(t=vi(this._keep,i,this.options))||(t=vi(this._remove,i,this.options))?t:this.defaultRule},forEach:function(i){for(var t=0;t<this.array.length;t++)i(this.array[t],t)}};function vi(i,t,e){for(var a=0;a<i.length;a++){var n=i[a];if(cr(n,t,e))return n}}function cr(i,t,e){var a=i.filter;if(typeof a=="string"){if(a===t.nodeName.toLowerCase())return!0}else if(Array.isArray(a)){if(a.indexOf(t.nodeName.toLowerCase())>-1)return!0}else if(typeof a=="function"){if(a.call(i,t,e))return!0}else throw new TypeError("`filter` needs to be a string, array, or function")}function mr(i){var t=i.element,e=i.isBlock,a=i.isVoid,n=i.isPre||function(x){return x.nodeName==="PRE"};if(!(!t.firstChild||n(t))){for(var r=null,s=!1,p=null,l=ka(p,t,n);l!==t;){if(l.nodeType===3||l.nodeType===4){var c=l.data.replace(/[ \r\n\t]+/g," ");if((!r||/ $/.test(r.data))&&!s&&c[0]===" "&&(c=c.substr(1)),!c){l=bi(l);continue}l.data=c,r=l}else if(l.nodeType===1)e(l)||l.nodeName==="BR"?(r&&(r.data=r.data.replace(/ $/,"")),r=null,s=!1):a(l)||n(l)?(r=null,s=!0):r&&(s=!1);else{l=bi(l);continue}var u=ka(p,l,n);p=l,l=u}r&&(r.data=r.data.replace(/ $/,""),r.data||bi(r))}}function bi(i){var t=i.nextSibling||i.parentNode;return i.parentNode.removeChild(i),t}function ka(i,t,e){return i&&i.parentNode===t||e(t)?t.nextSibling||t.parentNode:t.firstChild||t.nextSibling||t.parentNode}var Ni=typeof window!="undefined"?window:{};function dr(){var i=Ni.DOMParser,t=!1;try{new i().parseFromString("","text/html")&&(t=!0)}catch(e){}return t}function ur(){var i=function(){};return gr()?i.prototype.parseFromString=function(t){var e=new window.ActiveXObject("htmlfile");return e.designMode="on",e.open(),e.write(t),e.close(),e}:i.prototype.parseFromString=function(t){var e=document.implementation.createHTMLDocument("");return e.open(),e.write(t),e.close(),e},i}function gr(){var i=!1;try{document.implementation.createHTMLDocument("").open()}catch(t){Ni.ActiveXObject&&(i=!0)}return i}var hr=dr()?Ni.DOMParser:ur();function fr(i,t){var e;if(typeof i=="string"){var a=vr().parseFromString('<x-turndown id="turndown-root">'+i+"</x-turndown>","text/html");e=a.getElementById("turndown-root")}else e=i.cloneNode(!0);return mr({element:e,isBlock:Ti,isVoid:La,isPre:t.preformattedCode?br:null}),e}var xi;function vr(){return xi=xi||new hr,xi}function br(i){return i.nodeName==="PRE"||i.nodeName==="CODE"}function xr(i,t){return i.isBlock=Ti(i),i.isCode=i.nodeName==="CODE"||i.parentNode.isCode,i.isBlank=yr(i),i.flankingWhitespace=Tr(i,t),i}function yr(i){return!La(i)&&!lr(i)&&/^\s*$/i.test(i.textContent)&&!or(i)&&!pr(i)}function Tr(i,t){if(i.isBlock||t.preformattedCode&&i.isCode)return{leading:"",trailing:""};var e=wr(i.textContent);return e.leadingAscii&&Ca("left",i,t)&&(e.leading=e.leadingNonAscii),e.trailingAscii&&Ca("right",i,t)&&(e.trailing=e.trailingNonAscii),{leading:e.leading,trailing:e.trailing}}function wr(i){var t=i.match(/^(([ \t\r\n]*)(\s*))(?:(?=\S)[\s\S]*\S)?((\s*?)([ \t\r\n]*))$/);return{leading:t[1],leadingAscii:t[2],leadingNonAscii:t[3],trailing:t[4],trailingNonAscii:t[5],trailingAscii:t[6]}}function Ca(i,t,e){var a,n,r;return i==="left"?(a=t.previousSibling,n=/ $/):(a=t.nextSibling,n=/^ /),a&&(a.nodeType===3?r=n.test(a.nodeValue):e.preformattedCode&&a.nodeName==="CODE"?r=!1:a.nodeType===1&&!Ti(a)&&(r=n.test(a.textContent))),r}var Nr=Array.prototype.reduce,Er=[[/\\/g,"\\\\"],[/\*/g,"\\*"],[/^-/g,"\\-"],[/^\+ /g,"\\+ "],[/^(=+)/g,"\\$1"],[/^(#{1,6}) /g,"\\$1 "],[/`/g,"\\`"],[/^~~~/g,"\\~~~"],[/\[/g,"\\["],[/\]/g,"\\]"],[/^>/g,"\\>"],[/_/g,"\\_"],[/^(\d+)\. /g,"$1\\. "]];function Mt(i){if(!(this instanceof Mt))return new Mt(i);var t={rules:Q,headingStyle:"setext",hr:"* * *",bulletListMarker:"*",codeBlockStyle:"indented",fence:"```",emDelimiter:"_",strongDelimiter:"**",linkStyle:"inlined",linkReferenceStyle:"full",br:"  ",preformattedCode:!1,blankReplacement:function(e,a){return a.isBlock?`

`:""},keepReplacement:function(e,a){return a.isBlock?`

`+a.outerHTML+`

`:a.outerHTML},defaultReplacement:function(e,a){return a.isBlock?`

`+e+`

`:e}};this.options=ar({},t,i),this.rules=new Ma(this.options)}Mt.prototype={turndown:function(i){if(!Sr(i))throw new TypeError(i+" is not a string, or an element/document/fragment node.");if(i==="")return"";var t=Oa.call(this,new fr(i,this.options));return Ar.call(this,t)},use:function(i){if(Array.isArray(i))for(var t=0;t<i.length;t++)this.use(i[t]);else if(typeof i=="function")i(this);else throw new TypeError("plugin must be a Function or an Array of Functions");return this},addRule:function(i,t){return this.rules.add(i,t),this},keep:function(i){return this.rules.keep(i),this},remove:function(i){return this.rules.remove(i),this},escape:function(i){return Er.reduce(function(t,e){return t.replace(e[0],e[1])},i)}};function Oa(i){var t=this;return Nr.call(i.childNodes,function(e,a){a=new xr(a,t.options);var n="";return a.nodeType===3?n=a.isCode?a.nodeValue:t.escape(a.nodeValue):a.nodeType===1&&(n=_r.call(t,a)),Fa(e,n)},"")}function Ar(i){var t=this;return this.rules.forEach(function(e){typeof e.append=="function"&&(i=Fa(i,e.append(t.options)))}),i.replace(/^[\t\r\n]+/,"").replace(/[\t\r\n\s]+$/,"")}function _r(i){var t=this.rules.forNode(i),e=Oa.call(this,i),a=i.flankingWhitespace;return(a.leading||a.trailing)&&(e=e.trim()),a.leading+t.replacement(e,i,this.options)+a.trailing}function Fa(i,t){var e=rr(i),a=nr(t),n=Math.max(i.length-e.length,t.length-a.length),r=`

`.substring(0,n);return e+r+a}function Sr(i){return i!=null&&(typeof i=="string"||i.nodeType&&(i.nodeType===1||i.nodeType===9||i.nodeType===11))}var Ua=Mt;var ja=/highlight-(?:text|source)-([a-z0-9]+)/;function Dr(i){i.addRule("highlightedCodeBlock",{filter:function(t){var e=t.firstChild;return t.nodeName==="DIV"&&ja.test(t.className)&&e&&e.nodeName==="PRE"},replacement:function(t,e,a){var n=e.className||"",r=(n.match(ja)||[null,""])[1];return`

`+a.fence+r+`
`+e.firstChild.textContent+`
`+a.fence+`

`}})}function kr(i){i.addRule("strikethrough",{filter:["del","s","strike"],replacement:function(t){return"~"+t+"~"}})}var Cr=Array.prototype.indexOf,Re={};Re.tableCell={filter:["th","td"],replacement:function(i,t){return Ha(i,t)+za(t,"")}};Re.tableRow={filter:"tr",replacement:function(i,t){var e="",a={left:":--",right:"--:",center:":-:"};if(Rr(t))for(var n=0;n<t.childNodes.length;n++){var r="---",s=(t.childNodes[n].getAttribute("align")||"").toLowerCase();s&&(r=a[s]||r),e+=Ha(r,t.childNodes[n])+za(t.childNodes[n],r)}return`
`+i+(e?`
`+e:"")}};Re.table={filter:function(i){return i.nodeName==="TABLE"&&!Va(i)},replacement:function(i){return i=i.replace(`

`,`
`),`

`+i+`

`}};Re.tableSection={filter:["thead","tbody","tfoot"],replacement:function(i){return i}};Re.captionSection={filter:"caption",replacement:function(i,t){return t.parentNode.nodeName==="TABLE"&&t.parentNode.childNodes[0]===t?i:""}};function Rr(i){var t=i.parentNode,e=t;return(t.nodeName==="THEAD"||t.nodeName==="TFOOT"||t.nodeName==="TBODY")&&(e=t.parentNode),e.nodeName==="TABLE"&&e.rows[0]===i}function Ha(i,t){var e=Cr.call(t.parentNode.childNodes,t),a=" ";return e===0&&(a="| "),i=i.replace(/\r\n/g,`
`).replace(/\n/g," "),i=i.replace(/\|/g,"\\|"),a+i+" |"}function za(i,t){var e=i.getAttribute("colspan")||1;return e<=1?"":(" "+t+" |").repeat(e-1)}function Va(i){for(var t=i.parentNode;t;){if(t.nodeName==="TABLE")return!0;t=t.parentNode}return!1}function Lr(i){i.keep(function(e){return e.nodeName==="TABLE"&&Va(e)});for(var t in Re)i.addRule(t,Re[t])}function Pr(i){i.addRule("taskListItems",{filter:function(t){return t.type==="checkbox"&&t.parentNode.nodeName==="LI"},replacement:function(t,e){return(e.checked?"[x]":"[ ]")+" "}})}function Ba(i){i.use([Dr,kr,Lr,Pr])}async function be(i){let t=Ba,e=new Ua({headingStyle:"atx",hr:"---",bulletListMarker:"-",codeBlockStyle:"fenced",emDelimiter:"*"});return e.use(t),e.addRule("fencedCodeLangBlock",{filter:n=>n.nodeName=="PRE"&&(!n.firstChild||n.firstChild.nodeName!="CODE")&&!n.querySelector("img"),replacement:function(n,r,s){var E;r.innerHTML=r.innerHTML.replaceAll("<br-keep></br-keep>","<br>");let p=(E=r.id)==null?void 0:E.match(/code-lang-(.+)/),l=(p==null?void 0:p.length)>0?p[1]:"",c=r.textContent,u=s.fence.charAt(0),x=3,D=new RegExp("^"+u+"{3,}","gm"),T;for(;T=D.exec(c);)T[0].length>=x&&(x=T[0].length+1);let k=Array(x+1).join(u);return`

`+k+l+`
`+c.replace(/\n$/,"")+`
`+k+`

`}}),e.turndown(i)}var Ei=class extends j{constructor(){super(...arguments);L(this,"PATTERN",/(https:\/\/(twitter|x).com\/([a-zA-Z0-9_]+\/)([a-zA-Z0-9_]+\/[a-zA-Z0-9_]+))/)}test(e){return this.isValidUrl(e)&&this.PATTERN.test(e)}async prepareNote(e){let a=new Date,n=new URL(e);n.hostname==="x.com"&&(n.hostname="twitter.com");let r=await this.getTweetNoteData(n,a),s=this.templateEngine.render(this.plugin.settings.twitterNote,r),p=this.templateEngine.render(this.plugin.settings.twitterNoteTitle,{tweetAuthorName:r.tweetAuthorName,date:this.getFormattedDateForFilename(a)});return new M(p,"md",s,this.plugin.settings.twitterContentTypeSlug,a)}async getTweetNoteData(e,a){let n=JSON.parse(await(0,Ot.request)({method:"GET",contentType:"application/json",url:`https://publish.twitter.com/oembed?url=${e.href}`})),r=await be(n.html);return{date:this.getFormattedDateForContent(a),tweetAuthorName:n.author_name,tweetURL:n.url,tweetContent:r,tweetPublishDate:this.getPublishedDateFromDOM(n.html)}}getPublishedDateFromDOM(e){let n=new DOMParser().parseFromString(e,"text/html").querySelector("blockquote > a"),r=(0,Ot.moment)(n.textContent);return r.isValid()?r.format(this.plugin.settings.dateContentFmt):""}},$a=Ei;var Ft=require("obsidian"),ki=St(Di());var Ci=class extends j{constructor(){super(...arguments);L(this,"PATTERN",/(https:\/\/|http:\/\/)(stackoverflow\.com|serverfault\.com|superuser\.com|askubuntu\.com|stackapps\.com|.*\.stackexchange\.com)\/(q|a|questions)\/(\d+)/)}test(e){return this.isValidUrl(e)&&this.PATTERN.test(e)}async prepareNote(e){let a=new Date,n=await(0,Ft.request)({method:"GET",url:e}),r=new DOMParser().parseFromString(n,"text/html"),s=await this.parseDocument(r),p=this.templateEngine.render(this.plugin.settings.stackExchangeNoteTitle,{title:s.title,date:this.getFormattedDateForFilename(a)}),l;this.plugin.settings.downloadStackExchangeAssetsInDir?(l=this.templateEngine.render(this.plugin.settings.assetsDir,{date:"",fileName:"",contentType:""}),l=`${l}/${Z(p)}`):l=this.templateEngine.render(this.plugin.settings.assetsDir,{date:this.getFormattedDateForFilename(a),fileName:Z(p),contentType:this.plugin.settings.stackExchangeContentType});let c=this.templateEngine.render(this.plugin.settings.stackExchangeNote,this.getNoteData(s,a));return this.plugin.settings.downloadStackExchangeAssets&&Ft.Platform.isDesktop&&(c=await we(this.app,this.plugin,Z(p),c,l)),new M(p,"md",c,this.plugin.settings.stackExchangeContentType,a)}getNoteData(e,a){let n=e.topAnswer?this.templateEngine.render(this.plugin.settings.stackExchangeAnswer,{date:this.getFormattedDateForContent(a),answerContent:e.topAnswer.content,authorName:e.topAnswer.author.name,authorProfileURL:e.topAnswer.author.profile}):"",r="";for(let s=0;s<e.answers.length;s++)r=r.concat(`

***

`,this.templateEngine.render(this.plugin.settings.stackExchangeAnswer,{date:this.getFormattedDateForContent(a),answerContent:e.answers[s].content,authorName:e.answers[s].author.name,authorProfileURL:e.answers[s].author.profile}));return{date:this.getFormattedDateForContent(a),questionTitle:e.title,questionURL:e.url,questionContent:e.content,authorName:e.author.name,authorProfileURL:e.author.profile,topAnswer:n,answers:r.trim(),extra:{question:e}}}async parseDocument(e){var s,p,l,c,u,x,D,T,k,E,S,C,H,z,b,Y;let a;try{a=new URL((l=(s=e.querySelector('link[rel="canonical"]'))==null?void 0:s.getAttribute("href"))!=null?l:(p=e.querySelector('meta[property="og:url"]'))==null?void 0:p.getAttribute("content"))}catch(w){a=null}let n=e.querySelector('#question [itemprop="author"]'),r=[];for(let w of e.querySelectorAll(".answer")){let V=w.querySelector('[itemprop="author"]');r.push({content:await be(ki.sanitize((c=w.querySelector('[itemprop="text"]'))!=null?c:"")),author:{name:(x=(u=V==null?void 0:V.querySelector('[itemprop="name"]'))==null?void 0:u.textContent)!=null?x:"",profile:V instanceof Element&&a instanceof URL?String.prototype.concat(a.origin,(T=(D=V.querySelector("a"))==null?void 0:D.getAttribute("href"))!=null?T:""):""}})}return{title:(E=(k=e.querySelector('#question-header [itemprop="name"]'))==null?void 0:k.textContent)!=null?E:"",content:await be(ki.sanitize((S=e.querySelector('#question [itemprop="text"]'))!=null?S:"")),url:(C=a==null?void 0:a.href)!=null?C:"",topAnswer:r.slice(0,1).shift(),answers:r.slice(1),author:{name:(z=(H=n==null?void 0:n.querySelector('[itemprop="name"]'))==null?void 0:H.textContent)!=null?z:"",profile:n instanceof Element&&a instanceof URL?String.prototype.concat(a.origin,(Y=(b=n.querySelector("a"))==null?void 0:b.getAttribute("href"))!=null?Y:""):""}}}},Ga=Ci;var Le=require("obsidian"),Ut=St(Za()),Qa=St(Di());var Pi=class extends j{test(t){return this.isValidUrl(t)}async prepareNote(t){let e=new URL(t),a=await this.getDocument(e);return this.makeNote(a,e)}async makeNote(t,e){(0,Ut.isProbablyReaderable)(t)||new Le.Notice("@mozilla/readability considers this document to unlikely be readerable.");let a=new Date,n=this.extractPreviewUrl(t),r=new Ut.Readability(t).parse();if(r===null||!Object.prototype.hasOwnProperty.call(r,"content"))return this.notParsableArticle(e.href,n,a);let s=await be(r.content);return this.parsableArticle({date:this.getFormattedDateForContent(a),articleTitle:r.title||"No title",articleURL:e.href,articleReadingTime:this.getEstimatedReadingTime(r),articleContent:s,siteName:r.siteName||"",author:r.byline||"",previewURL:n||"",publishedTime:r.publishedTime!==null?this.getFormattedDateForContent(r.publishedTime):"",readabilityArticle:r},a)}async getDocument(t){var l,c,u,x,D;let e=await(0,Le.request)({method:"GET",url:t.href,headers:{"user-agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Safari/537.36"}}),a=new DOMParser().parseFromString(e,"text/html"),n=a.getElementsByTagName("base"),r=null;n.length>0&&(r=n.item(0).getAttribute("href"),Array.from(n).forEach(T=>{T.remove()}));let s=a.createElement("base");s.setAttribute("href",ci(r!=null?r:t.href,t.origin)),a.head.append(s);let p=Qa.sanitize(a.body.innerHTML);return a.body.innerHTML=p,(l=a.body.querySelectorAll("pre br"))==null||l.forEach(T=>{T.outerHTML="<br-keep></br-keep>"}),(c=a.body.querySelectorAll("h1, h2, h3, h4, h5, h6"))==null||c.forEach(T=>{T.className=""}),(u=a.body.querySelectorAll("[class*=highlight-text],[class*=highlight-source]"))==null||u.forEach(T=>{var E;let k=(E=T.className.match(/highlight-(?:text|source)-([a-z0-9]+)/))==null?void 0:E[1];T.firstElementChild.nodeName=="PRE"&&(T.removeAttribute("data-snippet-clipboard-copy-content"),T.firstElementChild.id=`code-lang-${k}`)}),(x=a.body.querySelectorAll("[class*=language-]"))==null||x.forEach(T=>{var E;let k=(E=T.className.match(/language-([a-z0-9]+)/))==null?void 0:E[1];T.id=`code-lang-${k}`}),(D=a.body.querySelectorAll(".codehilite > pre"))==null||D.forEach(T=>{T.firstChild.nodeName!=="CODE"&&!T.className.includes("language")&&(T.id="code-lang-text")}),a}async parsableArticle(t,e){let a=this.templateEngine.render(this.plugin.settings.parseableArticleNoteTitle,{title:t.articleTitle,date:this.getFormattedDateForFilename(e)}),n=this.templateEngine.render(this.plugin.settings.parsableArticleNote,t);return this.plugin.settings.downloadImages&&Le.Platform.isDesktop&&(n=await we(this.app,this.plugin,Z(a),n,this.getAssetsDir(a,e))),new M(a,"md",n,this.plugin.settings.parseableArticleContentType,e)}async notParsableArticle(t,e,a){console.error("Website not parseable");let n=this.templateEngine.render(this.plugin.settings.notParsableArticleNote,{articleURL:t,previewURL:e}),r=this.templateEngine.render(this.plugin.settings.notParseableArticleNoteTitle,{date:this.getFormattedDateForFilename(a)});return this.plugin.settings.downloadImages&&Le.Platform.isDesktop&&(n=await we(this.app,this.plugin,Z(r),n,this.getAssetsDir(r,a))),new M(r,"md",n,this.plugin.settings.notParseableArticleContentType,a)}extractPreviewUrl(t){let e=t.querySelector('meta[property="og:image"]');return e==null&&(e=t.querySelector('meta[name="twitter:image"]')),e==null?void 0:e.getAttribute("content")}getAssetsDir(t,e){return this.plugin.settings.downloadImagesInArticleDir?`${this.templateEngine.render(this.plugin.settings.assetsDir,{date:"",fileName:"",contentType:""})}/${Z(t)}`:this.templateEngine.render(this.plugin.settings.assetsDir,{date:this.getFormattedDateForFilename(e),fileName:Z(t),contentType:this.plugin.settings.parseableArticleContentType})}getEstimatedReadingTime(t){let e=this.getReadingSpeed(t.lang||"en"),a=t.textContent.trim().split(/\s+/).length;return Math.ceil(a/e)}getReadingSpeed(t){let e=new Map([["en",228],["ar",138],["de",179],["es",218],["fi",161],["fr",195],["he",187],["it",188],["ja",193],["nl",202],["pl",166],["pt",181],["ru",184],["sk",190],["sl",180],["sv",199],["tr",166],["zh",158]]);return e.get(t)||e.get("en")}},Xe=Pi;var Ii=class extends j{test(){return!0}async prepareNote(t){let e=new Date,a=this.templateEngine.render(this.plugin.settings.textSnippetNoteTitle,{date:this.getFormattedDateForFilename(e)}),n=this.templateEngine.render(this.plugin.settings.textSnippetNote,{content:t,date:this.getFormattedDateForContent(e)});return new M(a,"md",n,this.plugin.settings.textSnippetContentType,e)}},en=Ii;var Ke=require("obsidian");var Mi={INSTANCE:"/api/v2/instance",OEMBED:"/api/oembed",STATUS:"/api/v1/statuses",CONTEXT:"/api/v1/statuses/%id%/context"},Oi=class extends j{async test(t){return ue(t)&&await this.testIsMastodon(t)}async prepareNote(t){let e=new Date,a=new URL(t),n=a.pathname.split("/")[2],r=await this.loadStatus(a.hostname,n),s=[];this.plugin.settings.saveMastodonReplies&&(s=await this.loadReplies(a.hostname,n));let p=this.templateEngine.render(this.plugin.settings.mastodonNoteTitle,{tootAuthorName:r.account.display_name,date:this.getFormattedDateForFilename(e)}),l;this.plugin.settings.downloadMastodonMediaAttachmentsInDir?(l=this.templateEngine.render(this.plugin.settings.assetsDir,{date:"",fileName:"",contentType:""}),l=`${l}/${Z(p)}`):l=this.templateEngine.render(this.plugin.settings.assetsDir,{date:this.getFormattedDateForFilename(e),fileName:Z(p),contentType:this.plugin.settings.mastodonContentTypeSlug});let c=await this.getNoteData(r,s,l,Z(p),e),u=this.templateEngine.render(this.plugin.settings.mastodonNote,c);return new M(p,"md",u,this.plugin.settings.mastodonContentTypeSlug,e)}async getNoteData(t,e,a,n,r){let s=await this.parseStatus(t,a,n);if(e.length>0)for(let p=0;p<e.length;p++){let l=await this.parseStatus(e[p],a,n),c=this.templateEngine.render(this.plugin.settings.mastodonReply,{tootAuthorName:e[p].account.display_name,tootURL:e[p].url,tootContent:l});s=s.concat(`

***

`,c)}return{date:this.getFormattedDateForContent(r),tootAuthorName:t.account.display_name,tootURL:t.url,tootContent:s,extra:{status:t,replies:e}}}async loadStatus(t,e){return JSON.parse(await(0,Ke.request)({method:"GET",contentType:"application/json",url:`https://${t}${Mi.STATUS}/${e}`}))}async loadReplies(t,e){let a=String.prototype.concat.call("https://",t,String.prototype.replace.call(Mi.CONTEXT,"%id%",e));return JSON.parse(await(0,Ke.request)({method:"GET",contentType:"application/json",url:a})).descendants}async parseStatus(t,e,a){let n=await be(t.content),r=this.plugin.settings.downloadMastodonMediaAttachments&&Ke.Platform.isDesktop?await we(this.app,this.plugin,e,this.prepareMedia(t.media_attachments),a):this.prepareMedia(t.media_attachments);return n.concat(r)}prepareMedia(t){return t.reduce((e,{url:a,description:n})=>{let r=n?`
> *${n}*`:"";return`${e}

![](${a})${r}`},"")}async testIsMastodon(t){if(!t)return!1;let e=new URL(t).hostname;try{let a=JSON.parse(await(0,Ke.request)({method:"GET",contentType:"application/json",url:`https://${e}${Mi.INSTANCE}`}));return(a==null?void 0:a.domain)===e}catch(a){return!1}}},tn=Oi;var an=require("obsidian");var Fi=class extends j{constructor(){super(...arguments);L(this,"PATTERN",/(tiktok.com)\/(\S+)\/(video)\/(\d+)/)}test(e){return this.isValidUrl(e)&&this.PATTERN.test(e)}async prepareNote(e){let a=new Date,n=await this.parseHtml(e,a),r=this.templateEngine.render(this.plugin.settings.tikTokNote,n),s=this.templateEngine.render(this.plugin.settings.tikTokNoteTitle,{authorName:n.authorName,date:this.getFormattedDateForFilename(a)});return new M(s,"md",r,this.plugin.settings.tikTokContentTypeSlug,a)}async parseHtml(e,a){var p,l,c,u;let n=await(0,an.request)({method:"GET",url:e,headers:{"user-agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/108.0.0.0 Safari/537.36"}}),r=new DOMParser().parseFromString(n,"text/html"),s=this.PATTERN.exec(e);return{date:this.getFormattedDateForContent(a),videoId:s[4],videoURL:(l=(p=r.querySelector('meta[property="og:url"]'))==null?void 0:p.getAttribute("content"))!=null?l:e,videoDescription:(u=(c=r.querySelector('meta[property="og:description"]'))==null?void 0:c.getAttribute("content"))!=null?u:"",videoPlayer:`<iframe width="${this.plugin.settings.tikTokEmbedWidth}" height="${this.plugin.settings.tikTokEmbedHeight}" src="https://www.tiktok.com/embed/v2/${s[4]}"></iframe>`,authorName:s[2],authorURL:`https://www.tiktok.com/${s[2]}`}}},nn=Fi;var dt=class{constructor(t){L(this,"parsers");this.parsers=t}async createParser(t){for(let e of this.parsers)if(await e.test(t))return e}};var ut=class extends Xe{constructor(){super(...arguments);L(this,"PATTERN",/^https?:\/\/(?:www\.)?github\.com\/([a-zA-Z0-9_-]+)\/([a-zA-Z0-9_-]+)\/?$/)}test(e){return this.isValidUrl(e)&&this.PATTERN.test(e)}async prepareNote(e){let a=new URL(e),n=await this.getDocument(a),r=n.querySelector("article.markdown-body");return r.querySelectorAll('[aria-label^="Permalink:"]').forEach(s=>s.remove()),n.querySelector("body").innerHTML=r.outerHTML,this.makeNote(n,a)}};var gt=class extends Xe{constructor(){super(...arguments);L(this,"PATTERN",/^(?:https?:\/\/)?(?:[a-z]{2,3}(?:-[a-z]{2,3})?)(?:\.m)?\.wikipedia\.org\/wiki\/([^\/]+)$/i)}test(e){return this.isValidUrl(e)&&this.PATTERN.test(e)}async prepareNote(e){let a=new URL(e),n=await this.getDocument(a);return n.querySelectorAll(".reference .cite-bracket").forEach(r=>{r.remove()}),n.querySelectorAll(".reference a").forEach(r=>{r.textContent="\xA0"+r.textContent}),n.querySelectorAll(".mw-cite-backlink").forEach(r=>{r.remove()}),n.querySelectorAll(".infobox caption").forEach(r=>{let s=n.createElement("p");s.innerHTML=r.innerHTML,r.parentElement.insertBefore(s,r),r.remove()}),n.querySelectorAll(".wikitable caption").forEach(r=>{let s=n.createElement("p");s.innerHTML=r.innerHTML,r.parentElement.insertBefore(s,r),r.remove()}),this.makeNote(n,a)}};var Je=["string","number","bigint","symbol"],jr=/{{(.*?)}}/g,ht=class{constructor(){L(this,"modifiers");this.modifiers={blockquote:t=>this.validateFilterValueType(t,"blockquote",Je)?t.split(`
`).map(e=>`> ${e}`).join(`
`):t,capitalize:t=>{if(!this.validateFilterValueType(t,"capitalize",Je))return t;let e=String(t);return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()},join:(t,e=",")=>this.validateFilterValueType(t,"join",["array"])?t.join(e):t,lower:t=>{if(!this.validateFilterValueType(t,"lower",Je))return t;String(t).toLowerCase()},map:(t,e)=>{if(!this.validateFilterValueType(t,"map",["array"]))return t;try{return t.map(e)}catch(a){return console.warn("Error in map modifier:",a),t}},replace:(t,e,a="")=>this.validateFilterValueType(t,"replace",Je)?t.replaceAll(e,a):t,striptags:(t,e="")=>{if(!this.validateFilterValueType(t,"striptags",Je))return t;let a=new RegExp(`<(?!/?(${e.replace(/[<>]/g,"").split(",").join("|")})s*/?)[^>]+>`,"gi");return t.replace(a,"")},upper:t=>{if(!this.validateFilterValueType(t,"upper",Je))return t;String(t).toUpperCase()}}}render(t,e){try{let a=this.processLoops(t,e);return a=this.processVariables(a,e),a=this.processSimplePattern(a,e),a}catch(a){return console.error("Error rendering template:",a),t}}processSimplePattern(t,e){let a=/%(\w+(?:\.\w+)*)%/g;return t.replace(a,(n,r)=>{try{let s=this.resolveValue(r,e);return s===void 0?(console.warn(`Unable to resolve ${r}`),n):String(s)}catch(s){return console.warn(`Error processing simple pattern "${n}":`,s),n}})}processVariables(t,e){return t.replace(jr,(a,n)=>{try{let[r,...s]=n.split("|").map(x=>x.trim()),l=/(['"])((?:[^\\]|\\.)*?)\1/.exec(r),c;if(l!==null?c=l[2]:c=this.resolveValue(r,e),c===void 0)return console.warn(`Unable to resolve ${r}`),a;let u=c;for(let x of s)u=this.applyModifier(u,x);return String(u)}catch(r){return console.warn(`Error processing variable "${a}":`,r),a}})}processLoops(t,e){let a=/{%\s*for\s+(\w+)\s+in\s+(\w+(?:\.\w+)*)\s*%}([\s\S]*?){%\s*endfor\s*%}/g;return t.replace(a,(n,r,s,p)=>{try{let l=this.resolveValue(s,e);return Array.isArray(l)?l.map(c=>{let u={...e,[r]:c};return this.render(p,u)}).join(""):(console.warn(`Value at "${s}" is not an array`),"")}catch(l){return console.warn(`Error processing loop "${n}":`,l),""}})}resolveValue(t,e){let a=t.trim().split("."),n=e;for(let r of a){if(n==null)return;n=n[r]}return n}addModifier(t,e){if(typeof e!="function")throw new Error("Modifier must be a function");this.modifiers[t]=e}parseModifier(t){let e=t.match(/(\w+)(?:\((.*?)\))?/);if(!e)return{name:t,args:[]};let[,a,n]=e,r=n?this.parseArguments(n):[];return{name:a,args:r}}parseArguments(t){let e=[],a="",n=!1,r="",s=!1,p=0,l=!1,c=()=>{(a.trim()||n)&&e.push(this.evaluateArgument(a.trim())),a=""};for(let u=0;u<t.length;u++){let x=t[u];if(l){a+=x,l=!1;continue}switch(x){case"\\":l=!0;break;case'"':case"'":s||(n&&x===r?n=!1:n||(n=!0,r=x)),a+=x;break;case"(":p++,a+=x;break;case")":p--,a+=x;break;case"=":t[u+1]===">"?(s=!0,a+="=>",u++):a+=x;break;case",":!n&&!s&&p===0?c():a+=x;break;default:a+=x}}return(a||n)&&c(),e}evaluateArgument(t){try{if(t.includes("=>")){let e=Function(`return ${t}`)();return typeof e=="function"?e:t}if(t.startsWith('"')&&t.endsWith('"')||t.startsWith("'")&&t.endsWith("'"))return t.slice(1,-1);if(t==="")return"";if(!isNaN(Number(t)))return Number(t);if(t.startsWith("[")&&t.endsWith("]"))try{return JSON.parse(t)}catch(e){return t}return t}catch(e){return console.warn("Error evaluating argument:",t,e),t}}applyModifier(t,e){try{let{name:a,args:n}=this.parseModifier(e);return this.modifiers[a]?this.modifiers[a](t,...n):(console.warn(`Modifier "${a}" not found`),t)}catch(a){return console.warn(`Error applying modifier "${e}":`,a),t}}validateFilterValueType(t,e,a){let n=typeof t;return a.includes(n)?!0:a.includes("array")?Array.isArray(t):(console.warn(`Filter ${e} supports following types ${a.join(", ")}, but ${n} was provided.`),!1)}};var jt=class extends q.Plugin{constructor(){super(...arguments);L(this,"settings");L(this,"parserCreator");L(this,"templateEngine");L(this,"fileSystemLimits")}getFileSystemLimits(){return this.fileSystemLimits}async onload(){await this.loadSettings(),this.fileSystemLimits=fa(q.Platform,this.settings),this.templateEngine=new ht,this.parserCreator=new dt([new Ea(this.app,this,this.templateEngine),new _a(this.app,this,this.templateEngine),new Da(this.app,this,this.templateEngine),new $a(this.app,this,this.templateEngine),new Ga(this.app,this,this.templateEngine),new tn(this.app,this,this.templateEngine),new nn(this.app,this,this.templateEngine),new ut(this.app,this,this.templateEngine),new gt(this.app,this,this.templateEngine),new Xe(this.app,this,this.templateEngine),new en(this.app,this,this.templateEngine)]),(0,q.addIcon)("read-it-later",Hr),this.addRibbonIcon("read-it-later","ReadItLater: Save clipboard",async()=>{await this.processClipboard()}),this.addCommand({id:"save-clipboard-to-notice",name:"Save clipboard",callback:async()=>{await this.processClipboard()}}),this.addSettingTab(new Lt(this.app,this)),this.settings.extendShareMenu&&this.registerEvent(this.app.workspace.on("receive-text-menu",(e,a)=>{e.addItem(n=>{n.setTitle("ReadItLater"),n.setIcon("read-it-later"),n.onClick(()=>this.processContent(a))})})),this.registerEvent(this.app.workspace.on("url-menu",(e,a)=>{ue(a,[kt,Ct])&&e.addItem(n=>{n.setTitle("ReadItLater"),n.setIcon("read-it-later"),n.onClick(()=>this.processContent(a))})}))}async loadSettings(){this.settings=Object.assign({},d,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}async processClipboard(){let e=await navigator.clipboard.readText();this.settings.batchProcess?this._processUrlsBatch(e):this._processUrlSingle(e)}async _processUrlSingle(e){let n=await(await this.parserCreator.createParser(e)).prepareNote(e);await this.writeFile(n)}async _processUrlsBatch(e){let a=(()=>{let n=e.trim().split(Ta(this.settings.batchProcessDelimiter)).filter(s=>s.trim().length>0);return n.reduce((s,p)=>s&&ue(p),!0)?n:[e]})();for(let n of a)this._processUrlSingle(n)}async processContent(e){let n=await(await this.parserCreator.createParser(e)).prepareNote(e);await this.writeFile(n)}async writeFile(e){let a;if(this.app.vault.adapter instanceof q.CapacitorAdapter||this.app.vault.adapter instanceof q.FileSystemAdapter?a=mt("/",e.getFullFilename(),this.app.vault.adapter,this.fileSystemLimits):a=(0,q.normalizePath)(`/${e.getFullFilename()}`),this.settings.inboxDir){let n=this.templateEngine.render(this.settings.inboxDir,{date:qe(e.createdAt,this.settings.dateTitleFmt),fileName:e.fileName,contentType:e.contentType});await pt(this.app.vault,n),this.app.vault.adapter instanceof q.CapacitorAdapter||this.app.vault.adapter instanceof q.FileSystemAdapter?a=mt(n,e.getFullFilename(),this.app.vault.adapter,this.fileSystemLimits):a=(0,q.normalizePath)(`${n}/${e.getFullFilename()}`)}if(await this.app.vault.adapter.exists(a))new q.Notice(`${e.getFullFilename()} already exists!`);else{let n=await this.app.vault.create(a,e.content);(this.settings.openNewNote||this.settings.openNewNoteInNewTab)&&this.app.workspace.getLeaf(this.settings.openNewNoteInNewTab?"tab":!1).openFile(n),new q.Notice(`${e.getFullFilename()} created successful`)}}},Hr=`
<svg fill="currentColor" stroke="currentColor" version="1.1" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
	<g>
		<path d="m365.9,144.9c-12.3,0-24.2,1.8-35.4,5.2v-114.7h-96.9l7.3-35.4h-150.2l6.8,35.4h-97.5v454.6h330.5v-102.1c11.2,3.4 23.1,5.2 35.4,5.2 68.8-0.1 124.1-56.4 124.1-124.1 0-67.8-55.3-124.1-124.1-124.1zm-150.1-124l-10.4,50h-79.2l-9.4-50h99zm93.8,448.2h-288.7v-412.8h80.7l6.8,35.4h113.6l7.3-35.4h80.3v102.2c-27.3,14-48.8,37.9-59.7,66.7h-200.9v20.8h195c-1.4,7.4-2.2,15.1-2.2,22.9 0,13.4 2.2,26.4 6.2,38.6h-199v20.9h208.1c12,21.8 30.3,39.7 52.5,51.1v89.6zm56.3-98c-57.3,0-103.2-46.9-103.2-103.2s46.9-103.2 103.2-103.2c57.3,0 103.2,46.9 103.2,103.2s-45.8,103.2-103.2,103.2z"/>
		<polygon points="426.4,223.1 346.1,303.4 313.8,271.1 299.2,285.7 346.1,332.6 441,237.7   "/>
		<rect width="233.5" x="49" y="143.9" height="20.9"/>
		<rect width="233.5" x="49" y="388.9" height="20.9"/>
	</g>
</svg>`;
/*! Bundled license information:

dompurify/dist/purify.js:
  (*! @license DOMPurify 2.5.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.5.6/LICENSE *)
*/

/* nosourcemap */